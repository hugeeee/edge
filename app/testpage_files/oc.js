var $activePanel=function(e){return $(e)};!function(e){e.extend(e,{query:function(n){return e(n)}}),e.extend(e.ui,{showMask:function(n){var t=e("#single-bet-slip-controller").hasClass("active")?"single":"multi",l=e("#"+t+"-bet-slip-controller"),i=e("#"+t+"-bs-loader");i.hasClass("hide")?(l.find(".content-wrapper").addClass("blurred-overlay"),i.removeClass("hide").find(".big-text").html(n)):i.find(".big-text").html(n),i.position({my:"center",at:"center",of:l,collision:"none"})},hideMask:function(){var n=e("#single-bet-slip-controller").hasClass("active")?"single":"multi",t=e("#"+n+"-bet-slip-controller"),l=e("#"+n+"-bs-loader");t.find(".content-wrapper").removeClass("blurred-overlay"),l.addClass("hide").find(".big-text").html("")},loadContent:function(){}})}(jQuery);
var common=function(){var t=function(t){return t.attr("data-bid")||t.parents("[data-bid]").attr("data-bid")},e=function(t){return t.attr("data-bk")||common.getBookieFromCellMap(t)},o=function(){var t,e=0,o=$activePanel(".eventTableHeader td");oc.bookieCellMap=o.length?{}:null,o.each(function(){t=$(this).attr("data-bk"),t&&(oc.bookieCellMap[t]=e),e++})},a=function(t){for(var e in oc.bookieCellMap)if(oc.bookieCellMap[e]===t[0].cellIndex)return e},n=function(t){var e;return null!==oc.bookieCellMap&&oc.bookieCellMap[t]&&(e=$activePanel('#etfEW td[data-bk="'+t+'"]')),e},l=function(t,e){var o;return o=$activePanel('[data-bid="'+t+'"][data-bk="'+e+'"]'),"object"==typeof t&&(o=$(t)),0===o.length&&null!==oc.bookieCellMap&&oc.bookieCellMap[e]&&(o=$activePanel('tr[data-bid="'+t+'"] td:nth-child('+(oc.bookieCellMap[e]+1)+")")),o},r=function(t,e){var o=common.getBetButtonObject(t,e);return common.getOddsCellFromButton(o)},i=function(t){var e=t.find(".data-o");return 0===e.length&&(e=t),e};return{getBetIdFromButton:t,getBookieFromButton:e,setBookieCellMap:o,getBookieFromCellMap:a,getExtraBookieInfoFromGrids:n,getBetButtonObject:l,getOddsCellByIdAndBookie:r,getOddsCellFromButton:i}}();
var ocAngularApp=angular.module("ocAngularApp",["templateCache"]);ocAngularApp.config(["$httpProvider","$animateProvider","$sceDelegateProvider","$provide","$locationProvider",function(e,r,t,o,n){r.classNameFilter(/oc-animate/),e.defaults.withCredentials=!0,delete e.defaults.headers.common["X-Requested-With"],t.resourceUrlWhitelist(["self","https://*static.oddschecker.com/**"]),o.decorator("$exceptionHandler",["$delegate","$injector",function(e,r){return function(t,o){if("TypeError"===t.name){var n=r.get("AlertFactory"),a=r.get("BetSlipModel");0===a.model.client.errorsAndWarnings.global.warnings.length&&n.alertWithOptionToGoToBookie(!1,"An error has occured when placing your bet. Please check your bookmaker account to see if your bet has been confirmed, and then refresh the page."),$.ui.hideMask()}e(t,o)}}]),n.html5Mode(!0)}]),Number.prototype.toFixedNumber=function(e,r){var t=Math.pow(r||10,e);return+(Math.round(this*t)/t)},String.prototype.toFixedNumber=function(e,r){var t=Math.pow(r||10,e);return String(+(Math.round(this*t)/t))},window.removeDuplicates=function(e){var r,t,o={};for(t=e.length-1;t>=0;t--)r=JSON.stringify(e[t]),o[r]?e.splice(t,1):o[r]=!0;return e};
!function(){"use strict";ocAngularApp.controller("MainController",["MainFactory","$compile","$scope","$timeout","NavModel","QuickAccaModel","AccaFactory","OcAuthFactory","QuickAccaInterface","MultiBetSlipFactory","FacebookLoginFactory","GoogleLoginFactory","$rootScope","ApiBetSlipNavModel","GeneralBookieAccountsFactory","CookieFactory","LocalStorageFactory",function(e,t,o,i,c,l,a,n,d,s,u,r,m,p,B,k,g){var f=this;f.model={},f.nav=p.model,f.accaModel=l.model,f.fb_model=u.model,f.mainNav=c.model,f.modalOpen=!1,f.$scope=o,l.model.simpleBetData=l.model.simpleBetData||{},d.setBetSlipBadgeNumber(),f.runOnContentLoad=function(e){i(function(){o.$apply(function(){t(e)(o)})})},o.$watch(function(){return oc.isLoggedIn},function(){B.associateAccounts()}),o.$watch(function(){return p.model.desktopViews.multiBetView.active},function(){p.model.desktopViews.multiBetView.active?e.loadMultipleBetSlip():l.model.chosenBookie={uiOdds:{}}}),o.$watch(function(){return p.model.desktopViews.singleBetView.active||p.model.desktopViews.multiBetView.active||p.model.desktopViews.betSlipHelpView.active},function(){f.modalOpen=p.model.desktopViews.singleBetView.active||p.model.desktopViews.multiBetView.active||p.model.desktopViews.betSlipHelpView.active?!0:!1}),f.addToMultipleBetSlip=function(e,t,o){d.utils.addOrRemoveQuickAcca(e,t,o).then(function(t){d.utils.desktopaddOrRemoveQuickAccaCallback(t),"ADD"!==t.instruction&&a.deleteBet(e)})},f.addArrayToMultipleBetSlip=function(e){for(var t=[],o=0;o<e.length;o++)t[e[o].betId]=e[o].marketId+"-1",l.model.simpleBetData[e[o].betId]={betId:e[o].betId,marketId:e[o].marketId,included:!0,bestOdds:e[o].bestOdds};k.setCookieArray("basket",t),g.setData("betBasketBets",l.model.simpleBetData),c.model.showBetAddedAlert=!0,d.setBetSlipBadgeNumber(),d.calculateBestAccaReturns()},f.toggleMultiBetSlip=function(e){c.model.showBetAddedAlert=!1,s.toggleMultiBetSlipDesktop(),e&&(a.updateChosenBookie(e),l.model.chosenBookie.bookie=e,l.model.UI.rememberBookie=!0)},f.associateAccounts=function(){e.associateAccounts()},f.oddscheckerLogOutRoutine=function(){n.oddscheckerLogOutRoutine()},f.clearSocialErrors=function(){m.$broadcast("NG-EVENT:clearSocialErrors")},f.fb_socialLogin=function(e,t){t&&(u.model.isSignUp=!0),"getPermission"===e?u.FB_login("getPermission"):u.FB_checkLoginState()},f.google_socialLogin=function(e){e&&(r.model.isSignUp=!0),r.Google_login()},f.calculateBestAccaReturns=function(){d.calculateBestAccaReturns(),c.model.showBetAddedAlert=!0}}])}();
!function(){"use strict";ocAngularApp.factory("MainFactory",["AccaFactory","QuickAccaModel","$http","$timeout","MobileBookieAccountsInterface","BetSlipModel","ApiBetSlipNavModel","TranslationsModel","$q",function(e,t,a,i,o,l,c,n){var s={};return s.loadMultipleBetSlip=function(){i(function(){t.model.UI.rememberBookie!==!0&&(t.model.UI.rememberBookie=!1),e.resetQuickAcca(),$.ui.showMask(n.model.loadingBetslip),angular.element($("#multi-bet-slip-ajax-content")).empty(),a.get("/ajax/load-multi-bet-slip").success(function(a){angular.element($("#multi-bet-slip-ajax-content")).html(a),null!==oc.accaData&&null!==oc.betSlipData&&(t.model.accaData=oc.accaData,t.model.betSlipData=oc.betSlipData,t.model.accaTotalsXml=oc.accaTotalsXml,e.initMultiBetSlipData(),$.ui.hideMask())})})},s.handleLoginView=function(e){var t;t=c.model.desktopViews.singleBetView.active?"singleBetView":c.model.desktopViews.exchangeBetView.active?"exchangeBetView":"multiBetView";var a="multiBetView"===t?"quickAcca":"betSlip";"SK"===e?c.desktopNavHandler(t,a,!0):c.desktopNavHandler(t,"bookieLogin")},s.associateAccounts=function(){o.associateAccounts()},s}])}();
!function(){"use strict";ocAngularApp.factory("ApiBetSlipNavModel",["BetSlipModel","BookieAccountsModel","TranslationsModel","CookieFactory","$sce",function(e,t,o,i,s){var l={};return l.model={beta:"betslip_t6201-beta"===i.getCookie("ab")?!0:!1,accaFooter:{returns:0,showHide:!1},desktopViews:{singleBetView:{active:!1,betSlip:!1,bookieLogin:!1,iframeLogin:!1,betReceipt:!1,singleBetToPopulate:0},multiBetView:{active:!1,quickAcca:!1,bookieLogin:!1,otherBets:!1,iframeLogin:!1,betReceipt:!1,helpMessages:"OC"===oc.repub?["basket","selections","bestOdds","account"]:["basket","selections","bestOdds"],currentHelpMessage:""},exchangeBetView:{active:!1,betSlip:!1,bookieLogin:!1,iframeLogin:!1,betReceipt:!1,singleBetToPopulate:0},bookieAccountsView:{active:!1,bookieLogin:!1},betSlipHelpView:{active:!1,multiBetView:!1,singleBetView:!1,multiMessages:["account","individual","enterStake","bestOdds","changeBookmaker","otherOptions","betNow"],singleMessages:["account","enterStake","bestOdds","changeBookmaker","otherOptions","betNow"],currentHelpMessage:{}},translations:o.model,oldParentView:null,oldChildView:null,newParentView:null,newChildView:null,backToChildView:null,singleClickOutConfirmation:!1,multipleClickOutConfirmation:!1,clickoutInfoMessage:((oc||{}).showClickoutConfirmation||{}).clickoutMessage?s.trustAsHtml(oc.showClickoutConfirmation.clickoutMessage):"",optInComplete:!1,alreadyOptedIn:!1}},l.desktopNavHandler=function(o,i,s){if("back"!==o&&(l.model.desktopViews.newParentView=o?o:l.model.desktopViews.oldParentView,l.model.desktopViews.newChildView=i?i:l.model.desktopViews.oldChildView),l.model.desktopViews.oldParentView&&(l.model.desktopViews[l.model.desktopViews.oldParentView].active=!1,l.model.desktopViews.oldChildView&&(l.model.desktopViews[l.model.desktopViews.oldParentView][l.model.desktopViews.oldChildView]=!1),"iframeLogin"===l.model.desktopViews.oldChildView&&(l.model.desktopViews[l.model.desktopViews.oldParentView].bookieLogin=!1)),l.model.desktopViews.oldParentView=l.model.desktopViews.newParentView,l.model.desktopViews.oldChildView=l.model.desktopViews.newChildView,"back"!==o)"bookieLogin"!==l.model.desktopViews.newChildView&&"betReceipt"!==l.model.desktopViews.newChildView&&"iframeLogin"!==l.model.desktopViews.newChildView&&"otherBets"!==l.model.desktopViews.newChildView&&(l.model.desktopViews.backToChildView=l.model.desktopViews.newChildView),s?l.model.desktopViews.newParentView&&s&&(l.model.desktopViews[l.model.desktopViews.newParentView].active=!1,l.model.desktopViews.newChildView&&(l.model.desktopViews[l.model.desktopViews.newParentView][l.model.desktopViews.newChildView]=!1),"singleBetView"===i&&e.model.API.ocBetslip.singles.length>0&&(e.model.API.ocBetslip.singles[0].stakePerLine=""),e.clearAllErrors(),t.clearUserNamePassword()):(l.model.desktopViews[l.model.desktopViews.newParentView].active=!0,l.model.desktopViews.newChildView&&(l.model.desktopViews[l.model.desktopViews.newParentView][l.model.desktopViews.newChildView]=!0),"iframeLogin"===l.model.desktopViews.newChildView&&(l.model.desktopViews[l.model.desktopViews.newParentView].bookieLogin=!0));else{var d=l.model.desktopViews.backToChildView;l.model.desktopViews.backToChildView=null,e.clearAllErrors(),null!==d&&l.desktopNavHandler(null,d)}},l.headerText=function(){var e;e=l.model.desktopViews.singleBetView.active?"singleBetView":l.model.desktopViews.exchangeBetView.active?"exchangeBetView":"multiBetView";var t={betSlip:o.model.singleBetSlip,quickAcca:o.model.multipleBetSlip,otherBets:o.model.multipleBetSlip,bookieLogin:"Login",betReceipt:"Bet Receipt"};for(var i in t)if(l.model.desktopViews[e][i])return t[i]},l.returnHelpText=function(e){var t=l.model.desktopViews.betSlipHelpView.multiBetView?"multiMessages":"singleMessages",o={commonMessages:{account:{title:"Your Bookmaker Account",text:"This will display your bookmaker account name and balance once you have logged into the bookmaker. You can also follow links to deposit and log out of that bookmaker account."},bestOdds:{title:"Best Odds",text:"If the Best Odds indicator is showing next to the odds selected, this means this is a best odds bet! This indicator also appears in the ‘Change Bookmaker’ drop down."},enterStake:{title:"Your Stake",text:"Here you can enter your stake. You can also choose from a number of pre-selected stakes to make it easier."},changeBookmaker:{title:"Change Your Bookmaker",text:"Change bookmakers via the betslip. The dropdown will show you all bookies in price order, with the rosette signalling best odds. The profile icon shows our fast-bet partners and whether you are currently logged in or out of them."},betNow:{title:"Place Bet",text:"Nothing stopping you now. Hit Place Bet and we’ll place the bet for you, then provide you a bet receipt."}},multiMessages:{header:{title:"Oddschecker Multiple Betslip",text:"Throughout the Oddschecker site, you can add selections to your multiple betslip. Once you’re ready, just hit the multiple betslip icon which appears top right of the navigation bar. We’ll show you the odds available for your selections as an accumulator, then you’re away."},individual:{title:"Customise Your Bet",text:"With each individual selection that makes up your multiple, you have some options. You can remove a selection, hide it, or even still bet on it as a single…but don’t worry, we won’t remove it from your multiple."},otherOptions:{title:"Looking For Something Else?",text:" If you want to place a different kind of bet, a Trixie or Heinz for example, just select this and we’ll load all the other bet options that are available for your selections."}},singleMessages:{header:{title:"Oddschecker Single Betslip",text:"The Oddschecker Single Betslip can be accessed from any of our odds grid, and will allow you to place a bet with a selected number of bookmakers. No need to trawl through all those sites, just log in with your bookmaker username and bet directly with the bookie from the Oddschecker site."},otherOptions:{title:"Make It A Multiple!",text:" If you’ve opened up a single betslip, but fancy making a multiple out of it then just hit this button. We’ll add the selection to your multiple betslip, which appears top right of the navigation bar."}}};return"header"===e?o[t][e]:o.commonMessages[l.model.desktopViews.betSlipHelpView[t][e]]?o.commonMessages[l.model.desktopViews.betSlipHelpView[t][e]]:o[t][l.model.desktopViews.betSlipHelpView[t][e]]},l.emptyBetSlipText=function(e){var t={basket:o.model.emptyBetslipBasket,bestOdds:o.model.emptyBetslipBestOdds,selections:o.model.emptyBetslipBadge,account:"This icon indicates you are logged-in with one of our fast-bet partners. You’re one click away!"};return t[l.model.desktopViews.multiBetView.helpMessages[e]]},l}])}();
ocAngularApp.directive("autofocus",["$timeout",function(t){return{restrict:"A",link:function(n,u){t(function(){u[0].focus()},100)}}}]);
!function(){"use strict";ocAngularApp.constant("GLOBAL_CONSTANTS",{LOGIN_TYPES:{SINGLE:"single",MULTI:"multi",QUICK_ACCA:"quick",OTHER:"other",AUTO:"auto",SAFARI:"safari"},GAM_COMMISSION_URL:"https://secure.gamblingcommission.gov.uk/gccustomweb/PublicRegister/PRSearch.aspx?ExternalAccountId=",GENERAL_CONSTANTS:{ZERO:"0.00",NOTAVAIL:"N/A",STARTINGPRICE:"SP",BESTODDSGTD:"BOG",LIVEPRICE:"LP"},BOOKIE_REF:{B3:"875",BF:"39561",BY:"39469",CE:"39071",LD:"1611",PP:"38939",SK:"38718",VC:"39576",WA:"39372",WH:"39225",WN:"39123"},BOOKIE_LICENSE:{B3:"38939",BF:"39561",BY:"39469",CE:"39071",LD:"1611",PP:"38939",SK:"38718",VC:"39576",WA:"39372",WH:"39225",WN:"39123"},BOOKIE_DEPOSIT_URL:{B3:"https://mobile.bet365.com/he/Authenticated/Bank/Deposit/?prdid=1&bs=0&i=false",BF:"https://touch.betfair.com/#/depositFundsForm",BY:"http://m.boylesports.com/MobileAccount/ViewDeposit/?back=HOME",CE:"https://mobile.coral.co.uk/payment/deposit",LD:"https://sb.ladbrokes.com/Ladbrokes/mobwebapp/entryPoint.html?deepLinkCommandName=mainMenu&locale=en_GB#3",PP:"https://accounts.paddypower.mobi/deposit/",SK:"https://m.skybet.com/",VC:"https://www.betvictor.mobi/#/cashier/doDeposit/running",WA:"https://mobile.betway.com/en/sports",WH:"https://mobet.williamhill.com/#!iphone/acc/en-gb/deposit",WN:"https://m.winner.co.uk/payment/deposit"},BOOKIE_DEPOSIT_DESKTOP_URL:{B3:"https://members.bet365.com/home/mainpage.asp?ibpid=2640",BF:"https://accountservices.betfair.com/myaccount/account/OpenMyAccountEx.do?rlhm=1&tabID=3",BY:"https://account1.boylesports.com/?op=view-deposit",CE:"http://www.coral.co.uk/account/deposit",LD:"https://pam.ladbrokes.com/web/ladbrokesvegas/depositMethods?noAccounts=true",PP:"https://www.paddypower.com/money?action=go_active_paymthd_new",SK:"https://www.skybet.com/",VC:"https://www.betvictor.com/deposit/en/account/deposit",WA:"https://bank2.valueactive.eu/3646/common/index.asp",WH:"https://sports.williamhill.com/acc/en-gb?action=GoDeposit",WN:"http://sports.winner.co.uk/"},BOOKIE_TANDC_URL:{B3:"http://help.bet365.com/en/terms-and-conditions",BF:"http://www.betfair.com/en/aboutUs/Terms.and.Conditions/",BY:"https://boylesports.com/content/html/sports/termsofuse.html",CE:"https://mobile.coral.co.uk/sportsbook/terms",LD:"http://help.ladbrokes.com/display/4/kb/article.aspx?aid=2665",PP:"https://support.paddypower.com/app/answers/detail/a_id/1",SK:"https://support.skybet.com/app/answers/detail/a_id/40/c/29",VC:"https://www.betvictor.mobi/pages/help/terms-conditions",WA:"https://mobile.betway.com/en/sports",WH:"https://williamhill-lang.custhelp.com/app/answers/detail/a_id/10087",WN:"https://m.winner.co.uk/infopages/termsandconditions"},BOOKIE_TANDC_DESKTOP_URL:{B3:"http://help.bet365.com/en/terms-and-conditions",BF:"http://www.betfair.com/en/aboutUs/Terms.and.Conditions/",BY:"http://boylesports.com/content/html/sports/termsofuse.html",CE:"http://coral-eng.custhelp.com/app/answers/detail/a_id/2130",LD:"http://help.ladbrokes.com/display/4/kb/article.aspx?aid=2665",PP:"https://support.paddypower.com/app/answers/detail/a_id/1",SK:"https://support.skybet.com/app/answers/detail/a_id/40/c/29",VC:"http://www.betvictor.com/sports/en-gb/content/terms-and-conditions",WA:"https://betway.com/terms/",WH:"https://williamhill-lang.custhelp.com/app/answers/detail/a_id/10087",WN:"http://sports-portal.winner.co.uk/terms-and-conditions/"},BOOKIE_RULES_URL:{B3:"http://help.bet365.com/en/rules",BF:"http://www.betfair.com/aboutUs/Sportsbook.Rules.And.Regulations/",BY:"https://boylesports.com/content/html/sports/rulebook.html",CE:"https://mobile.coral.co.uk/sportsbook/shop_rules",LD:"http://help.ladbrokes.com/display/4/kb/article.aspx?aid=2478",PP:"https://support.paddypower.com/app/answers/detail/a_id/10",SK:"https://support.skybet.com/app/answers/detail/a_id/40/c/29?mobile=1",VC:"https://www.betvictor.mobi/pages/help/betting-rules",WH:"https://williamhill-lang.custhelp.com/app/answers/detail/a_id/10087",WA:"https://mobile.betway.com/en/sports",WN:"https://m.winner.co.uk/infopages/responsibleGaming"},BOOKIE_RULES_DESKTOP_URL:{B3:"http://help.bet365.com/en/rules",BF:"http://www.betfair.com/aboutUs/Sportsbook.Rules.And.Regulations/",BY:"https://boylesports.com/content/html/sports/rulebook.html",CE:"https://coral-eng.custhelp.com/app/answers/detail/a_id/2141",LD:"http://help.ladbrokes.com/display/4/kb/article.aspx?aid=2478",PP:"https://support.paddypower.com/app/answers/detail/a_id/10",SK:"https://support.skybet.com/app/answers/detail/a_id/40/c/29",VC:"http://helpcentre.betvictor.com",WH:"https://williamhill-lang.custhelp.com/app/answers/detail/a_id/2063#General",WA:"https://sports.betway.com/help/bet-help",WN:"http://sports-portal.winner.co.uk/betting-rules/"},BOOKIE_SPECIFIC_TEXT:{B3:"Hillside (UK Sports) LP is licensed and regulated by the British Gambling commission (Licence number 39563).Registered Office Hillside (UK Sports) LP (registration number 117), Unit 1.1, First Floor, Waterport Place, 2 Europort Avenue, Gibraltar.",BF:"",BY:"",CE:"",LD:"",PP:"",SK:"",VC:"",WA:"",WH:"",WN:""},BOOKIE_NAMES:oc.bookiesNames,BOOKIE_HAS_INAPP_BETTING:oc.activeApiBookies,BOOKIE_HAS_MOBILE_QUICKBET:oc.mobileQuickBetBookies,BOOKIE_HAS_MULTI_BET_SLIP:void 0===oc.bookiesWithMultiBetSlip?[]:oc.bookiesWithMultiBetSlip,BOOKIE_HAS_IFRAME_LOGIN:{B3:!0,BF:!0,BY:!1,CE:!1,LD:!0,PP:!0,SK:!0,VC:!1,WH:!1,WA:!1,WN:!1},BOOKIE_HAS_OC_LOGIN:{B3:!1,BF:!1,BY:!0,CE:!0,LD:!1,PP:!1,SK:!1,VC:!0,WH:!0,WA:!0,WN:!0},BOOKIE_TRANSLATE:{B3:"bet365",BF:"Betfair",BY:"Boylesports",CE:"Coral",LD:"Ladbrokes",PP:"Paddy Power",SK:"Sky Bet",VC:"Bet Victor",WH:"William Hill",WA:"Betway",WN:"Winner",SO:"Sporting Bet",BX:"Totesport",FR:"BetFred"},BET_DESCRIPTIONS:{Single:"A single bet on an event",Double:"An accumulator involving 2 selections",Doubles:"An accumulator involving 2 selections",Treble:"An accumulator involving 3 selections",Trebles:"An accumulator involving 3 selections",Fourfolds:"An accumulator involving 4 selections",Fivefolds:"An accumulator involving 5 selections",Sixfolds:"An accumulator involving 6 selections",Sevenfolds:"An accumulator involving 7 selections",Eightfolds:"An accumulator involving 8 selections",Ninefolds:"An accumulator involving 9 selections",Tenfolds:"An accumulator involving 10 selections",Trixie:"Four bets combining 3 selections; three doubles and a treble",Yankee:"11 bets combining 4 selections; six doubles, four trebles and a fourfold",Canadian:"26 bets combining 5 selections; 10 doubles, 10 trebles, five fourfolds and a fivefold",Heinz:"57 bets combining 6 selections; 15 doubles, 20 trebles, 15 fourfolds, six fivefolds and a sixfold","Super Heinz":"120 bets combining 7 selections; 21 doubles, 35 trebles, 35 fourfolds, 21 fivefolds, seven sixfolds and a sevenfold",Goliath:"247 bets combining 8 selections; 28 doubles, 56 trebles, 70 fourfolds, 56 fivefolds, 28 sixfolds, eight sevenfolds and an eightfold",Patent:"Seven bets combining 3 selections; three singles, three doubles and a treble","Lucky 15":"15 bets combining 4 selections; four singles, six doubles, four trebles and a fourfold","Lucky 31":"31 bets combining 5 selections; five singles, 10 doubles, 10 trebles, five fourfolds and a fivefold","Lucky 63":"63 bets combining 6 selections; six singles, 15 doubles, 20 trebles, 15 fourfolds, six fivefolds and a sixfold","Accumulator: 4-Fold":"An accumulator involving 4 selections","Accumulator: 5-Fold":"An accumulator involving 5 selections","Accumulator: 6-Fold":"An accumulator involving 6 selections","Accumulator: 7-Fold":"An accumulator involving 7 selections","Accumulator: 8-Fold":"An accumulator involving 8 selections","Accumulator: 9-Fold":"An accumulator involving 9 selections","Accumulator: 10-Fold":"An accumulator involving 10 selections","Accumulator: 11-Fold":"An accumulator involving 11 selections","Accumulator: 12-Fold":"An accumulator involving 12 selections","Accumulator: 13-Fold":"An accumulator involving 13 selections","Accumulator: 14-Fold":"An accumulator involving 14 selections","Accumulator: 15-Fold":"An accumulator involving 15 selections","Accumulator: 16-Fold":"An accumulator involving 16 selections","Accumulator: 17-Fold":"An accumulator involving 17 selections","Accumulator: 18-Fold":"An accumulator involving 18 selections","Accumulator: 19-Fold":"An accumulator involving 19 selections","Accumulator: 20-Fold":"An accumulator involving 20 selections","Accumulator: 21-Fold":"An accumulator involving 21 selections","Accumulator: 22-Fold":"An accumulator involving 22 selections","Accumulator: 23-Fold":"An accumulator involving 23 selections","Accumulator: 24-Fold":"An accumulator involving 24 selections","Accumulator: 25-Fold":"An accumulator involving 25 selections","Permed Patent":"Multiple patents involving between 4 and 6 selections, combining all possible variations of 3 selections","Super Yankee":"26 bets combining 5 selections; 10 doubles, 10 trebles, five fourfolds and a fivefold","Permed Yankee":"Multiple Yankees involving 5 or 6 selections, combining all possible variations of 4 selections",Alphabet:"26 bets combining 6 selections; two patents, one yankee and a sixfold","Union Jack":"8 bets combining 9 selections; eight trebles","Union Jack Trixies":"32 bets combining 9 selections; eight trebles and 24 doubles",Block:"multiple bets combining 9 or more selections, with all combinations covered from doubles upward"}})}();
!function(){"use strict";ocAngularApp.factory("LocalStorageFactory",[function(){var t={},o=function(){try{var t="test",o=window.localStorage;return o.setItem(t,"1"),o.removeItem(t),window.localStorage}catch(a){return window.sessionStorage}};return t.localStorage=o(),t.setData=function(o,a){t.localStorage[o]=JSON.stringify(a)},t.getData=function(o){var a=t.localStorage[o];return void 0!==a?JSON.parse(a):void 0},t.removeData=function(o){t.localStorage.removeItem(o)},t}])}();
!function(){"use strict";ocAngularApp.factory("TranslationsModel",[function(){var t={};return t.model=oc.text,t}])}();
!function(){"use strict";ocAngularApp.factory("ErrorFactory",["$http","$rootScope","BetSlipModel","$timeout","ApiBetSlipNavModel","AlertFactory","ErrorModel",function(r,e,o,t,n,s,l){var a={};return a.betSlip=o.model,a.clearClientErrors=function(){l.model.bookmakerError=!1,l.model.networkError=!1},a.checkErrorAndResolvePromise=function(r,e){"ERROR"===r.response.data.serverResponse||"WARNING"===r.response.data.serverResponse?e.reject(r):e.resolve(r.response.data)},a}])}();
!function(){"use strict";ocAngularApp.factory("AlertFactory",["$rootScope","NavModel","OcAuthFactory","ApiBetSlipNavModel","BetSlipModel","ErrorModel","WarningFactory",function(o,e,t,n,i,a,s){var r={};return r.alertConfig=function(o){var e={};switch(e.showLoginOn401=null,e.showBetslipOption=null,e.goBack=!1,e.overRideMessageText=null,o.config.headers.Function){case"buildbetslip":case"checkbetslip":case"placebet":"bf"!==o.config.headers.Bookie?(e.showLoginOn401=!0,e.showBetslipOption=!0,e.goBack=!0):(e.showLoginOn401=!0,e.showBetslipOption=!0);break;case"getallbookmakeraccountstatus":e.showLoginOn401=!1,e.showBetslipOption=!1,e.goBack=!0;break;case"sendcookieinfo":e.showLoginOn401=!1,e.showBetslipOption=!1;break;case"login":"GET"===o.config.method?(e.showLoginOn401=!1,e.showBetslipOption=!1):"POST"===o.config.method&&(e.showLoginOn401=!1,e.showBetslipOption=!0,e.goBack=!0,e.overRideMessageText="You could not be logged into your bookmaker at this point. Please try again soon");break;case"deposit":e.showLoginOn401=!1,e.showBetslipOption=!1;break;case"getplacedbets":e.showLoginOn401=!0,e.showBetslipOption=!1;break;default:-1!==o.config.url.indexOf("my-bets")&&(e.goBack=!0)}return e},r.alertUserToLoginToMyOC=function(o){var e="Authorisation Required";o=o||"My Oddschecker credentials have timed out. Please tap ok to re-enter log in details",ocApp.generalAlert(e,o,!1,function(){$.ui.showMask("Refreshing App"),t.oddscheckerLogOutRoutine()})},r.alertWithOptionToGoBetslip=function(o,e,t){var i=e?e:"Bookmaker Error",r=t?t:"Your bet could not be placed at this point, no stake has been taken from your account. Please try again soon";"bookieLogin"!==n.model.desktopViews.newChildView&&(a.model.bookmakerError=!0,s.setBetslipClientWarning(i,r)),$.ui.hideMask()},r.alertWithOptionToGoToBookie=function(o,e){r.alertWithOptionToGoBetslip(!1,o,e)},r.alertAsInvalidGeoIp=function(){var o="Location Error",e="In-App betting is only available to UK and Ireland customers. Press 'Bet Now' button to go directly to bookmaker website to place bet";r.alertWithOptionToGoBetslip(!0,o,e)},r.alertWithFeedbackAndGoBack=function(o,e,t){e=e||"Network Error",t=t||"Failed to connect to bookmaker betting service",t=t||translations[oc.lang].PAGE_HAS_FAILED_TO_LOAD+" "+translations[oc.lang].PLEASE_TRY_AGAIN_LATER,a.model.networkError=!0,s.setBetslipClientWarning(e,t)},r}])}();
!function(){"use strict";ocAngularApp.factory("WarningFactory",["BetSlipModel","BookieAccountsModel","NavModel","$timeout","ApiBetSlipNavModel",function(n,e,i,l,r){var s={};return s.setBetAPIErrorState=function(){n.model.client.state=n.model.STATES.ERROR,i.model.showSingleBetSlip||"MOBILE"!==oc.platform||($activePanel(".v-scroller").css("padding-top",0),$activePanel(".v-scroller").css("padding-bottom",0)),"non-static/bet-slip-api"===oc.view&&"DESKTOP"===oc.platform&&s.scrollToError()},s.setBetslipClientWarning=function(e,i){n.model.client.errorsAndWarnings.global.warnings.push({warningCode:e,warningDesc:i}),s.setBetAPIErrorState(),s.scrollToError()},s.updateModelWarnings=function(e){var i,l,r,o,t,a,c,g={},p=e.data;if(null!==p.ocBetslip&&void 0!==p.ocBetslip){for(null!==p.ocBetslip.warning&&null!==p.ocBetslip.warning.warningCode&&(g[p.ocBetslip.warning.warningCode]=!0,n.model.client.errorsAndWarnings.global.warnings.push(p.ocBetslip.warning)),i=0,l=p.ocBetslip.singles.length;l>i;i++)if(null!==p.ocBetslip.singles[i].warnings){a=p.ocBetslip.singles[i].betInformation.betId;var d=[];for(r=0,o=p.ocBetslip.singles[i].warnings.length;o>r;r++)null!==p.ocBetslip.singles[i].warnings[r]&&null!==p.ocBetslip.singles[i].warnings[r].warningCode&&(t=p.ocBetslip.singles[i].warnings[r].warningCode,g[t]=!0,("P103"===t||"P104"===t)&&(p.ocBetslip.singles[i].warnings[r].warningDesc=s.formatStakeWarning(p.ocBetslip.singles[i].warnings[r].warningDesc)),d.push(p.ocBetslip.singles[i].warnings[r]),"quickacca"===n.model.client.betType&&n.model.client.errorsAndWarnings.quickAcca.push(p.ocBetslip.singles[i].warnings[r]));n.model.client.errorsAndWarnings.singles[a]=d,n.model.client.errorsAndWarnings.singleErrorsCount+=d.length}for(i=0,l=p.ocBetslip.multiples.length;l>i;i++)if(null!==p.ocBetslip.multiples[i].warnings){var c=p.ocBetslip.multiples[i].betType,u=[];for(r=0,o=p.ocBetslip.multiples[i].warnings.length;o>r;r++)null!==p.ocBetslip.multiples[i].warnings[r]&&null!==p.ocBetslip.multiples[i].warnings[r].warningCode&&(t=p.ocBetslip.multiples[i].warnings[r].warningCode,g[t]=!0,("P103"===t||"P104"===t)&&(p.ocBetslip.multiples[i].warnings[r].warningDesc=s.formatStakeWarning(p.ocBetslip.multiples[i].warnings[r].warningDesc)),u.push(p.ocBetslip.multiples[i].warnings[r]),"quickacca"===n.model.client.betType&&n.model.client.errorsAndWarnings.quickAcca.push(p.ocBetslip.multiples[i].warnings[r]));n.model.client.errorsAndWarnings.multiples[c]=u,n.model.client.errorsAndWarnings.multipleErrorsCount+=u.length}}"quickacca"===n.model.client.betType&&removeDuplicates(n.model.client.errorsAndWarnings.quickAcca),n.model.client.isDepositWarning=g.P102,n.model.client.isPriceUpdateWarning=g.P100,n.model.client.isSuspendedWarning=g.P101||g.P105,n.model.client.isStakeWarning=g.P103||g.P104},s.formatStakeWarning=function(n){var i,l=e.model.currentBookie.currency;return-1===n.indexOf(l)&&(i=Number(n.replace(/^.*?(\d+\.\d+).*?$/,"$1")).toFixedNumber(2),n=n.replace(/(\d+\.\d+)/,l+i.toFixed(2))),n},s.scrollToError=function(){if("MOBILE"===oc.platform){var e=$activePanel(".v-scroller").attr("id");l(function(){$.ui.scrollingDivs[e].scrollToItem($activePanel(".error-content:not(.ng-hide)"))})}else if("DESKTOP"===oc.platform){var i=0===Object.keys(n.model.client.errorsAndWarnings.singles).length?"multiples":"singles",s="singles"===i?"single-bet-id":"multiple-type";if(Object.keys(n.model.client.errorsAndWarnings[i]).length>0)for(var o in n.model.client.errorsAndWarnings[i])if(void 0!==n.model.client.errorsAndWarnings[i][o])return void("otherBets"===r.model.desktopViews.newChildView?$("["+s+'="'+o+'"]').get(0).scrollIntoView():$(".modal-dialog-inner").animate({scrollTop:"0px"}))}},s}])}();
!function(){"use strict";ocAngularApp.factory("ErrorModel",[function(){var r={};return r.model={bookmakerError:!1,networkError:!1},r}])}();
!function(){"use strict";ocAngularApp.factory("HttpInterceptor",["$q","BetSlipModel","NavModel","QuickAccaModel","AlertFactory","$rootScope","$injector","WarningFactory","ApiBetSlipNavModel",function(e,o,r,t,n,i,a,s,l){var c={};c.silentAjaxFail={};var d=function(e){return"buildbetslip"===e||"checkbetslip"===e||"placebet"===e||"getprice"===e||"getbalance"===e};return c.request=function(t){var n=t.headers.Function,i=d(n);if(-1!==t.url.indexOf(".com/bet")){if(t.headers["App-Type"]="desktop","BF"===r.clientBookie.getCode()&&(t.headers["BF-Token"]=localStorage.BF_Token),t.headers["App-Type"]=oc.appType,t.headers.dataType="json",t.headers.contentType="application/json",t.silentAjaxFail&&(c.silentAjaxFail[t.headers.Function]=t.silentAjaxFail,delete t.silentAjaxFail),i&&(o.model.tempAPI=o.model.API,"oc"!==t.headers.Bookie&&!oc.activeApiBookies[t.headers.Bookie.toUpperCase()]))return e.reject({config:t,reason:"Interceptor has rejected the request because bookie was non-api"});if("buildbetslip"===n||"checkbetslip"===n||"placebet"===n){$.log("****************************************"),$.log("REQUEST: ",t.headers.Function);var a=o.validateModel(t.headers.Function);$.log("REQUEST MODEL: "+a),$.log("****************************************")}}return t},c.response=function(t){if(-1!==t.config.url.indexOf(".com/bet")){var l=a.get("MobileBookieAccountsInterface"),c=t.config.headers.Function,p=d(c),u=t.data.serverResponse,g={handling:{error:!1}};if(("ERROR"===u||"WARNING"===u)&&(p&&(o.model.client.errorsAndWarnings={global:{errors:[],warnings:[]},singles:{},multiples:{},quickAcca:[],singleErrorsCount:0,multipleErrorsCount:0}),"WARNING"===u&&(p&&(s.updateModelWarnings(t),"quickacca"===o.model.client.betType&&(o.model.client.isSuspendedWarning||o.model.client.isPriceUpdateWarning)&&i.$broadcast("NG-EVENT:calculateBookieAccaOddsAfterPriceChange",t.data),s.setBetAPIErrorState(),s.scrollToError()),g.handling.error=!0,$.ui.hideMask()),"ERROR"===u))return p&&(o.model.API=o.model.tempAPI,o.model.client.errorsAndWarnings.global.errors.push(t.data.errorResponse),s.setBetAPIErrorState(),t.data.errorResponse&&"A102"!==t.data.errorResponse.errorCode&&(o.model.API.errorResponse=t.data.errorResponse,o.model.client.isSuspendedWarning=!0)),t.data.errorResponse&&"A102"===t.data.errorResponse.errorCode&&l.logOutFrontEnd(r.clientBookie.getCode()),t.data.errorResponse&&"A101"===t.data.errorResponse.errorCode&&n.alertUserToLoginToMyOC(t.data.errorResponse.errorDescription),t.data.errorResponse&&"P110"===t.data.errorResponse.errorCode&&(o.model.client.buildComplete=!1,o.model.client.isSuspendedWarning=!1),g.handling.error=!0,$.ui.hideMask(),e.reject();if(p&&""===t.data)return e.reject();angular.extend(t,g)}return t},c.responseError=function(o){if(o.config&&-1!==o.config.url.indexOf(".com/bet")){var r=a.get("MobileBookieAccountsInterface"),t=!1;o.config.headers.Function in c.silentAjaxFail&&(t=c.silentAjaxFail[o.config.headers.Function],delete c.silentAjaxFail[o.config.headers.Function]);var i=o.config.timeout.$$state;i&&i.value&&i.value.buildAborted&&"buildbetslip"===o.config.headers.Function&&(t=!0),!t&&o.hasOwnProperty("config")&&(angular.extend(o,n.alertConfig(o)),$.log("Ajax Error in Function: "+o.config.headers.Function),$.log(o),400===o.status?n.alertAsInvalidGeoIp():401===o.status?(r.logOutFrontEnd(o.config.headers.Bookie),o.showLoginOn401&&r.showBookieLogin(o.config.headers.Bookie)):403===o.status?n.alertUserToLoginToMyOC():500===o.status?n.alertWithOptionToGoToBookie(!1,"An error may have occured when placing your bet. Please check your bookmaker account to see if your bet has been confirmed, before proceeding to try again"):o.showBetslipOption?("buildbetslip"===o.config.headers["function"]&&"otherBets"===l.model.desktopViews.newChildView&&l.desktopNavHandler("back"),n.alertWithOptionToGoBetslip(o.goBack,!1,o.overRideMessageText)):n.alertWithFeedbackAndGoBack(o.goBack,!1,o.overRideMessageText))}return e.reject(o)},c}]),ocAngularApp.config(["$httpProvider",function(e){e.interceptors.push("HttpInterceptor")}])}();
!function(){"use strict";ocAngularApp.factory("JavascriptBridgeFactory",["$rootScope","GLOBAL_CONSTANTS",function(e,o){var n={},i={BETSLIP:"BetPopUp",BETBASKET:"BetBasket",BOOKIEACCOUNTS:"BookieAccounts",BOOKIELOGIN:"BookmakerLogin",OCLOGIN:"OddscheckerLogin",OCLOGOUT:"OddscheckerLogout",OCACCOUNT:"OddscheckerAccount",SAFARI:"OpenUrlInSafari",GLOBALS:"sendGlobalConstants"},t=function(e,o){var i={};o=o||"function",i[e]=o,n.connectWebView(function(o){$.log(e+" --> Sending Data To JS Bridge: ",i),o.send(JSON.stringify(i))})};n.connectWebView=function(e){window.WebViewJavascriptBridge?e(WebViewJavascriptBridge):document.addEventListener("WebViewJavascriptBridgeReady",function(){e(WebViewJavascriptBridge)},!1)},n.connectWebView(function(o){o.init(function(e,o){$.log("bridge.init --> got a message",e),o&&$.log("Response call back happened")}),o.registerHandler("updateBasket",function(o){$.log("Received updateBasket via Degree53 App. Data: ",o),e.$broadcast("NG-EVENT:updateBasketFromNativeApp",o)}),o.registerHandler("ocLoginSuccess",function(e){$.log("LOGIN Success via Degree53 App... Reloading page...:  "+oc.mainUrl+oc.urlPath+"... Data: ",e),window.location=oc.mainUrl+oc.urlPath}),o.registerHandler("ocLogout",function(o){$.log("LOGOUT Success via Degree53 App... Data: ",o),e.$broadcast("NG-EVENT:ocLogoutFromNativeApp",o)}),o.registerHandler("showBookieLoginSafari",function(e){$.log("Calling showBookieLoginSafari Data: ",e);var o="myoddschecker/bookie-login?d53=true&nativeApp=true&bk="+e.bookie;oddsTable.getMyOcTokenValues(e.bookie,o,o)}),o.registerHandler("bookieLogOutSafari",function(e){$.log("Calling bookieLogOutSafari Data: ",e);var o="myoddschecker/bookie-logout?d53=true&bk="+e.bookie;oddsTable.getMyOcTokenValues(e.bookie,o,o)}),o.registerHandler("omniture",function(e){$.log("Calling omniture with Data: ",e),"link-click"===e.type?($.log("Firing Tracking link-click with: lid = "+e.lid+" / lpos = "+e.lpos),sky.tracking.featuredContentClickManual(e.lpos,e.lid)):"page"===e.type&&($.log("Firing Tracking PAGE with: section = "+e.section+" / headline = "+e.headline),SKY_TRACKING.section="bet/"+e.section,SKY_TRACKING.headline=e.headline,sky.tracking.pageView(SKY_TRACKING),"undefined"!=typeof ga&&ga("send","pageview",sky.tracking.s.pageName))}),o.registerHandler("openOddsSettings",function(e){$.log("Received openOddsSettings via Degree53 App. Data: ",e),$.ui.loadContent("#setting-panel")})}),e.$on("D53-EVENT:OC_LOGIN",function(){n.ocLogIn()}),e.$on("D53-EVENT:OC_LOGOUT",function(){n.ocLogOut()}),e.$on("D53-EVENT:OC_ACCOUNT",function(){n.showOcAccount()}),e.$on("D53-EVENT:BOOKIE_LOGIN",function(e,o){n.bookieLogIn(o)}),e.$on("D53-EVENT:BUILD_BETSLIP",function(e,o){n.buildBetslip(o)}),e.$on("D53-EVENT:SHOW_BOOKIE_ACCOUNTS_PAGE",function(){n.showBookieAccountsPage()}),e.$on("D53-EVENT:SHOW_BET_BASKET",function(e,o){n.showBetBasket(o)}),e.$on("D53-EVENT:OPEN_URL_IN_SAFARI",function(e,o){n.openUrlInSafari(o)}),n.ocLogIn=function(){t(i.OCLOGIN)},n.ocLogOut=function(){t(i.OCLOGOUT)},n.showOcAccount=function(){t(i.OCACCOUNT)},n.bookieLogIn=function(e){t(i.BOOKIELOGIN,{bookie:e})},n.buildBetslip=function(e){t(i.BETSLIP,e)},n.showBookieAccountsPage=function(){t(i.BOOKIEACCOUNTS)},n.showBetBasket=function(e){t(i.BETBASKET,e)},n.openUrlInSafari=function(e){t(i.SAFARI,{url:e})};var a=function(){t(i.GLOBALS,o)};return oc.degree53JavascriptBridgeOn&&a(),n}])}();
!function(){"use strict";ocAngularApp.factory("CookieFactory",[function(){var e={};return e.setCookie=function(e,o,t,n,i){i=i||!1,n=n||!1;var r=0;t&&(r=new Date((new Date).getTime()+1e3*t).toGMTString()),null===o||""===o&&!i||(n||(o=escape(o)),document.cookie=e+"="+o+"; expires="+r+"; path=/; domain="+oc.cookieDomain)},e.getCookie=function(e){if(document.cookie.length>0){var o=document.cookie.indexOf(e+"=");if(-1!==o){o=o+e.length+1;var t=document.cookie.indexOf(";",o);return-1===t&&(t=document.cookie.length),unescape(document.cookie.substring(o,t))}}return null},e.deleteCookie=function(e,o){var t=new Date;t.setTime(t.getTime()+-864e5);var n="; expires="+t.toGMTString();o=void 0!==o?o:oc.cookieDomain,document.cookie=e+"=''"+n+"; path=/; domain="+o},e.addCookieArray=function(o,t,n,i){var r=e.getCookieArray(o);r||(r=[]),r[t]=n,e.setCookieArray(o,r,i)},e.deleteCookieArray=function(o,t){var n=e.getCookieArray(o);delete n[t],e.setCookieArray(o,n)},e.getCookieArray=function(e){var o,t=document.cookie.indexOf(e+"="),n=t+e.length+1;if(!t&&e!==document.cookie.substring(0,e.length))return null;if(-1===t)return null;var i=document.cookie.indexOf(";",n);-1===i&&(i=document.cookie.length);var r=document.cookie.substring(n,i).split("~"),c={};for(o=0,n=r.length;n>o;o+=2){if(void 0===r[o+1])return null;c[r[o]]=r[o+1]}return c},e.getCookieArraySize=function(e){var o,t=0;for(o in e)e.hasOwnProperty(o)&&t++;return t},e.setCookieArray=function(e,o,t){i="",t||(t=86400);var n=new Date((new Date).getTime()+1e3*t).toGMTString(),i="";for(var r in o)r.length>0&&o[r].length>0&&(i+=r+"~"+o[r]+"~");i=i.substr(0,i.length-1),document.cookie=e+"="+i+"; expires="+n+"; path=/; domain="+oc.cookieDomain},e.setOddsTypeCookie=function(o){o="decimal"===o?"traditional":"decimal",e.setCookie("odds_type",o,31536e3)},e}])}();
!function(){"use strict";ocAngularApp.filter("inAppBookie",function(){return function(n){var i,r=[];for(i in n)n[i].inAppBetting===!0&&r.push(n[i]);return r}}),ocAngularApp.filter("inAppAndLoggedInBookie",function(){return function(n){var i,r=[];for(i in n)n[i].loggedIn===!0&&n[i].inAppBetting===!0&&r.push(n[i]);return r}}),ocAngularApp.filter("inAppAndLoggedOutBookie",function(){return function(n){var i,r=[];for(i in n)n[i].loggedIn===!1&&n[i].inAppBetting===!0&&r.push(n[i]);return r}})}();
!function(){"use strict";ocAngularApp.factory("AccaFactory",["LocalStorageFactory","QuickAccaInterface","GlobalBetSlipFactory","BetSlipModel","NavModel","$timeout","$sce","$rootScope","MobileBookieAccountsInterface","CookieFactory","QuickAccaModel","BookieAccountsModel",function(e,o,t,a,d,l,i,c,s,n,r,m){var u={};u.initVal="INIT",u.model=r.model;return c.$on("NG-EVENT:calculateBookieAccaOddsAfterPriceChange",function(e,o){var t,a;for(t=0;t<o.ocBetslip.singles.length;t++){var d=o.ocBetslip.singles[t],l=r.getBetById(d.betInformation.betId);for(a=0;a<l.odds.length;a++)l.odds[a].bookie===r.model.chosenBookie.bookie&&(l.odds[a].oddsDig=d.currentDecPrice,l.odds[a].oddsTrad=d.currentTradPrice,r.model.chosenBookie.uiOdds[d.betInformation.betId]=u.showOddsType(l.odds))}u.resetTotals(),r.syncModels(),u.calculateBookieAccaOdds(),u.recalcChosenBookie(),u.model.UI.showSelections=!1}),c.$on("NG-EVENT:updateBasketFromNativeApp",function(e,t){switch(t.basketFunction){case"update":u.toggleBetIncludedNativeApp(t.betId,t.marketId);break;case"addOrRemove":o.addOrRemoveQuickAcca(t.betId,t.marketId,t.bestOdds);break;case"delete":u.deleteBet(t.betId);break;case"removeAll":u.removeAllBets()}}),u.showQuickAcca=function(){u.model.UI.showSelections=!u.model.UI.showSelections,a.clearAllErrors(),u.resetQuickAcca(),u.model.UI.showSelections||(a.isEachWayAvailableonMultiple(),t.utils.setBetslipUrlsFromBetslip(),a.model.API.ocBetslip.singles.length>3&&l(function(){u.scrollToQuickAcca()}))},u.initMultiBetSlipData=function(){u.resetTotals(),r.syncModels(),u.calculateBookieAccaOdds(),o.setBetSlipBadgeNumber(),r.model.UI.moreBetPaths=u.checkForEventTypes(),r.model.accaTotalsSorted.length>0&&u.setChosenBookieOnQuickAccaInit(),r.model.quickAcca={stakePerLine:null,betReceipt:null,numberOfLines:1,currentDecPrice:0===r.model.accaTotalsSorted.length?0:r.model.accaTotalsSorted[0].odds},r.buildModel(r.model.chosenBookie.bookie),a.isEachWayAvailableonMultiple()},u.setChosenBookieOnQuickAccaInit=function(){for(var e=[],o=0;o<r.model.accaTotalsSorted.length&&r.model.accaTotalsSorted[o].bestOdds;o++)m.model.bookies[r.model.accaTotalsSorted[o].bookie].inAppBetting&&e.push(r.model.accaTotalsSorted[o].bookie);if(e.length&&void 0===r.model.chosenBookie.bookie){var t=Math.floor(Math.random()*e.length);u.updateChosenBookie(e[t])}else u.updateChosenBookie(r.model.UI.rememberBookie&&void 0!==r.model.chosenBookie.bookie?r.model.chosenBookie.bookie:r.model.accaTotalsSorted[0].bookie);r.model.UI.showQuickAccaAndOtherBets=u.checkForValidOdds()},u.calculateBookieAccaOdds=function(){var e,o,t,a;r.model.numberOfBets=0;for(e in r.model.simpleBetData){if(r.model.simpleBetData[e].included===!0){var d=r.getBetById(e);for(o in d.odds){var l=d.odds[o];"undefined"!=typeof l&&(r.model.accaTotalsXml[l.bookie]=r.model.accaTotalsXml[l.bookie]*l.oddsDig)}}r.model.numberOfBets++}if(r.model.numberOfBets>0){t=0;for(a in r.model.accaTotalsXml)r.model.accaTotalsSorted[t]={bookie:a,odds:r.model.accaTotalsXml[a].toFixedNumber(2),bestOdds:!1},t++;r.model.accaTotalsSorted.sort(function(e,o){var t=m.model.bookies;return o.odds===e.odds?t[o.bookie].inAppBetting===t[e.bookie].inAppBetting?t[o.bookie].loggedIn-t[e.bookie].loggedIn:t[o.bookie].inAppBetting-t[e.bookie].inAppBetting:o.odds-e.odds});var i=r.model.accaTotalsSorted[0].odds;for(o=0;o<r.model.accaTotalsSorted.length&&r.model.accaTotalsSorted[o].odds===i;o++)r.model.accaTotalsSorted[o].bestOdds=!0}},u.resetTotals=function(){var e;for(e in r.model.accaTotalsXml)r.model.accaTotalsXml[e]=1},u.resetQuickAcca=function(){a.clearAllErrors(),m.model.errorReason=null,null!==a.model.API.ocBetslip.betReceipt&&a.model.API.ocBetslip.betReceipt&&(a.model.API.ocBetslip.betReceipt.potentialWinnings=0,a.model.API.ocBetslip.betReceipt.totalBetStake=0),r.model.quickAcca.stakePerLine=""},u.removeAllBets=function(){var e;for(e in r.model.simpleBetData)o.addOrRemoveBetDOM(e,!0);n.deleteCookie("basket"),r.model.chosenBookie.bookie="",r.model.accaTotalsSorted=[],a.model.client.state="",a.model.API.ocBetslip.singles=[],u.initMultiBetSlipData()},u.recalcChosenBookie=function(){var e,o;for(e=0,o=r.model.accaTotalsSorted.length;o>e;e++)r.model.accaTotalsSorted[e].bookie===r.model.chosenBookie.bookie&&(r.model.chosenBookie.odds=r.model.accaTotalsSorted[e].odds,r.model.chosenBookie.position=e+1)},u.updateChosenBookie=function(e){u.resetQuickAcca(),r.model.UI.showSelections=!0,d.clientBookie.setBookie(e),r.buildModel(e);var o,t,a,l;for(o=0,t=r.model.accaTotalsSorted.length;t>o;o++)if(r.model.accaTotalsSorted[o].bookie===e){r.model.chosenBookie.bookie=r.model.accaTotalsSorted[o].bookie,r.model.chosenBookie.odds=r.model.accaTotalsSorted[o].odds,r.model.chosenBookie.position=o+1;for(l in r.model.accaData)a=r.model.accaData[l].betInformation.betId,r.model.simpleBetData[a].included&&(r.model.chosenBookie.uiOdds[a]=u.showOddsType(r.model.accaData[l].odds));break}void 0!==r.model.quickAcca&&(r.model.quickAcca.currentDecPrice=r.model.chosenBookie.odds)},u.formatFirstSecondThird=function(e){e+="";var o=e.substr(e.length-1,1);if(e.length>1&&"1"===e.substr(e.length-2,1))return e+"th";switch(o){case"1":e+="st";break;case"2":e+="nd";break;case"3":e+="rd";break;default:e+="th"}return e},u.setBetSlipBadgeNumber=function(e){var o=e;if(void 0===o){var t=n.getCookieArray("basket");o=0;for(var a in t)o++}0===o?($.query("#bb-num-bets").text(""),$.query("#bb-num-bets").addClass("empty")):($.query("#bb-num-bets").text(o),$.query("#bb-num-bets").removeClass("empty"))},u.buildTweetURL=function(){var e=[],o=n.getCookieArray("basket"),t=0;for(var a in o)t++;for(var d in o){var l=o[d];e.push(d),e.push(l.slice(0,-2))}var i=e.join("*"),c="bet-basket/true/"+i;return c},u.tweetAccumulator=function(){var e,o,t,a,d,l,i=[],c=[];o=r.model.accaTotalsSorted[0].odds.toFixedNumber(2),t=Math.round(o)-1+"/1",10>o&&(t=o),a=oc.desktopUrl+u.buildTweetURL(),i=["@odds","@twitterHandle","@url"],c=[t,oc.text.twitterHandle,a],e=oc.text.tweetAccaShare.replaceArray(i,c),d="http://twitter.com/intent/tweet?text="+encodeURIComponent(e),l=angular.element(document.getElementById("bb-tweet")),l.attr("href",d)},u.getMultiBetUrl=function(e){for(var o="BF"===r.model.accaTotalsSorted[0].bookie?r.model.accaTotalsSorted[1].odds.toFixed(2):r.model.accaTotalsSorted[0].odds.toFixed(2),t=numOnly($activePanel(".multis-li[data-bk="+e+"] .total-odds").text()),a=t>=o?"1":"0",d=!1,l="betslip-api?bk="+e+"&isBestOdds="+a+"&odds="+t+"&bestOddsDecimal="+o+"&multi_ids=",i="&multiOddsHandicaps=",c=!1,s=0,n=r.model.accaData.length;n>s;s++){var m=r.model.accaData[s];if(r.model.simpleBetData[m.betInformation.betId].included===!0&&!u.checkForNoOdds(m.betInformation.betId)){var k="undefined",b="undefined";for(var p in m.odds)m.odds[p].bookie===e&&(k=""===m.odds[p].handicap?"undefined":m.odds[p].handicap,b=""===m.odds[p].oddsDig?"undefined":m.odds[p].oddsDig);"true"===m.isInPlay&&(d=!0),c?(l+="*",i+="*"):c=!0,l+=m.betInformation.betId+"*"+m.betInformation.marketId,i+=b+"*"+encodeURIComponent(k)}}return l+=i,d&&(l+="&inPlay=true"),l},u.checkForEventTypes=function(){var e,o,t,a,d=[];for(o=0,t=r.model.accaData.length;t>o;o++)e=r.model.accaData[o].marketPath.replace("-"," ").split("/"),""!==e[e.length-1]&&d.push({path:r.model.accaData[o].marketPath,eventName:e[e.length-1]});return a=removeDuplicates(d)},u.loadMultiBetslip=function(e,o){return oc.noLinksAllowed?void ocApp.downloadFullAppAlert():(u.resetQuickAcca(),void(m.model.bookies[e].inAppBetting===!1?oddsTable.doBetslipClickFromPopUp():oc.blockiOSclicksAPI&&oc.iosAppAPIClickOutsEnabled?oddsTable.getMyOcTokenValues(d.clientBookie.getCode(),null,o):s.refreshLoginStatus(e).then(function(){$.ui.loadContent(oc.ajaxPageUrlPrefix+o,!1,!1)})["catch"](function(){m.model.multiLoginSuccessUrl=oc.ajaxPageUrlPrefix+o,s.showBookieLogin(e)})))},u.checkForValidOdds=function(){var e=!1;for(var o in r.model.simpleBetData)if(r.model.simpleBetData[o].included===!0&&u.checkForNoOdds(r.model.simpleBetData[o].betId)===!1){e=!0;break}return e},u.scrollToHelp=function(){var e=$activePanel(".v-scroller").attr("id");r.model.UI.showHelpMenu=!0,$.ui.scrollingDivs[e].scrollToItem("#bb-help")},u.scrollToQuickAcca=function(){var e=$activePanel(".v-scroller").attr("id");$.ui.scrollingDivs[e].scrollToItem("#quick-acca-totals")},u.setStore=function(o,t){r.model.simpleBetData[o].included===!0?n.addCookieArray("basket",o,t+"-1"):n.addCookieArray("basket",o,t+"-0"),e.setData("betBasketBets",r.model.simpleBetData),r.model.UI.showQuickAccaAndOtherBets=u.checkForValidOdds(),u.initMultiBetSlipData()},u.toggleBetIncludedNativeApp=function(e,o){r.model.simpleBetData[e].included=!r.model.simpleBetData[e].included,u.setStore(e,o)},u.deleteBet=function(e){var t,a;r.model.numberOfBets>1?(n.deleteCookieArray("basket",e),o.addOrRemoveBetDOM(e,!0),t=r.getBetById(e),a=r.model.accaData.indexOf(t),r.model.accaData.splice(a,1),u.initMultiBetSlipData()):1===r.model.numberOfBets&&u.removeAllBets()},u.checkForNoOdds=function(e){var o,t=r.getBetById(e);for(o in t.odds)if(t.odds[o].bookie===r.model.chosenBookie.bookie)return 1===t.odds[o].oddsDig||""===t.odds[o].oddsTrad?!0:!1},u.showOddsType=function(e){var o,t,a;if(void 0!==e){for(a in e){var d=e[a];d.bookie===r.model.chosenBookie.bookie&&(o=betslip.formatOdds(d.oddsDig,d.oddsTrad),"0/1"===o||"1.00"===o?(o="N/A",t="0"):"SP"===o&&(o="SP",t="1.00"),""!==d.handicap&&(t=o,o="<span>"+d.handicap+"<br>"+o+"</span>"))}return{"private":t,"public":i.trustAsHtml(o)}}},u.scrollToTop=function(){var e=$activePanel(".v-scroller").attr("id");$.ui.scrollingDivs[e].scrollToTop(200)},u}])}();
!function(){"use strict";ocAngularApp.factory("GlobalBetSlipFactory",["BetSlipModel","MobileBookieAccountsInterface","UserSettingsFactory","ErrorFactory","NavModel","OcAuthFactory","GLOBAL_CONSTANTS","BetReceiptFactory","CookieFactory","BookieAccountsModel","QuickAccaModel","$q","$http","$rootScope","$timeout","ApiBetSlipNavModel","AllBookieOddsModel","WarningFactory","$window",function(e,t,i,o,l,n,a,c,s,r,d,p,u,m,B,g,b,k,A){var P={bookieAuth:{},basket:{},userSettings:{},freeBets:{},utils:{},warnings:{},"public":{}};return P.bookieAuth=t,P.userSettings=i,P.placeAllBets=function(){var t=e.model.API.ocBetslip.betUuid;return null!==t&&void 0!==t&&""!==t&&e.model.client.blockPlaceBet===!1?(e.model.client.blockPlaceBet=!0,P.checkBetslipAPI().then(function(){return P.placeBetAPI()}).then(function(){$.ui.hideMask(),P.showBetReceipt()})):p.reject({reason:"Missing betUuid or bet placement currently in progress"})},P.verifyBet=function(){return P.hasEnoughFunds().then(function(){return P.hasStakeEntries()})},P.trackBetslipClick=function(t){var i=e.model.client.betslipUrls?e.model.client.betslipUrls.clickOutBetslip:null;t=t||i,null!==t&&!e.model.client.hasTrackedBetslip&&r.model.bookies[l.clientBookie.getCode()].inAppBetting&&(t+="&type=internal",u.get(t).then(function(t){e.model.client.hasTrackedBetslip=!0,$.log("successfully ajaxed betslip page");var i=t.data.match(/omnitureSrc:\s*\"([^\"]+)\"/);null!==i&&(i=i[1],P.addOmnitureBeacon(i));var o=t.data.match(/id=\"sky-floodlight\"\s*src=\"([^\"]+)\"/);null!==o&&(o=o[1],P.addSkybetFloodlightBeacon(o))},function(){$.log("error on ajaxing betslip page")}))},P.addOmnitureBeacon=function(e){$("#omniture-beacon").remove(),B(function(){var t=$('<img id="omniture-beacon" src="'+e+'" width="1" height="1" frameborder="0" style="display:none">');$("body").append(t)},10)},P.addSkybetFloodlightBeacon=function(e){$("#sky-floodlight").remove(),B(function(){var t=$('<img id="sky-floodlight" src="'+e+'" width="1" height="1" frameborder="0" style="display:none">');$("body").append(t)},10)},P.exchangeGetPrice=function(){$.ui.showMask("Getting Latest Price");var i=JSON.stringify(e.model.API);u({method:"POST",url:oc.betUrl,data:i,timeout:oc.ajaxAPITimeout,headers:{Function:"getprice",Bookie:"bf"}}).then(function(i){i.handling.error||($.log(">>> exchangeGetPrice --> ",i.data),"string"==typeof i.data?(delete localStorage.BF_Token,t.logOutFrontEnd("BF"),e.model.API=e.model.tempAPI):e.model.API=i.data),$.ui.hideMask()},function(){$.ui.hideMask()})},P.buildBetslipAPI=function(t){var i,n=p.defer(),a=p.defer();e.model.API.ocBetslip.multiples=[],e.clearAllErrors(),e.model.client.buildComplete=!1,e.model.client.buildTimeout=!1,e.model.client.state=e.model.STATES.BUILD,u.defaults.headers.common.Function="buildbetslip",u.defaults.headers.common.Bookie=l.clientBookie.getCode().toLowerCase(),i=JSON.stringify(e.model.API),$.log(">>> model.API -->",e.model.API);var c=u({method:"POST",url:oc.betUrl,data:i,timeout:a.promise});return B(function(){e.model.client.buildComplete===!1&&(e.model.client.buildTimeout=!0,P.abortBuildBetslip())},oc.ajaxAPITimeout),c.then(function(t){$.log(">>> buildBetslipAPI --> ",t.data),1===e.model.API.ocBetslip.singles.length&&e.model.API.ocBetslip.singles[0].stakePerLine&&l.model.showSingleBetSlip&&(t.data.ocBetslip.singles[0].stakePerLine=e.model.API.ocBetslip.singles[0].stakePerLine,t.data.ocBetslip.singles[0].betReceipt.totalBetStake=e.model.API.ocBetslip.singles[0].betReceipt.totalBetStake,t.data.ocBetslip.singles[0].betReceipt.potentialWinnings=e.model.API.ocBetslip.singles[0].betReceipt.potentialWinnings),1===e.model.API.ocBetslip.singles.length&&l.model.showSingleBetSlip&&(t.data.ocBetslip.singles[0].isEachWay=e.model.API.ocBetslip.singles[0].isEachWay),t=P.tidyUpBetslipObjectAndSetBetslipModel(t),e.model.client.buildComplete=!0,o.checkErrorAndResolvePromise({fact:"GlobalBetSlipFactory",func:"buildBetslipAPI",bookie:l.clientBookie.getCode(),response:t},n)},function(i){!i||null!==i.data||e.model.client.buildTimeout&&!t||$.log("a build call has been aborted..."),e.model.client.buildComplete=!1,n.reject(!1)}),n.promise.abort=function(){e.model.client.buildComplete=!1,a.resolve({buildAborted:!0})},n.promise["finally"](function(){n.promise.abort=angular.noop,a=c=n.promise=null,delete e.model.buildBetslip_inProgress,e.isEachWayAvailableonMultiple()}),n.promise},P.abortBuildBetslip=function(){return e.model.buildBetslip_inProgress&&e.model.buildBetslip_inProgress.abort()},P.tidyUpBetslipObjectAndSetBetslipModel=function(t){return t.data.ocBetslip&&null===t.data.ocBetslip.betReceipt&&(t.data.ocBetslip.betReceipt=e.model.API.ocBetslip.betReceipt),e.model.API=t.data,e.model.client.isPriceUpdateWarning&&(P.warnings.updateUIOddsAfterPriceUpdateWarning(),P.calculateStakeAndReturns()),t},P.checkBetslipAPI=function(){var t=p.defer();$.ui.showMask(e.model.client.maskText),P.utils.updateNullStakePerLineValuesToZero(),e.model.API.ocBetslip.singles[0].freeBetId&&e.model.API.ocBetslip.singles[0].isEachWay&&(e.model.API.ocBetslip.singles[0].stakePerLine=e.model.API.ocBetslip.singles[0].stakePerLine/2),e.model.tempAPI=e.model.API;var i={Function:"checkbetslip",Bookie:l.clientBookie.getCode().toLowerCase()};return P.utils.httpBasic("checkBetSlipAPI","CHECK","POST",i).then(function(e){P.tidyUpBetslipObjectAndSetBetslipModel(e),o.checkErrorAndResolvePromise({fact:"GlobalBetSlipFactory",func:"checkBetslipAPI",bookie:l.clientBookie.getCode(),response:e},t)},function(){t.reject(!1)}),t.promise},P.placeBetAPI=function(){var t=p.defer();e.model.tempAPI=e.model.API;var i={Function:"placebet",Bookie:l.clientBookie.getCode().toLowerCase()};return P.utils.httpBasic("placeBetAPI","PLACE","POST",i,45e3).then(function(e){P.tidyUpBetslipObjectAndSetBetslipModel(e),o.checkErrorAndResolvePromise({fact:"GlobalBetSlipFactory",func:"placeBetAPI",bookie:l.clientBookie.getCode(),response:e},t)},function(){t.reject(!1)}),t.promise},P.showBetReceipt=function(){if(e.model.client.state=e.model.STATES.DONE,c.shareLinks(),c.getBetReceiptOmnitureUrl(),"MOBILE"===oc.platform){"non-static/bet-basket"===oc.view&&$.ui.loadContent("#quick-acca-receipt-panel");var i=$activePanel(".v-scroller").attr("id");$.ui.scrollingDivs[i].scrollToTop(10),l.model.showSingleBetSlip||($activePanel(".v-scroller").css("padding-top",0),$activePanel(".v-scroller").css("padding-bottom",0))}else"DESKTOP"===oc.platform&&"BF"===l.clientBookie.getCode()&&e.model.API.ocBetslip.ocExchangeBets.hasUnmatchedStake?g.desktopNavHandler("exchangeBetView","betSlip",!1):g.desktopNavHandler(null,"betReceipt");t.getBalance(l.clientBookie.getCode())},P.hasEnoughFunds=function(){var t=p.defer(),i=r.model.bookies[l.clientBookie.getCode()],o=e.model.client.updateBalanceFlag===!0||"LOADING"===i.balance,n="BF"===l.clientBookie.getCode()&&(o||Number(i.balance)>=e.model.API.ocBetslip.ocExchangeBets.totalStake),a="BF"!==l.clientBookie.getCode()&&(o||Number(i.balance)>=Number(e.model.API.ocBetslip.betReceipt.totalBetStake)),c="BF"!==l.clientBookie.getCode()&&null!==e.model.API.ocBetslip.singles[0].freeBetId;return n||a||c?(e.model.client.updateBalanceFlag=!1,t.resolve(!0)):(k.setBetslipClientWarning("P102","Insufficient Funds"),e.model.client.isDepositWarning=!0,t.reject(!1)),t.promise},P.hasStakeEntries=function(){var t=p.defer();return P.utils.modelHasStakeEntries()?t.resolve(!0):(k.setBetslipClientWarning("STAKE","Enter Valid Stake"),e.model.client.isStakeWarning=!0,t.reject(!1)),t.promise},P.calculateStakeAndReturns=function(){var t,i;if(e.model.API.ocBetslip.betReceipt={},e.model.API.ocBetslip.betReceipt.totalBetStake=0,e.model.API.ocBetslip.betReceipt.potentialWinnings=0,"BF"===l.clientBookie.getCode())e.model.API.ocBetslip.ocExchangeBets.potentialReturn=0,P.utils.calculateBetfairStakeAndReturns(),e.model.API.ocBetslip.ocExchangeBets.potentialReturn=!isNaN(e.model.API.ocBetslip.ocExchangeBets.potentialReturn)&&e.model.API.ocBetslip.ocExchangeBets.potentialReturn>0?e.model.API.ocBetslip.ocExchangeBets.potentialReturn.toFixedNumber(2):a.GENERAL_CONSTANTS.ZERO;else{for(t=0,i=e.model.API.ocBetslip.singles.length;i>t;t++)P.utils.calculateStakeAndReturnsPerBet(e.model.API.ocBetslip.singles[t]);if("MOBILE"===oc.platform&&"non-static/bet-basket"!==oc.view||"DESKTOP"===oc.platform&&g.model.desktopViews.multiBetView.otherBets)for(t=0,i=e.model.API.ocBetslip.multiples.length;i>t;t++)P.utils.calculateStakeAndReturnsPerBet(e.model.API.ocBetslip.multiples[t]);null!==d.model.quickAcca.stakePerLine&&("quickacca"===e.model.client.betType&&(e.model.API.ocBetslip.betReceipt.totalBetStake=0,e.model.API.ocBetslip.betReceipt.potentialReturns=0),"MOBILE"===oc.platform&&"non-static/bet-basket"===oc.view?P.utils.calculateStakeAndReturnsPerBet(d.model.quickAcca):"DESKTOP"===oc.platform&&g.model.desktopViews.multiBetView.quickAcca&&P.utils.calculateStakeAndReturnsPerBet(d.model.quickAcca)),e.model.API.ocBetslip.betReceipt.totalBetStake=!isNaN(e.model.API.ocBetslip.betReceipt.totalBetStake)&&e.model.API.ocBetslip.betReceipt.totalBetStake>0?e.model.API.ocBetslip.betReceipt.totalBetStake.toFixedNumber(2):a.GENERAL_CONSTANTS.ZERO,e.model.API.ocBetslip.betReceipt.potentialWinnings=!isNaN(e.model.API.ocBetslip.betReceipt.potentialWinnings)&&e.model.API.ocBetslip.betReceipt.potentialWinnings>0?e.model.API.ocBetslip.betReceipt.potentialWinnings.toFixedNumber(2):a.GENERAL_CONSTANTS.ZERO}},P.warnings.updateUIOddsAfterPriceUpdateWarning=function(){var t,i;for(t=0,i=e.model.API.ocBetslip.singles.length;i>t;t++)e.model.API.ocBetslip.singles[t].uiOdds=betslip.formatOdds(e.model.API.ocBetslip.singles[t].currentDecPrice,e.model.API.ocBetslip.singles[t].currentTradPrice,!1,!0)},P.freeBets.getFreeBetValueFromId=function(t){var i;for(i=0;i<e.model.API.ocBetslip.freeBets.length;i++)if(e.model.API.ocBetslip.freeBets[i].freeBetId===t)return e.model.API.ocBetslip.freeBets[i].value},P.utils.httpBasic=function(t,i,o,l,n){var a;return n=n||oc.ajaxAPITimeout,i=i.toUpperCase(),e.model.client.state=e.model.STATES[i],a=JSON.stringify(e.model.API),$.log(">>> "+t+" --> ",e.model.API),u({method:o,url:oc.betUrl,data:a,headers:l,timeout:n})},P.utils.calculateDecimalOddsForBetfair=function(e){var t,i=e;return"string"==typeof e&&(t=e.split("/"),i=t[0]/t[1]+1,i=i.toFixedNumber(2)),i},P.utils.resetBetslipModels=function(){e.clearAllErrors(),r.model.errorReason=null,e.model.API=e.getApiModel(),e.model.client.hasTrackedBetslip=!1},P.utils.setOddsGridClicksCookie=function(e){var t=s.getCookie("odds_grid_clicks");if(null!==t){var i=t.split("~"),o=i[0],l="";2===i.length?(l=i[1],-1===l.indexOf(e)&&(""!==l&&(l+="-"),l+=e)):l=e,s.setCookie("odds_grid_clicks",o+"~"+l,31536e3,!0,!0)}},P.utils.calculateBetfairStakeAndReturns=function(){var t=e.model.API.ocBetslip.ocExchangeBets;t.potentialReturn=t.totalStake*Number(t.ocExchangeBetInstruction.lastUpdatedPrice),t.ocExchangeBetInstruction.stake=t.totalStake,t.ocExchangeBetInstruction.originalStake=t.totalStake},P.utils.calculateStakeAndReturnsPerBet=function(t){var i,o;null===t.betReceipt&&(t.betReceipt={}),null===t.stakePerLine||isNaN(t.stakePerLine)?t.betReceipt.totalBetStake=t.betReceipt.potentialWinnings=a.GENERAL_CONSTANTS.ZERO:(i=t.isEachWay?2:1,o=t.freeBetId?P.freeBets.getFreeBetValueFromId(t.freeBetId):"",t.betReceipt.totalBetStake=i*t.numberOfLines*t.stakePerLine,e.model.API.ocBetslip.betReceipt.totalBetStake+=t.betReceipt.totalBetStake,t.betReceipt.potentialWinnings=t.stakePerLine*t.currentDecPrice+(1===i||isNaN(t.eachWayDenominator)&&"Single"===t.betType?0:t.stakePerLine*((t.currentDecPrice-1)/t.eachWayDenominator+1)-o),o&&(t.betReceipt.potentialWinnings=(t.betReceipt.potentialWinnings-o)/i,t.betReceipt.totalBetStake=t.betReceipt.totalBetStake/i,e.model.API.ocBetslip.betReceipt.totalBetStake=e.model.API.ocBetslip.betReceipt.totalBetStake/i),isNaN(t.betReceipt.potentialWinnings)||t.priceType===a.GENERAL_CONSTANTS.STARTINGPRICE?(t.betReceipt.potentialWinnings=a.GENERAL_CONSTANTS.ZERO,e.model.API.ocBetslip.betReceipt.potentialWinnings=a.GENERAL_CONSTANTS.ZERO):(t.betReceipt.potentialWinnings=parseFloat(t.betReceipt.potentialWinnings.toFixedNumber(2)),e.model.API.ocBetslip.betReceipt.potentialWinnings+=t.betReceipt.potentialWinnings))},P.utils.modelHasStakeEntries=function(){if("BF"===l.clientBookie.getCode()){if(e.model.API.ocBetslip.ocExchangeBets.totalStake>0||e.model.API.ocBetslip.ocExchangeBets.ocExchangeBetInstruction.remainingStake>0)return!0}else{var t,i;for(t=0,i=e.model.API.ocBetslip.singles.length;i>t;t++)if(e.model.API.ocBetslip.singles[t].stakePerLine>0)return!0;if(d.model.quickAcca.stakePerLine>0)return!0;for(t=0,i=e.model.API.ocBetslip.multiples.length;i>t;t++)if(e.model.API.ocBetslip.multiples[t].stakePerLine>0)return!0}return!1},P.utils.updateNullStakePerLineValuesToZero=function(){var t,i;for(t=0,i=e.model.API.ocBetslip.singles.length;i>t;t++)null===e.model.API.ocBetslip.singles[t].stakePerLine&&(e.model.API.ocBetslip.singles[t].stakePerLine=0);for(t=0,i=e.model.API.ocBetslip.multiples.length;i>t;t++)null===e.model.API.ocBetslip.multiples[t].stakePerLine&&(e.model.API.ocBetslip.multiples[t].stakePerLine=0)},P.utils.setBetslipUrlsFromBetslip=function(t){return t=t||e.model.API.ocBetslip.singles[0]||e.model.API.ocBetslip.ocExchangeBets,void 0===t?void(A.location=oc.mainUrl):P.utils.setBetslipUrls(l.clientBookie.getCode(),t.betInformation.betId,t.betInformation.marketId,t.isInRunning,t.currentTradPrice,t.handicap)},P.utils.setBetslipUrls=function(t,i,o,l,n,a){var c="",s="",r="",d="",p="",u="";void 0!==a&&(a=encodeURIComponent(a)),common.getBetButtonObject(i,t).parents("[data-bid]").find("td.b").each(function(){u+=","+common.getBookieFromButton($(this))}),p=""===oc.cardId?oc.urlPath.substr(1):oc.cardId,c="betslip-api?bk="+t+"&mkid="+o+"&pid="+i+"&inPlay="+l+"&ui-odds="+n+"&ui-hcap="+a+"&type=external",s=oc.mainUrl+"betslip?bk="+t+"&mkid="+o+"&pid="+i+"&cardId="+p+"&bestBookies="+u,r=oc.mainUrl+"betslip?bk="+t+"&mkid="+o,d="bet-link/?mid="+o+"&bid="+i+"&bk="+t+"&type=external",e.model.client.betslipUrls={internalMultiBetslip:c,clickOutBetslip:s,registrationLink:r,internalSingleBetslip:d}},P.utils.setBetSlipUrlsFromMultiBetSlip=function(e,t){var i="",o="",l="false",n="",a="";i=t.betInformation.betId,o=t.betInformation.marketId,l=t.isInPlay;for(var c in t.odds)t.odds[c].bookie===e&&(n=t.odds[c].oddsDig,a=""===t.odds[c].handicap?"undefined":t.odds[c].handicap);return P.utils.setBetslipUrls(e,i,o,l,n,a)},P.utils.isBetslipInRunning=function(){var t,i;for(t=0,i=e.model.API.ocBetslip.singles.length;i>t;t++)if("true"===e.model.API.ocBetslip.singles[t].isInRunning)return!0;return!1},P["public"].betSlipClick=function(i,o){var a,c;a=o?o.bookie:common.getBookieFromButton(i);var c=common.getBetIdFromButton(i),s=void 0!==d.model.simpleBetData[c];return P.abortBuildBetslip(),oc.noLinksAllowed?void ocApp.downloadFullAppAlert():(P.utils.resetBetslipModels(),l.clientBookie.setBookie(a),"MOBILE"===oc.platform?P["public"].buildBetslipModelFromDOM(i,a,c):"DESKTOP"===oc.platform&&(void 0!==o?(e.model.chooseBookieData.betButton=i,e.model.chooseBookieData.ajaxBetData=o,P["public"].buildDesktopBetslipModelFromAjax(o.betData,a,c)):P["public"].buildBetslipModelFromDOM(i,a,c),oc.activeApiBookies[l.clientBookie.getCode()]===!0&&P.calculateStakeAndReturns()),P.utils.setBetslipUrlsFromBetslip(),oc.isLoggedIn||oc.isWebApp||"MOBILE"!==oc.platform||"IT"===oc.lang||"DK"===oc.lang?(P.utils.setOddsGridClicksCookie(a),e.model.client.addOrRemoveQuickAccaText=s?oc.text.removeFromBetBasket:oc.text.addToBetBasket,"BF"!==a||"traditional"!==oc.oddsType||r.model.bookies.BF.loggedIn||oc.activeApiBookies.BF!==!0||(e.model.API.ocBetslip.ocExchangeBets.ocExchangeBetInstruction.lastUpdatedPrice=P.utils.calculateDecimalOddsForBetfair(e.model.API.ocBetslip.ocExchangeBets.ocExchangeBetInstruction.lastUpdatedPrice)),oc.degree53JavascriptBridgeOn&&oc.degree53NativeBetslip?(e.model.client.addOrRemoveBetBasketText=e.model.client.addOrRemoveQuickAccaText,delete e.model.client.addOrRemoveQuickAccaText,m.$emit("D53-EVENT:BUILD_BETSLIP",e.model),e.model.client.addOrRemoveQuickAccaText=e.model.client.addOrRemoveBetBasketText,delete e.model.client.addOrRemoveBetBasketText,void(r.model.bookies[l.clientBookie.getCode()].inAppBetting&&P.trackBetslipClick())):(l.model.hasSignUpShown=!1,l.model.showSingleBetSlip=!0,void(r.model.currentBookie.inAppBettingWithinApp&&("BF"!==a&&t.getBalance(a),void 0!==localStorage.BF_Token&&"BF"===l.clientBookie.getCode()&&(r.model.bookies.BF.loggedIn=!0,r.model.bookies.BF.timeout=(new Date).getTime()+r.model.bookies.BF.maxTimeout,r.setModel()),"BF"===a&&r.model.bookies.BF.loggedIn&&!e.model.client.isOzMarket&&(e.model.client.isBetfairClickout=!1,P.exchangeGetPrice(),B(function(){t.getBalance(a)})))))):void n.loadOcLogInPage(!1,oc.mainUrl+e.model.client.betslipUrls.internalSingleBetslip))},P.handleNonLoggedInBetting=function(){oc.isLoggedIn||(t.updateAssociateAccountsData(),!l.model.showSignUp&&oc.isWebApp&&B(function(){l.model.hasSignUpShown||n.showSignUp(!0)},5e3))},P["public"].buildBetslipModelFromDOM=function(t,i,o){l.clientBookie.setBookie(i);var t,n,c,s,r,d,p,u,m,B,g,b,k,A,P,I,f,h,S,R,E=!1;n=t.parents("[data-bid]"),0===n.length&&(n=t),m=n.parents("[data-mid]"),0===m.length&&(m=n),h=t.attr("data-odig"),S=t.attr("data-o"),S=betslip.formatOdds(h,S,"traditional"),c=betslip.formatOdds(h,S,!1,!0),s=S.split("/"),I=s[0],f=s[0]===a.GENERAL_CONSTANTS.STARTINGPRICE?"":s[1]||"1",P=I===a.GENERAL_CONSTANTS.STARTINGPRICE?a.GENERAL_CONSTANTS.STARTINGPRICE:a.GENERAL_CONSTANTS.LIVEPRICE,A=m.attr("data-cgname");var T=common.getExtraBookieInfoFromGrids(i),v=!1;if("CE"===i&&("true"===t.attr("data-bog")||T&&"true"===T.attr("data-bog")||"true"===$activePanel('.eventTableHeader td[data-bk="'+i+'"]').attr("data-bog"))&&(v=!0),("WH"===i&&"horse racing"===A||"CE"===i&&v)&&(P=a.GENERAL_CONSTANTS.BESTODDSGTD),P===a.GENERAL_CONSTANTS.STARTINGPRICE&&(I=f=a.GENERAL_CONSTANTS.STARTINGPRICE),d=m.attr("data-mid"),r=n.attr("data-bname")||n.find(".bet-name").text(),r=r.replace(/^\s+|\s+$/g,""),p=m.attr("data-mname")||n.attr("data-mname"),u=t.attr("data-sname")||t.parents("[data-sname]").attr("data-sname"),B=$activePanel("#etfEW").length>0?$activePanel("#etfEW").find('[data-bk="'+i+'"]').html().split("<br>"):"",g=t.attr("data-ew-div")||B[1]||"",-1!==g.indexOf("/")&&(g=g.split("/")[1]),b=t.attr("data-ew-places")||B[0]||"",k="true"===(t.attr("data-in-play")||t.parents("[data-in-play]").attr("data-in-play")),(A.toLowerCase().indexOf("horse")>-1||A.toLowerCase().indexOf("greyhound")>-1)&&u.indexOf(":")>-1&&p.toLowerCase().indexOf("winner")>-1&&(E=!0),R={betId:o,betName:r,marketId:d,marketName:p,subeventName:u,eventName:m.attr("data-ename")||"",categoryGroupName:A,bestOdds:numOnly(n.attr("data-best-dig")),bestOddsBookies:n.attr("data-best-bks")},"BF"===i&&oc.activeApiBookies.BF===!0){e.model.client.isOzMarket="true"===m.attr("data-oz-market");var O=t.attr("data-x-selection").split("*"),N=O[0],C=O[1];e.model.API.ocBetslip.ocExchangeBets={warnings:null,potentialReturn:"",totalStake:"",betId:o,exchangeMarketId:C,exchangeSelectionId:N,hasUnmatchedStake:!1,betInformation:R,betReceipt:null,ocExchangeBetInstruction:{lastUpdatedPrice:c,ocExchangeInstruction:null,stake:null,originalStake:null}}}else e.model.API.ocBetslip.singles[0]={priceType:P,currentDecPrice:h,currentTradPrice:S,isInRunning:k,isSPAvailable:E,numberOfLines:1,uiOdds:c,uiHandicap:n.attr("data-hcap"),oddsType:oc.oddsType,numPrice:I,denPrice:f,betInformation:R,handicap:n.attr("data-hcap"),eachWayDenominator:g||null,eachWayPlaces:b||null,warnings:null,betReceipt:{totalBetStake:0,potentialWinnings:0}},e.model.API.ocBetslip.singles[0].initialPriceType=e.model.API.ocBetslip.singles[0].priceType},P["public"].buildDesktopBetslipModelFromAjax=function(t,i){if($.log(t),"BF"===i){var o={betId:t.betInformation.betId,betInformation:t.betInformation,ocExchangeBetInstruction:{lastUpdatedPrice:t.currentDecPrice}};angular.extend(e.model.API.ocBetslip.ocExchangeBets,o)}else{var l=b.getBookiefromArray(i,t.odds);angular.extend(t,l),angular.extend(t,{numberOfLines:1,oddsType:oc.oddsType,warnings:null,betReceipt:{},uiOdds:"traditional"===oc.oddsType?t.currentTradPrice:t.currentDecPrice}),e.model.API.ocBetslip.singles[0]=t}b.setModel(t.odds),$.ui.hideMask()},P["public"].getBetDataFromAjax=function(e,t){var i=p.defer();return u({method:"GET",url:"betinformation/"+e}).then(function(e){if(void 0!==e.data){for(var o=e.data.odds,l=[],n=o.length-1;n>0&&("BF"!==o[n].bookie&&"MA"!==o[n].bookie&&"BD"!==o[n].bookie||(l.push(o[n]),o.splice(n,1),3!==l.length));n--);o.sort(function(e,t){var i=r.model.bookies;return t.currentDecPrice===e.currentDecPrice?i[t.bookie].inAppBetting===i[e.bookie].inAppBetting?i[t.bookie].loggedIn-i[e.bookie].loggedIn:i[t.bookie].inAppBetting-i[e.bookie].inAppBetting:t.currentDecPrice-e.currentDecPrice}),l.sort(function(e,t){return t.odds-e.odds}),o=o.concat(l),e.data.odds=o,t=null===t?o[0].bookie:t,i.resolve({betData:e.data,bookie:t})}else i.reject("No data available")},function(e){i.reject(e)}),i.promise},P}])}();
!function(){"use strict";ocAngularApp.factory("GeneralBetSlipFactory",["GlobalBetSlipFactory","BetSlipModel","NavModel","OcAuthFactory","BookieAccountsModel","$timeout","$rootScope","MobileBookieAccountsInterface",function(e,t,o,n,l,i,a,c){var s={};return s.userSettings=e.userSettings,s.warnings=e.warnings,s.betPlacedSuccess=function(){return t.model.client.state===t.model.STATES.DONE},s.calculateStakeAndReturns=function(){e.calculateStakeAndReturns()},s.closeBetslip=function(l,s){"BF"===l&&s===!0||!t.model.client.showCloseButton||(o.model.showSingleBetSlip=!1,o.model.showEducation||t.model.client.showManageOptions||e.trackBetslipClick(),o.model.showEducation&&(o.model.showEducation=!1,a.$broadcast("NG-EVENT:resetMobileEducationCarousel")),t.model.client.showManageOptions&&(i(function(){t.model.client.showManageOptionsOnly=!1,t.model.client.showManageOptions=!1,t.model.client.manageButtonText="MANAGE"},250),t.model.client.showManageOptionsOnly&&t.model.client.updateBalanceFlag&&c.getBalance(o.clientBookie.getCode()),t.model.client.updateBalanceFlag=!1),oc.isLoggedIn||t.model.client.state!==t.model.STATES.DONE||o.model.hasSignUpShown||n.showSignUp(!0))},s.showOddsType=function(e,t){return void 0!==e?(t=t||!1,"SP"===e.priceType&&t?"SP":betslip.formatOdds(e.currentDecPrice,e.currentTradPrice)):void 0},s.isSamsung=function(){return oc.isSamsung?"tel":"number"},s.setBetslipUrlsFromBetslip=function(){e.utils.setBetslipUrlsFromBetslip()},s.setBetSlipUrlsFromMultiBetSlip=function(t,o){e.utils.setBetSlipUrlsFromMultiBetSlip(t,o)},s.trackBetslipClick=function(){e.trackBetslipClick()},s.toggleShowManageOptions=function(){"multi"===t.model.client.mode?(t.model.client.showManageOptions=!0,t.model.client.showManageOptionsOnly=!0,o.model.showSingleBetSlip=!0):(t.model.client.showManageOptions=!t.model.client.showManageOptions,t.model.client.showManageOptionsOnly=!1,t.model.client.manageButtonText=t.model.client.showManageOptions?"BETSLIP":"MANAGE"),t.model.client.updateBalanceFlag&&(c.getBalance(o.clientBookie.getCode()),t.model.client.updateBalanceFlag=!1)},s}])}();
!function(){"use strict";ocAngularApp.factory("SingleBetSlipFactory",["GlobalBetSlipFactory","BetSlipModel","NavModel","$http","$q","$timeout","$rootScope","CookieFactory","BookieAccountsModel","MobileBookieAccountsInterface","ApiBetSlipNavModel",function(e,t,i,l,o,n,c,a,s,B,d){var u={utils:{},nav:{},userSettings:{}};return u.model=t.model,c.$watch(function(){return d.model.desktopViews.singleBetView.active},function(e){e===!0&&s.model.currentBookie.loggedIn?u.initSingleBetslip():e||(d.model.desktopViews.singleBetView.singleBetToPopulate=0)}),c.$on("NG-EVENT:initSingleBetSlip",function(){u.initSingleBetslip()}),u.initSingleBetslip=function(){t.model.buildBetslip_inProgress=e.buildBetslipAPI(!0)},u.placeSingleBetClickOut=function(){var t=i.clientBookie.getCode();e.userSettings.setUserBookiesFromAnyPage(t,!1,!0),"DESKTOP"===oc.platform?"BF"===t&&s.model.bookies.BF.inAppBetting?(d.desktopNavHandler("exchangeBetView",null,!0),betSlip.handleSingleBetClickout()):(d.desktopNavHandler("singleBetView",null,!0),betSlip.handleSingleBetClickout()):oddsTable.doBetslipClickFromPopUp(),i.model.showSingleBetSlip=!1},u.placeSingleBetNative=function(){oddsTable.getMyOcTokenValues(i.clientBookie.getCode(),u.model.client.betslipUrls.clickOutBetslip,u.model.client.betslipUrls.internalMultiBetslip),i.model.showSingleBetSlip=!1},u.placeSingleBetInApp=function(){t.model.client.blockPlaceBet||(u.model.client.maskText=e.utils.isBetslipInRunning()?"Placing In Play Bet(s). Extra time delay may occur.":"Placing Bet"+(i.model.showSingleBetSlip?"":"(s)"),$.ui.showMask(u.model.client.maskText),e.abortBuildBetslip(),e.trackBetslipClick(),B.refreshLoginStatus(i.clientBookie.getCode()).then(function(){return e.verifyBet()}).then(function(){return u.model.client.buildComplete===!1?t.model.buildBetslip_inProgress=e.buildBetslipAPI(!1):void 0}).then(function(){return e.placeAllBets()}).then(function(){e.handleNonLoggedInBetting(),$.ui.hideMask(),t.model.client.blockPlaceBet=!1})["catch"](function(){t.model.client.blockPlaceBet=!1,$.ui.hideMask()}))},u.getFreeBetValueFromId=function(t){return e.freeBets.getFreeBetValueFromId(t)},u.getBookiefromArray=function(e,t){for(var i=0;i<t.length;i++)if(t[i].bookie===e)return t[i]},u.updateChosenSingleBetSlipBookie=function(i){t.model.client.buildComplete=!1,t.model.chooseBookieData.ajaxBetData.bookie=i,"BF"===i&&oc.hasAPIBookies?d.desktopNavHandler("exchangeBetView","betSlip",!1):d.desktopNavHandler("singleBetView","betSlip",!1),e["public"].betSlipClick(t.model.chooseBookieData.betButton,t.model.chooseBookieData.ajaxBetData)},u}])}();
!function(){"use strict";ocAngularApp.factory("MultiBetSlipFactory",["GlobalBetSlipFactory","ExchangeBetSlipFactory","BetSlipModel","NavModel","GLOBAL_CONSTANTS","$timeout","OcAuthFactory","$rootScope","QuickAccaModel","$q","MobileBookieAccountsInterface","BookieAccountsModel","ApiBetSlipNavModel","WarningFactory",function(e,l,o,i,t,c,s,n,a,d,u,r,m,p){var B={utils:{}};return B.model=o.model,n.$on("NG-EVENT:buildMultiBetslip",function(){B.buildMultiBetslip()}),B.placeMultiBetClickout=function(){var e=a.model.chosenBookie.bookie,l=e+"betslip",o=B.utils.getMultiBetClickoutUrl(),i="BS"!==e&&"EE"!==e&&"B3"!==e;"MOBILE"===oc.platform?oddsTable.doBetslipClickFromPopUp(!1,oc.mainUrl+o):(popup.show(o,l,oc.defaultPopupWidth,oc.defaultPopupHeight,0,0,i),m.desktopNavHandler("multiBetView","quickAcca",!0))},B.utils.getMultiBetClickoutUrl=function(){var e="",l="",o="",i=a.model.chosenBookie.bookie,t=a.model.chosenBookie.odds.toFixed(2),c=1===a.model.chosenBookie.position?"1":"0",s=a.model.accaTotalsSorted[0].odds.toFixed(2),n=!1;for(var d in a.model.simpleBetData)a.model.simpleBetData[d].included===!0&&(e+=a.model.simpleBetData[d].betId+"*"+a.model.simpleBetData[d].marketId+"*");for(var u in a.model.accaTotalsSorted){if(n&&a.model.accaTotalsSorted[u].odds!==n)break;o+=a.model.accaTotalsSorted[u].bookie+",",n=a.model.accaTotalsSorted[u].odds}return l="betslip/?bk="+i+"&odds="+encodeURIComponent(t)+"&multi_ids="+e+"&isBestOdds="+c+"&bestOddsDecimal="+encodeURIComponent(s)+"&bestBookies="+o+"&cardId=multiples"},B.placeMultiBet=function(){o.model.client.blockPlaceBet||(B.model.client.maskText=e.utils.isBetslipInRunning()?"Placing In Play Bet(s). Extra time delay may occur.":"Placing Bet"+(i.model.showSingleBetSlip?"":"(s)"),$.ui.showMask(B.model.client.maskText),e.abortBuildBetslip(),o.clearAllErrors(),u.refreshLoginStatus(i.clientBookie.getCode()).then(function(){return e.verifyBet()}).then(function(){return B.model.client.buildComplete===!1?o.model.buildBetslip_inProgress=e.buildBetslipAPI(!1):void 0}).then(function(){return a.model.quickAcca.stakePerLine>0?B.utils.inferIntendedAccumulator():void 0}).then(function(){return e.placeAllBets()}).then(function(){e.handleNonLoggedInBetting(),$.ui.hideMask(),o.model.client.blockPlaceBet=!1})["catch"](function(){o.model.client.blockPlaceBet=!1,o.isEachWayAvailableonMultiple(),$.ui.hideMask()}))},B.trackBetslipClick=function(l){e.trackBetslipClick(l)},B.toggleMultiBetSlipDesktop=function(){var e=m.model.desktopViews.multiBetView.active?!0:!1;if(e&&o.model.API.ocBetslip.singles.length>0){var l=B.utils.getMultiBetClickoutUrl();B.trackBetslipClick(oc.mainUrl+l)}else o.model.client.hasTrackedBetslip=!1;m.desktopNavHandler("multiBetView","quickAcca",e)},B.addOmnitureBeacon=function(l){e.addOmnitureBeacon(l)},B.buildMultiBetslip=function(){return $.ui.showMask("Building Betslip"),oc.isLoggedIn||oc.isWebApp||"MOBILE"!==oc.platform?(e.utils.setBetslipUrlsFromBetslip(),void u.refreshLoginStatus(i.clientBookie.getCode()).then(function(){o.model.buildBetslip_inProgress=e.buildBetslipAPI(!1),o.model.buildBetslip_inProgress.then(function(){B.utils.multiBuildBetslipSuccess(),$.ui.hideMask()})})["catch"](function(){oc.blockiOSclicksAPI&&oc.iosAppAPIClickOutsEnabled&&(r.model.multiLoginSuccessUrl=oc.mainUrl+oc.urlFullRefresh,r.model.multiLoginSuccessUrlFullRefresh=!0)})):void s.loadOcLogInPage()},B.buildBetfairBetslip=function(){return oc.isLoggedIn||oc.isWebApp?void u.refreshLoginStatus("BF").then(function(){i.clientBookie.setBookie("BF"),i.model.showSingleBetSlip=!0,o.model.client.isBetfairClickout=!0;var e=o.model.API.ocBetslip.ocExchangeBets.exchangeMarketId.split("*");o.model.API.ocBetslip.ocExchangeBets.exchangeSelectionId=e[0],o.model.API.ocBetslip.ocExchangeBets.exchangeMarketId=e[1],u.getBalance(i.clientBookie.getCode()),l.exchangeGetPrice()})["catch"](function(){oc.blockiOSclicksAPI&&oc.iosAppAPIClickOutsEnabled&&(r.model.multiLoginSuccessUrl=oc.mainUrl+oc.urlFullRefresh,r.model.multiLoginSuccessUrlFullRefresh=!0)}):void s.loadOcLogInPage()},B.utils.inferIntendedAccumulator=function(){var e,l=d.defer();if(B.model.API.ocBetslip.multiples.length>0){for(e=0;e<B.model.API.ocBetslip.multiples.length;e++)if(1===B.model.API.ocBetslip.multiples[e].numberOfLines)return B.model.API.ocBetslip.multiples[e].stakePerLine=a.model.quickAcca.stakePerLine,B.model.API.ocBetslip.multiples[e].isEachWay=a.model.quickAcca.isEachWay,l.resolve(),l.promise}else if(1===B.model.API.ocBetslip.singles.length)return B.model.API.ocBetslip.singles[0].stakePerLine=a.model.quickAcca.stakePerLine,B.model.API.ocBetslip.singles[0].isEachWay=a.model.quickAcca.isEachWay,l.resolve(),l.promise;for(var e=0;e<o.model.API.ocBetslip.singles.length;e++)if(o.model.API.ocBetslip.singles[e].isInRunning)return p.setBetslipClientWarning("A1000","Invalid Accumulator: One or more of your selections is currently in play and may have temporarily been suspended without warning, Please try again."),l.reject(),l.promise;return"CE"===i.clientBookie.getCode()&&B.model.API.ocBetslip.singles.length>9?p.setBetslipClientWarning("A1500","Invalid Accumulator: Coral only allows up to 9-fold accumulators. Please remove "+(B.model.API.ocBetslip.singles.length-9)+" bet(s)."):p.setBetslipClientWarning("A1000","Invalid Accumulator: Your selections are either not supported by this bookmaker or have since been suspended."),l.reject(),l.promise},B.utils.multiBuildBetslipSuccess=function(){oc.isSamsung&&!$.os.chrome&&$activePanel(".v-scroller").css("overflow-y","scroll"),i.model.hasSignUpShown=!1,o.isEachWayAvailableonMultiple(),"CE"!==i.clientBookie.getCode()?u.setBalance(i.clientBookie.getCode(),o.model.API.ocCustomerWallet.currency,o.model.API.ocCustomerWallet.balance):u.getBalance(i.clientBookie.getCode())},B.showBetDescription=function(e){var l='<div class="header2-text">'+e+'</div><div class="info-text">'+t.BET_DESCRIPTIONS[e]+"</div>";$("body").popup({title:"Bet Details",message:l,cancelText:"Close",cancelOnly:!0})},B.setModelApi=function(){o.model.API.ocBetslip=oc.betslipObject,o.model.API.ocBetslip.betReceipt={},i.clientBookie.setBookie(oc.betslipObject.bookie)},B}])}();
!function(){"use strict";ocAngularApp.factory("QuickAccaInterface",["CookieFactory","LocalStorageFactory","QuickAccaModel","BetSlipModel","BookieAccountsModel","NavModel","$q","$timeout",function(e,t,o,a,d,i,c,s){var l,n={utils:{}},r=null;return n.addOrRemoveQuickAcca=function(e,t,o,a){n.utils.addOrRemoveQuickAcca(e,t,o,a).then(function(e){"DESKTOP"===oc.platform?n.utils.desktopAddOrRemoveQuickAccaCallback(e):n.utils.mobileAddOrRemoveQuickAccaCallback(e)})},n.utils.addOrRemoveQuickAcca=function(e,t,s,l){var n,r=c.defer();return"BF"!==i.clientBookie.getCode()||!d.model.bookies[i.clientBookie.getCode()].inAppBetting||void 0!==e&&void 0!==t?(void 0===e||void 0===t)&&(e=a.model.API.ocBetslip.singles[0].betInformation.betId,t=a.model.API.ocBetslip.singles[0].betInformation.marketId,s=a.model.API.ocBetslip.singles[0].betInformation.bestOdds):(e=a.model.API.ocBetslip.ocExchangeBets.betInformation.betId,t=a.model.API.ocBetslip.ocExchangeBets.betInformation.marketId,s=a.model.API.ocBetslip.ocExchangeBets.betInformation.bestOdds),void 0===l&&(l=i.clientBookie.getCode()),void 0===o.model.simpleBetData[e]?(o.model.simpleBetData[e]={betId:e,marketId:t,included:!0,bestOdds:s},n="ADD"):n="REMOVE",r.resolve({instruction:n,betId:e,marketId:t,bookie:l}),i.model.showSingleBetSlip=!1,r.promise},n.utils.mobileAddOrRemoveQuickAccaCallback=function(a){"ADD"===a.instruction?(n.addOrRemoveBetDOM(a.betId),e.addCookieArray("basket",a.betId,a.marketId+"-1"),n.addOrRemoveQuickAccaAnimation(!1,a.betId,a.bookie)):(delete o.model.simpleBetData[a.betId],n.addOrRemoveBetDOM(a.betId,!0),e.deleteCookieArray("basket",a.betId),n.addOrRemoveQuickAccaAnimation(!0)),t.setData("betBasketBets",o.model.simpleBetData),n.triggerAccaReturnsFooter(),n.calculateBestAccaReturns()},n.utils.desktopaddOrRemoveQuickAccaCallback=function(a){i.model.showBetAddedAlert=!0,null!==r&&s.cancel(r),r=s(function(){i.model.showBetAddedAlert=!1},5e3),"ADD"===a.instruction?(e.addCookieArray("basket",a.betId,a.marketId+"-1"),n.addOrRemoveBetDOM(a.betId)):(delete o.model.simpleBetData[a.betId],e.deleteCookieArray("basket",a.betId),n.addOrRemoveBetDOM(a.betId,!0)),t.setData("betBasketBets",o.model.simpleBetData),n.setBetSlipBadgeNumber(),n.calculateBestAccaReturns()},n.addOrRemoveBetDOM=function(e,t){if("DESKTOP"===oc.platform){var o=$("[data-bid='"+e+"']").find(".add-to-bet-basket");t?o.removeClass("selected"):o.addClass("selected")}else{var a=$.query("[data-bid='"+e+"']");t?a.removeClass("btn-sel"):a.addClass("btn-sel")}},n.desktopAddOrRemoveQuickAccaAnimation=function(e,t){var o=$(".multi-slip-icon");if(e)setTimeout(function(){o.effect("bounce",{times:2},200)},1e3);else{var a=$("[data-bid='"+t+"']").find(".add-to-bet-basket");if($("#data-include-treble-stake-returns").length>0)return;if(a){var d=a.clone().offset({top:a.offset().top,left:a.offset().left}).css({opacity:"1",position:"absolute",height:"19px",width:"25px","z-index":"999"}).appendTo($("body")).animate({top:o.offset().top,left:o.offset().left,width:"auto",height:"auto"},1e3,"easeInOutExpo");setTimeout(function(){o.effect("bounce",{times:2},200)},1500),d.animate({width:0,height:0},function(){$(this).detach()})}}},n.addOrRemoveQuickAccaAnimation=function(e,t,o){if(e)n.setBetSlipBadgeNumber();else{var a;a="coupon"!==o&&void 0!==o?common.getOddsCellByIdAndBookie(t,o):common.getOddsCellFromButton($activePanel('[data-bid="'+t+'"]'));var d=$('<span class="data-o animate-basket">'+a.text()+"</span>");s(function(){$.query("#afui").append(d);var e=a.offset().top,t=a.offset().left;d.css("top",e+"px"),d.css("left",t+"px");var o=$.query("#bb-link-btn").offset(),i=d[0],c=o.left-t,l=o.top-e;i.style[$.feat.cssPrefix+"Transform"]="translate3d("+c+"px, "+l+"px, 0)",s(function(){d.remove(),n.setBetSlipBadgeNumber()},700)},100)}},n.setBetSlipBadgeNumber=function(t){var o,a=t;if(void 0===a){var d=e.getCookieArray("basket");a=0;for(var i in d)a++}if("MOBILE"===oc.platform?o=$.query("#bb-num-bets"):"DESKTOP"===oc.platform&&(o=$(".num-of-bets")),0===a)o.text(""),o.addClass("empty");else{var c=function(){o.text(a),o.removeClass("empty")};"MOBILE"===oc.platform?s(c,1e3):c()}},n.calculateBestAccaReturns=function(){o.syncModels();var e=-1,t=1;for(var a in o.model.simpleBetData)if(o.model.simpleBetData[a].included===!0){e++;var d=o.model.simpleBetData[a].bestOdds;"number"==typeof d&&9999!==d&&(t*=d)}var c=-1===e?0:e,n=t*Math.pow(.97,c);1===t?(s.cancel(l),i.model.accaFooter.showHide=!1,i.model.accaFooter.returns=0):i.model.accaFooter.returns="DESKTOP"===oc.platform?n.toFixedNumber(2):(10*n).toFixedNumber(2)},n.triggerAccaReturnsFooter=function(){i.model.accaFooter.showHide=!0,s.cancel(l),l=s(function(){i.model.accaFooter.showHide=!1},5e3)},n}])}();
!function(){ocAngularApp.factory("ExchangeBetSlipFactory",["GlobalBetSlipFactory","ErrorFactory","BetSlipModel","$http","$q","$timeout","OcAuthFactory","NavModel","MobileBookieAccountsInterface","BookieAccountsModel","$rootScope","WarningFactory",function(e,t,o,n,c,i,a,l,r,u,h,s){var d={utils:{}};return d.model=o.model,h.$on("NG-EVENT:betfairExchangeLoginSuccess",function(){e.exchangeGetPrice()}),d.exchangeGetPrice=function(){e.exchangeGetPrice()},d.placeExchangeBetInApp=function(t){d.model.client.cancelTimer=!1,e.trackBetslipClick(),r.refreshLoginStatus(l.clientBookie.getCode()).then(function(){d.exchangeCheckMinimumStake(2,t).then(function(){return d.exchangePlaceBetAPI(t)}).then(function(){$.ui.hideMask()}).then(function(){e.showBetReceipt(),null!==d.model.API.ocBetslip.ocExchangeBets.betReceipt&&(r.getBalance(l.clientBookie.getCode()),i(function(){oc.isLoggedIn||l.model.showSignUp||l.model.hasSignUpShown||!oc.isWebApp||a.showSignUp(!0)},5e3)),d.model.client.cancelTimer=!0})["catch"](function(){$.ui.hideMask()})})["catch"](function(){})},d.exchangeCheckMinimumStake=function(e,t){var o=c.defer();return"PLACE"===t?Number(d.model.API.ocBetslip.ocExchangeBets.totalStake)>=e?o.resolve(!0):(s.setBetslipClientWarning("P103","Minimum Stake: "+u.model.currentBookie.currency+e.toFixed(2)),d.model.client.isStakeWarning=!0,o.reject(!1)):o.resolve(!0),o.promise},d.exchangePartialMatchTimer=function(){function e(){return n--,d.model.client.cancelTimer?-1===n?(d.model.client.partialCountdown="00:30",n=30,c=0,d.placeExchangeBetInApp("CANCEL"),void(d.model.client.showCloseButton=!0)):(d.model.client.partialCountdown=(c?c>9?c:"0"+c:"00")+":"+(n>9?n:"0"+n),void t()):(d.model.client.partialCountdown="00:30",n=30,c=0,void(d.model.client.showCloseButton=!0))}function t(){o=i(e,1e3)}d.model.client.showCloseButton=!1,d.model.client.partialCountdown="00:30";var o,n=30,c=0;t()},d.exchangePlaceBetAPI=function(e){var t=c.defer();$.ui.showMask("CANCEL"===e?"Cancelling Partial Match":"Placing Exchange Bet"),d.model.tempAPI=d.model.API,d.model.client.state=d.model.STATES.PLACE,d.model.API.ocBetslip.ocExchangeBets.ocExchangeBetInstruction.ocExchangeInstruction=e?e:"PLACE",$.log("EXCHANGE INSTRUCTION "+d.model.API.ocBetslip.ocExchangeBets.ocExchangeBetInstruction.ocExchangeInstruction);var o=JSON.stringify(d.model.API);return n({method:"POST",url:oc.betUrl,data:o,timeout:oc.ajaxAPITimeout,headers:{timeout:"45000",Function:"placebet",Bookie:"bf"}}).then(function(o){$.log(">>> exchangePlaceBet -->",o.data),d.model.API=o.data,d.model.API.ocBetslip.ocExchangeBets.ocExchangeBetInstruction.ocExchangeInstruction="UPDATE",d.model.API.ocBetslip.ocExchangeBets.hasUnmatchedStake&&null===d.model.API.ocBetslip.ocExchangeBets.betReceipt&&d.exchangePartialMatchTimer(),t.resolve({fact:"BetslipFactory",func:"exchangePlaceBet",bookie:l.clientBookie.getCode(),response:o},t),"CANCEL"===e&&$.ui.hideMask()})["catch"](function(){t.reject(!1)}),t.promise},d}])}();
!function(){"use strict";ocAngularApp.directive("ocModalBetSlip",function(){return{restrict:"E",scope:{show:"="},transclude:!0,controller:"BetSlipModalController",controllerAs:"BetSlipModalController",bindToController:!0,templateUrl:"non-static/betting/bet-slips/templates/modal-bet-slip-template.html"}})}();
!function(){"use strict";ocAngularApp.directive("ocPopupMultiBetSlip",function(){return{restrict:"E",scope:{show:"=",betSlipLoading:"=loading"},transclude:!0,controller:"MultiBetSlipController",controllerAs:"MultiBetSlipController",bindToController:!0,templateUrl:"non-static/betting/bet-slips/templates/popup-multi-bet-slip-template.html"}})}();
!function(){"use strict";ocAngularApp.directive("ocSingleBetSlip",function(){return{restrict:"E",transclude:!0,scope:{mode:"@",betIndex:"@",showHide:"="},controller:"SingleBetSlipController",controllerAs:"SingleBetSlipController",bindToController:!0,templateUrl:"non-static/betting/bet-slips/templates/single-bet-slip-template.html"}})}();
!function(){"use strict";ocAngularApp.directive("betSlipHelpArea",function(){return{restrict:"E",scope:!0,controller:"HelpBetSlipController",controllerAs:"HelpBetSlipController",bindToController:!0,templateUrl:"non-static/betting/bet-slips/templates/help-bet-slip-template.html"}})}();
!function(){"use strict";ocAngularApp.directive("ocGamblingCompliance",[function(){return{restrict:"E",scope:!0,controller:"GamblingComplianceController",controllerAs:"GamblingComplianceController",bindToController:!0,templateUrl:"non-static/betting/bet-slips/templates/gambling-compliance-template.html"}}])}();
!function(){"use strict";ocAngularApp.directive("ocMultipleBetOptions",[function(){return{restrict:"E",replace:!1,templateUrl:"non-static/betting/bet-slips/templates/multiple-bet-options-template.html"}}])}();
!function(){"use strict";ocAngularApp.directive("ocQuickAccaBetSlip",[function(){return{restrict:"E",scope:!0,replace:!1,templateUrl:"non-static/betting/bet-slips/templates/quick-acca-bet-slip-template.html",controllerAs:"QuickAccaBetSlipController",controller:"QuickAccaBetSlipController",bindToController:!0}}])}();
!function(){"use strict";ocAngularApp.directive("ocBookieArea",[function(){return{restrict:"E",replace:!1,scope:{mode:"@"},controller:"BookieAreaController",controllerAs:"BookieAreaController",bindToController:!0,templateUrl:"non-static/betting/bet-slips/templates/bookie-area-template.html"}}])}();
!function(){ocAngularApp.directive("ocExchangeBet",[function(){return{restrict:"E",replace:!1,scope:{mode:"@",showHide:"="},controller:"SingleBetSlipController",controllerAs:"SingleBetSlipController",bindToController:!0,templateUrl:"non-static/betting/bet-types/templates/exchange-bet-template.html"}}])}();
!function(){"use strict";ocAngularApp.directive("ocErrorArea",[function(){return{restrict:"E",replace:!1,scope:{useCase:"@",multipleType:"@",singleBetId:"@"},controller:"ErrorAreaController",controllerAs:"ErrorAreaController",bindToController:!0,templateUrl:"non-static/betting/bet-slips/templates/error-area-template.html"}}])}();
!function(){"use strict";ocAngularApp.controller("BetSlipModalController",["GeneralBetSlipFactory","BookieAccountsModel","BetSlipModel","ErrorModel","$timeout","$scope","GlobalBetSlipFactory","SingleBetSlipFactory","ApiBetSlipNavModel","NavModel","AllBookieOddsModel",function(e,o,l,t,i,n,s,c,d,a,r){var p=this;p.bookieAccounts=o.model,p.betSlip=l.model,p.nav=d.model,p.clientBookie=a.clientBookie,p.odds=r.model,p.baseUrl=oc.mainUrlSsl,p.closeModal=function(){e.trackBetslipClick(),$.ui.hideMask(),p.show=!1,i(function(){d.desktopNavHandler("singleBetView",null,!0),s.utils.resetBetslipModels(),a.clientBookie.setBookie(),r.setModel({})},350),t.model.bookmakerError=!1,t.model.networkError=!1,d.model.desktopViews.singleClickOutConfirmation=!1,d.model.desktopViews.multipleClickOutConfirmation=!1},p.closeModalFromOutSide=function(){var e=null!==navigator.userAgent.match(/iPad/i);if(!e&&-1===navigator.platform.indexOf("iPhone"))if("BF"===a.clientBookie.getCode())if(!p.betSlip.API.ocBetslip.ocExchangeBets.betReceipt&&p.betSlip.API.ocBetslip.ocExchangeBets.allMatchedBets){if(p.betSlip.API.ocBetslip.ocExchangeBets.allMatchedBets.length>0&&p.betSlip.API.ocBetslip.ocExchangeBets.hasUnmatchedStake)return;p.closeModal()}else p.closeModal();else p.closeModal()},p.betPlacedSuccess=function(){return e.betPlacedSuccess()},p.headerText=function(){return d.headerText()},p.updateChosenSingleBetSlipBookie=function(e){c.updateChosenSingleBetSlipBookie(e)},p.showOddsType=function(o,l){return e.showOddsType(o,l)},p.showHelp=function(){d.desktopNavHandler("singleBetView",null,!0),d.desktopNavHandler("betSlipHelpView","singleBetView"),d.model.desktopViews.betSlipHelpView.currentHelpMessage=d.returnHelpText("header")},p.oddsType=oc.oddsType,p.repub=oc.repub}])}();
!function(){"use strict";ocAngularApp.controller("SingleBetSlipController",["SingleBetSlipFactory","GeneralBetSlipFactory","GLOBAL_CONSTANTS","BetSlipModel","QuickAccaInterface","NavModel","$scope","$timeout","MobileBookieAccountsInterface","BookieAccountsModel","ErrorFactory","MainFactory","ApiBetSlipNavModel","AllBookieOddsModel","ExchangeBetSlipFactory","WarningFactory","$http","CookieFactory",function(e,o,t,i,l,n,c,s,a,r,d,p,k,u,B,g,m,A){var I=this;I.model=i.model,I.mode="standard",I.error=d.model,I.isClickedOut=!1,I.odds=u.model,I.bookieAccounts=r.model,I.nav=k.model,I.STATES=i.model.STATES,I.CONSTANTS=t,I.clientBookie=n.clientBookie,c.$on("NG-EVENT:forceBetslipApply",function(){s(function(){c.$apply(function(){})})}),angular.extend(I,{betPlacedSuccess:function(){return o.betPlacedSuccess()},addOrRemoveBasket:function(e,o,t){l.utils.addOrRemoveQuickAcca(e,o,t).then(function(e){l.utils.desktopaddOrRemoveQuickAccaCallback(e)}),k.desktopNavHandler("singleBetView","betSlip",!0)},calculateStakeAndReturns:function(){o.calculateStakeAndReturns()},deposit:function(){a.deposit(n.clientBookie.getCode())},closeBetslip:function(e,t){o.closeBetslip(e,t)},showOddsType:function(e,t){return o.showOddsType(e,t)},stakeToEqualFreeBet:function(t){i.model.API.ocBetslip.singles[0].stakePerLine=e.getFreeBetValueFromId(t),o.calculateStakeAndReturns()},isSamsung:function(){return o.isSamsung()}}),I.placeSingleBet=function(t){if($.log(I.model.API.ocBetslip.singles),$.log(I.betIndex),I.model.API.ocBetslip.singles[I.betIndex].stakePerLine===I.bookieAccounts.currentBookie.balance&&t!==!0)return d.clearClientErrors(),i.clearAllErrors(),void(I.isAllIn=!0);I.isAllIn=!1,i.model.client.betType="single",d.clearClientErrors(),i.clearAllErrors();var l=r.model.bookies[n.clientBookie.getCode()];return l.loggedIn===!1&&l.inAppBetting?(a.showBookieLogin(n.clientBookie.getCode()),void p.handleLoginView(n.clientBookie.getCode())):(o.setBetslipUrlsFromBetslip(),void(l.inAppBetting===!1?e.placeSingleBetClickOut(!0):e.placeSingleBetInApp()))},I.clickoutBet=function(o){var t=0===oc.showClickoutConfirmation.promoBookies.length?"SK,CE":oc.showClickoutConfirmation.promoBookies;if(oc.showClickoutConfirmation.validUser)if(o)"back"===o?k.model.desktopViews.singleClickOutConfirmation=!1:(k.model.desktopViews.singleClickOutConfirmation=!1,e.placeSingleBetClickOut());else{var i=A.getCookie("betslip-clickout-optin")?Number(A.getCookie("betslip-clickout-optin").split("~")[0]):0;2>i&&-1!==t.indexOf(n.clientBookie.getCode())?(k.model.desktopViews.singleClickOutConfirmation=!0,A.setCookie("betslip-clickout-optin",i+1+"~"+oc.showClickoutConfirmation.promoId,604800,!0)):e.placeSingleBetClickOut()}else e.placeSingleBetClickOut()},I.changeStake=function(e){if(I.model.API.ocBetslip.singles.length>0){if(I.model.API.ocBetslip.singles[I.betIndex].stakePerLine===I.bookieAccounts.currentBookie.balance)return;I.model.API.ocBetslip.singles[I.betIndex].stakePerLine||(I.model.API.ocBetslip.singles[I.betIndex].stakePerLine=0),$.log(I.model.API.ocBetslip.singles[I.betIndex].stakePerLine),I.model.API.ocBetslip.singles[I.betIndex].stakePerLine+=e}else{if(I.model.API.ocBetslip.ocExchangeBets.totalStake===I.bookieAccounts.currentBookie.balance)return;I.model.API.ocBetslip.ocExchangeBets.totalStake||(I.model.API.ocBetslip.ocExchangeBets.totalStake=0),I.model.API.ocBetslip.ocExchangeBets.totalStake+=e}I.calculateStakeAndReturns()},I.allIn=function(){I.model.API.ocBetslip.singles.length>0?I.model.API.ocBetslip.singles[I.betIndex].stakePerLine===I.bookieAccounts.currentBookie.balance?(I.model.API.ocBetslip.singles[I.betIndex].stakePerLine=0,I.isAllIn=!1):I.model.API.ocBetslip.singles[I.betIndex].stakePerLine=I.bookieAccounts.currentBookie.balance:I.model.API.ocBetslip.ocExchangeBets.totalStake===I.bookieAccounts.currentBookie.balance?(I.model.API.ocBetslip.ocExchangeBets.totalStake=0,I.isAllIn=!1):I.model.API.ocBetslip.ocExchangeBets.totalStake=I.bookieAccounts.currentBookie.balance,I.calculateStakeAndReturns()},I.placeExchangeSingleBet=function(e,t){if(I.model.API.ocBetslip.ocExchangeBets.totalStake===I.bookieAccounts.currentBookie.balance&&t!==!0)return d.clearClientErrors(),i.clearAllErrors(),void(I.isAllIn=!0);I.isAllIn=!1,i.model.client.betType="single";var l=r.model.bookies[n.clientBookie.getCode()];return"PLACE"===e&&(i.clearAllErrors(),o.setBetslipUrlsFromBetslip()),l.loggedIn===!1&&l.inAppBetting?(a.showBookieLogin(n.clientBookie.getCode()),void p.handleLoginView(n.clientBookie.getCode())):void(oc.blockiOSclicksAPI&&oc.iosAppAPIClickOutsEnabled&&!i.model.client.isBetfairClickout?(o.userSettings.setUserBookiesFromAnyPage(n.clientBookie.getCode(),!1,!0),oddsTable.getMyOcTokenValues(n.clientBookie.getCode(),i.model.client.betslipUrls.clickOutBetslip,i.model.client.betslipUrls.internalMultiBetslip)):B.placeExchangeBetInApp(e))},I.promoOptIn=function(){$.ui.showMask("Opting In"),I.optInLoading=!0,$.log(oc.showClickoutConfirmation.promoId);var e={promotion_key:oc.showClickoutConfirmation.promoId};e=encodeURI(Object.keys(e).map(function(o){return o+"="+e[o]})),k.model.desktopViews.optInComplete=!1,I.userMessage="",I.errorState=!1;var o="MOBILE"===oc.platform?oc.mainUrl:oc.mainUrlSsl;$.log(o+"promotions/ajax-opt-in-anon"),m({method:"POST",url:o+"promotions/ajax-opt-in-anon",data:e,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){$.log(e),"user already opted in"===e.data.status?k.model.desktopViews.alreadyOptedIn=!0:"success"===e.data.status&&(k.model.desktopViews.optInComplete=!0),A.setCookie("betslip-clickout-optin","2~"+oc.showClickoutConfirmation.promoId,3600,!0)})["finally"](function(){I.clickoutBet("back"),$.ui.hideMask(),s(function(){k.model.desktopViews.optInComplete=!1,k.model.desktopViews.alreadyOptedIn=!1},2500)})},I.alreadyOptedIn=!1}])}();
!function(){"use strict";ocAngularApp.controller("MultiBetSlipController",["AccaFactory","$timeout","$scope","$rootScope","BookieAccountsModel","BetSlipModel","MultiBetSlipFactory","GeneralBetSlipFactory","NavModel","GLOBAL_CONSTANTS","$window","ErrorModel","QuickAccaModel","MobileBookieAccountsInterface","MainFactory","ApiBetSlipNavModel",function(e,t,o,l,i,c,n,r,u,a,d,p,s,B,S,m){var k=this;k.accaModel=s.model,k.betSlipModel=c.model,k.bookieAccounts=i.model,k.STATES=c.model.STATES,k.CONSTANTS=a,k.nav=m.model,k.error=p.model,k.clientBookie=u.clientBookie,k.baseUrl=oc.mainUrlSsl,k.removeAllBets=function(){e.removeAllBets()},k.tweetAccumulator=function(){e.tweetAccumulator()},k.backToBetSlip=function(){m.desktopNavHandler("back")},k.placeMultiBet=function(){c.model.client.betType="multiple",n.placeMultiBet()},k.updateChosenBookie=function(t){s.model.UI.rememberBookie=!0,c.clearAllErrors(),e.updateChosenBookie(t),c.isEachWayAvailableonMultiple(),s.model.UI.showQuickAccaAndOtherBets=e.checkForValidOdds(),i.model.bookies[u.clientBookie.getCode()].loggedIn===!0&&B.getBalance(u.clientBookie.getCode())},k.betPlacedSuccess=function(){return r.betPlacedSuccess()},k.calculateStakeAndReturns=function(){r.calculateStakeAndReturns()},k.isSamsung=function(){return r.isSamsung()},k.toggleMultiBetSlip=function(){n.toggleMultiBetSlipDesktop(),m.model.desktopViews.multiBetView.currentHelpMessage=m.emptyBetSlipText(0)},k.headerText=function(){return m.headerText()},k.showHelp=function(){k.toggleMultiBetSlip(),m.desktopNavHandler("betSlipHelpView","multiBetView"),m.model.desktopViews.betSlipHelpView.currentHelpMessage=m.returnHelpText("header")},k.emptyBetSlipText=function(e){m.model.desktopViews.multiBetView.currentHelpMessage=m.emptyBetSlipText(e)},k.repub=oc.repub,$(document).trigger("MultiBetSlipControllerLoaded")}])}();
!function(){"use strict";ocAngularApp.controller("QuickAccaBetSlipController",["AccaFactory","MultiBetSlipFactory","GeneralBetSlipFactory","BetSlipModel","NavModel","BookieAccountsModel","QuickAccaModel","$scope","MobileBookieAccountsInterface","$timeout","ErrorModel","GLOBAL_CONSTANTS","CookieFactory","MainFactory","ApiBetSlipNavModel","WarningFactory",function(e,o,t,i,c,l,n,a,u,r,d,k,s,B,m){var p=this;p.accaModel=n.model,p.betSlipModel=i.model,p.bookieAccounts=l.model,p.STATES=i.model.STATES,p.error=d.model,p.CONSTANTS=k,p.clientBookie=c.clientBookie,p.nav=m.model,p.setStore=function(o,t){e.setStore(o,t),n.buildModel(c.clientBookie.getCode())},p.deleteBet=function(o){e.deleteBet(o)},p.singleBet=function(o){e.resetQuickAcca();s.getCookieArray("basket");i.model.client.addOrRemoveQuickAccaText=oc.text.removeFromBetBasket,m.model.desktopViews.singleBetView.singleBetToPopulate=o,m.desktopNavHandler("singleBetView","betSlip")},p.placeQuickAcca=function(){if(i.model.client.betType="quickacca",i.model.client.buildComplete=!1,l.model.currentBookie.inAppBetting){if(l.model.bookies[c.clientBookie.getCode()].loggedIn===!1)return B.handleLoginView(c.clientBookie.getCode()),void u.showBookieLogin(c.clientBookie.getCode());var e=o.utils.getMultiBetClickoutUrl();o.trackBetslipClick(oc.mainUrl+e),o.placeMultiBet()}else p.placeMultiBetClickout(!0)},p.placeMultiBetClickout=function(e){oc.showClickoutConfirmation.validUser?e?"back"===e?m.model.desktopViews.multipleClickOutConfirmation=!1:(m.model.desktopViews.multipleClickOutConfirmation=!1,o.placeMultiBetClickout()):m.model.desktopViews.multipleClickOutConfirmation=!0:o.placeMultiBetClickout()},p.calculateStakeAndReturns=function(){t.calculateStakeAndReturns()},p.isSamsung=function(){return t.isSamsung()},p.showOddsType=function(e,o){return t.showOddsType(e,o)},p.formatFirstSecondThird=function(o){return e.formatFirstSecondThird(o)},p.quickBetMulti=function(){var o=e.getMultiBetUrl(n.model.chosenBookie.bookie);e.loadMultiBetslip(n.model.chosenBookie.bookie,o)},p.scrollToHelp=function(){e.scrollToHelp()},p.login=function(){"SK"===c.clientBookie.getCode()?m.desktopNavHandler("multiBetView","quickAcca",!0):m.desktopNavHandler("multiBetView","bookieLogin"),u.showBookieLogin(c.clientBookie.getCode())},p.betPlacedSuccess=function(){return t.betPlacedSuccess()},p.register=function(){u.register(c.clientBookie.getCode())},p.removeAllBets=function(){e.removeAllBets()},p.buildOtherBetOptions=function(){return i.model.client.betType=null,l.model.bookies[c.clientBookie.getCode()].loggedIn?(m.desktopNavHandler("multiBetView","otherBets"),t.calculateStakeAndReturns(),void r(function(){e.resetQuickAcca(),o.buildMultiBetslip()},20)):(B.handleLoginView(c.clientBookie.getCode()),void u.showBookieLogin(c.clientBookie.getCode()))},p.changeStake=function(e){(p.accaModel.quickAcca.stakePerLine!==p.bookieAccounts.currentBookie.balance||""===p.bookieAccounts.currentBookie.balance)&&(""===p.bookieAccounts.currentBookie.balance&&(p.accaModel.quickAcca.stakePerLine=0),p.accaModel.quickAcca.stakePerLine=Number(p.accaModel.quickAcca.stakePerLine)+e,p.calculateStakeAndReturns())},p.allIn=function(){p.accaModel.quickAcca.stakePerLine===p.bookieAccounts.currentBookie.balance?(p.accaModel.quickAcca.stakePerLine=0,p.calculateStakeAndReturns()):(p.accaModel.quickAcca.stakePerLine=p.bookieAccounts.currentBookie.balance,p.calculateStakeAndReturns())},p.toggleHide=function(e){p.accaModel.simpleBetData[e.betId].included=!p.accaModel.simpleBetData[e.betId].included,p.setStore(e.betId,e.marketId)}}])}();
!function(){"use strict";ocAngularApp.controller("HelpBetSlipController",["ApiBetSlipNavModel",function(e){var l=this;l.nav=e.model,l.toggleHelp=function(){var l=e.model.desktopViews.betSlipHelpView.active?!0:!1,i=e.model.desktopViews.oldChildView;e.desktopNavHandler("betSlipHelpView",i,l)},l.backToBetSlip=function(){l.toggleHelp(),"multiBetView"===e.model.desktopViews.oldChildView?e.desktopNavHandler("multiBetView","quickAcca"):e.desktopNavHandler("singleBetView","betSlip")},l.returnHelpText=function(l){e.model.desktopViews.betSlipHelpView.currentHelpMessage=e.returnHelpText(l)},l.helpMessages=function(){return e.model.desktopViews.betSlipHelpView.multiBetView?e.model.desktopViews.betSlipHelpView.multiMessages:e.model.desktopViews.betSlipHelpView.singleMessages}}])}();
!function(){"use strict";ocAngularApp.controller("BookieAreaController",["BetSlipModel","BookieAccountsModel","NavModel","GeneralBetSlipFactory","GLOBAL_CONSTANTS","MobileBookieAccountsInterface","ApiBetSlipNavModel",function(e,o,i,t,n,l,c){var a=this;a.model=e.model,a.bookieAccounts=o.model,a.CONSTANTS=n,a.nav=c.model,a.clientBookie=i.clientBookie,a.loadBookieStatus=function(){l.loadBookieStatus()},a.login=function(){l.showBookieLogin(i.clientBookie.getCode())},a.showLogin=function(){var e;e=c.model.desktopViews.singleBetView.active?"singleBetView":c.model.desktopViews.exchangeBetView.active?"exchangeBetView":"multiBetView";var o="multiBetView"===e?"quickAcca":"betSlip";"SK"===i.clientBookie.getCode()?c.desktopNavHandler(e,o,!0):c.desktopNavHandler(e,"bookieLogin"),l.showBookieLogin(i.clientBookie.getCode())},a.betPlacedSuccess=function(){return t.betPlacedSuccess()},a.register=function(){l.register(i.clientBookie.getCode())},a.logout=function(){l.logout(i.clientBookie.getCode())},a.deposit=function(o){var t;t=c.model.desktopViews.singleBetView.active?"singleBetView":c.model.desktopViews.exchangeBetView.active?"exchangeBetView":"multiBetView";var n="multiBetView"===t?"quickAcca":"betSlip";"SK"===i.clientBookie.getCode()&&c.desktopNavHandler(t,n,!0),e.model.client.updateBalanceFlag=!0,l.deposit(o)},a.bookieLogout=function(e){l.logout(e)},a.getBalance=function(e){l.getBalance(e)}}])}();
!function(){"use strict";ocAngularApp.controller("GamblingComplianceController",["BetSlipModel","BookieAccountsModel","GeneralBetSlipFactory","GLOBAL_CONSTANTS","NavModel",function(e,o,c,l,t){var n=this;n.model=e.model,n.bookieAccounts=o.model,n.CONSTANTS=l,n.clientBookie=t.clientBookie,n.betPlacedSuccess=function(){return c.betPlacedSuccess()}}])}();
!function(){"use strict";ocAngularApp.controller("ErrorAreaController",["BetSlipModel","NavModel",function(o,e){var l=this;l.model=o.model,l.clientBookie=e.clientBookie}])}();
!function(){"use strict";ocAngularApp.factory("BetSlipModel",["CookieFactory","$timeout","$q",function(){var e={};return e.getApiModel=function(){return{errorResponse:null,ocBetslip:{isMultiEachWayAvail:!1,betReceipt:{totalBetStake:0,potentialWinnings:0},singles:[],multiples:[],ocExchangeBets:{warnings:null,allMatchedBets:[],betInformation:{},betReceipt:null,ocExchangeBetInstruction:{},totalMatchedStake:{},hasUnmatchedStake:!1},warning:{warningCode:null}}}},e.clearAllErrors=function(){var t,l;if(null!==e.model.API.ocBetslip)if("BF"===e.model.client.bookie&&oc.activeApiBookies.BF===!0)e.model.API.ocBetslip.ocExchangeBets.warnings=null;else{for(t=0,l=e.model.API.ocBetslip.singles.length;l>t;t++)e.model.API.ocBetslip.singles[t].warnings=null;for(t=0,l=e.model.API.ocBetslip.multiples.length;l>t;t++)e.model.API.ocBetslip.multiples[t].warnings=null}e.model.API.serverResponse=null,e.model.API.ocBetslip.warning=null,e.model.API.errorResponse=null,e.model.client.state="",e.model.client.isDepositWarning=!1,e.model.client.isPriceUpdateWarning=!1,e.model.client.isSuspendedWarning=!1,e.model.client.isStakeWarning=!1,e.model.client.errorsAndWarnings={global:{errors:[],warnings:[]},singles:{},multiples:{},quickAcca:[],singleErrorsCount:0,multipleErrorsCount:0},e.model.warningCodes={}},e.isEachWayAvailableonMultiple=function(){if("ERROR"!==e.model.API.serverResponse){for(var t=e.model.API.ocBetslip.singles,l=0;l<t.length;l++)if(""===t[l].eachWayTerm||""===t[l].eachWayPlaces)return void(e.model.API.ocBetslip.isMultiEachWayAvail=!1);e.model.API.ocBetslip.isMultiEachWayAvail=!0}},e.validateModel=function(t){function l(e,t){for(var i in t)if(null!==e){if(t.hasOwnProperty(i)&&!e.hasOwnProperty(i))c.push(r+"~"+i);else if("object"==typeof t[i]){var s=Number(i);r=isNaN(s)&&-1===r.indexOf("~")?i:r+"~"+i,l(e[i],t[i])}}else c.push(r+"~"+i);var n=r.split("~");if(n.length>2){if(-1!==r.indexOf("~")){var o=r.lastIndexOf("~");r=r.slice(0,o-r.length)}}else if(2!==n.length||isNaN(n[1]))r="";else{var o=r.lastIndexOf("~");r=r.slice(0,o-r.length)}}var i={ocBetslip:{betReceipt:{totalBetStake:0,potentialWinnings:0},singles:[],multiples:[]}},s={currentDecPrice:"2.63",currentTradPrice:"13/8",numberOfLines:1,betInformation:{betId:16030998515,betName:"Minding",marketId:"2544640565",marketName:"Winner",subeventName:"Newmarket 15:10",eventName:"Newmarket",categoryGroupName:"horse racing",bestOdds:2.63,bestOddsBookies:"WA"},eachWayDenominator:"5",eachWayPlaces:"3",betReceipt:{totalBetStake:.3,potentialWinnings:.79}},n={numberOfLines:1,stakePerLine:.01,isEachWay:!1,betType:"Double",maxStake:"500.00",minStake:"0.01",currentDecPrice:"18.69",betReceipt:null,betNo:"3"};"buildbetslip"===t&&"betslip-api"===oc.urlPath&&(i.ocBetslip.betReceipt={},delete i.ocBetslip.ocExchangeBets,s.betReceipt={}),!e.model.client.buildComplete||"checkbetslip"!==t&&"placebet"!==t||(i.ocBetslip.betUuid="",s.stakePerLine=0,(null===e.model.API.ocBetslip.ocExchangeBets||null===e.model.API.ocBetslip.ocExchangeBets.totalStake)&&(i.ocBetslip.ocExchangeBets=null));var o=e.model.API;if(null!==o.ocBetslip){if(o.ocBetslip.hasOwnProperty("singles")&&o.ocBetslip.singles instanceof Array)for(var a=0;a<o.ocBetslip.singles.length;a++)i.ocBetslip.singles.push(s);else delete i.ocBetslip.singles,delete o.ocBetslip.singles;if(o.ocBetslip.hasOwnProperty("multiples")&&o.ocBetslip.multiples instanceof Array)for(var a=0;a<o.ocBetslip.multiples.length;a++)null!==o.ocBetslip.multiples[a].stakePerLine&&o.ocBetslip.multiples[a].stakePerLine>0&&"quickacca"!==e.model.client.betType&&(n.betReceipt={totalBetStake:0,potentialWinnings:0}),i.ocBetslip.multiples.push(n);else delete i.ocBetslip.multiples,delete o.ocBetslip.multiples;var c=[],r="";return l(o,i),0===c.length?"PASSED":($.log("BETSLIP IS MISSING: "+c),"FAILED")}},e.model={STATES:{ERROR:"error",BUILD:"buildbetslip",CHECK:"checkbetslip",PLACE:"placebet",DONE:"placebet-done"},API:e.getApiModel(),tempAPI:{},chooseBookieData:{},client:{bookie:null,addOrRemoveQuickAccaText:oc.text.addToBetBasket,betText:oc.text.bet,clickoutBetText:oc.text.clickoutBetText,closeText:oc.text.close,signUpText:oc.text.signUp,state:"",blockPlaceBet:!1,errorsAndWarnings:{global:{errors:[],warnings:[]},singles:{},multiples:{},quickAcca:[]},hasTrackedBetslip:!1,isBetfairClickout:!1,showCloseButton:!0,showManageOptions:!1,manageButtonText:"MANAGE",defaultStakes:{singles:[1,5,10,20],multiples:[1,2,5,10],exchange:[2,5,10,20]}},shareLinks:{},warningCodes:{}},e}])}();
!function(){"use strict";ocAngularApp.factory("QuickAccaModel",["LocalStorageFactory","CookieFactory","BetSlipModel",function(e,t,a){var d={};return d.model={quickAcca:{stakePerLine:null,isEachWay:!1,isEachWayAvailOnMulti:!1,warnings:[]},accaData:[],accaTotalsXml:[],accaTotalsSorted:[],betSlipData:[],simpleBetData:e.getData("betBasketBets"),chosenBookie:{uiOdds:{}},numberOfBets:0,UI:{moreBetPaths:[],showQuickAccaAndOtherBets:!1,showHelpMenu:!0,showMenu:!1,showSelections:!0},translations:{MORE:oc.text.more,CLICK_INDIVIDUAL_ODDS:oc.text.clickIndividualOdds,BEST_ODDS:oc.text.bestOdds,SELECT:oc.text.select,QUICK_BET:oc.text.QUICK_BET}},d.buildModel=function(e){if(a.model.client.state!==a.model.STATES.ERROR){a.model.API.ocBetslip.singles=[];var t,o,l,i,s,c;for(i=0;i<d.model.accaData.length;i++)for(s=0;s<d.model.accaData[i].odds.length;s++)if(d.model.accaData[i].odds[s].bookie===e&&(o=d.model.accaData[i].betInformation.betId,t=d.model.accaData[i].odds[s],"1"!==t.oddsDig&&""!==t.oddsTrad||"1"===t.oddsDig&&"SP"===t.oddsTrad))for(c=0;c<d.model.betSlipData.length;c++)d.model.betSlipData[c].betInformation.betId===o&&d.model.simpleBetData[o].included&&(d.model.betSlipData[c].currentDecPrice=t.oddsDig,d.model.betSlipData[c].currentTradPrice=t.oddsTrad,"SP"===t.oddsTrad?(d.model.betSlipData[c].currentDecPrice="0",d.model.betSlipData[c].priceType="SP",d.model.betSlipData[c].numPrice="",d.model.betSlipData[c].denPrice="",d.model.betSlipData[c].uiOdds="SP"):(l=t.oddsTrad.split("/"),d.model.betSlipData[c].numPrice=l[0],d.model.betSlipData[c].denPrice=void 0===l[1]?"1":l[1],d.model.betSlipData[c].uiOdds="decimal"===d.model.betSlipData[c].oddsType?t.oddsDig:t.oddsTrad),a.model.API.ocBetslip.singles.push(d.model.betSlipData[c]))}},d.syncModels=function(){var a;a=t.getCookieArray("basket"),d.model.simpleBetData=e.getData("betBasketBets");var o,l,i;void 0===d.model.simpleBetData&&(d.model.simpleBetData={}),null===a&&(a={});for(l in d.model.simpleBetData)a.hasOwnProperty(l)===!1&&delete d.model.simpleBetData[l];for(i in a){if(o=d.getBetById(i),void 0===o)break;var s=Boolean(Number(a[i].split("-")[1]));void 0===d.model.simpleBetData[i]?d.model.simpleBetData[i]={betId:i,marketId:o.betInformation.marketId,included:s,bestOdds:o.betInformation.bestOdds}:d.model.simpleBetData[i].included=s}e.setData("betBasketBets",d.model.simpleBetData)},d.getBetById=function(e){for(var t in d.model.accaData)if(d.model.accaData[t].betInformation.betId===e.toString())return d.model.accaData[t]},d}])}();
!function(){"use strict";ocAngularApp.factory("AllBookieOddsModel",["$rootScope",function(){var o={};return o.model={},o.setModel=function(e){o.model.allBookieOdds=e},o.getBookiefromArray=function(o,e){for(var r=0;r<e.length;r++)if(e[r].bookie===o)return e[r]},o}])}();
!function(){"use strict";ocAngularApp.controller("MultipleBetController",["MultiBetSlipFactory","BetSlipModel","GeneralBetSlipFactory","GLOBAL_CONSTANTS","BookieAccountsModel",function(t,e,n,o,l){var c=this;c.model=e.model,c.CONSTANTS=o,c.bookieAccounts=l.model,angular.extend(c,{calculateStakeAndReturns:function(){return n.calculateStakeAndReturns()},showBetDescription:function(e){t.showBetDescription(e)},isSamsung:function(){return n.isSamsung()}})}])}();
!function(){"use strict";ocAngularApp.controller("SingleBetController",["BetSlipModel","BookieAccountsModel","SingleBetSlipFactory","GeneralBetSlipFactory","GLOBAL_CONSTANTS",function(e,t,n,o,c){var l=this;l.model=e.model,l.bookieAccounts=t.model,l.CONSTANTS=c,l.stakeToEqualFreeBet=function(t){e.model.API.ocBetslip.singles[0].stakePerLine=n.getFreeBetValueFromId(t),o.calculateStakeAndReturns()},l.showOddsType=function(e,t){return o.showOddsType(e,t)},l.betPlacedSuccess=function(){return o.betPlacedSuccess()},l.calculateStakeAndReturns=function(){o.calculateStakeAndReturns()},l.isSamsung=function(){return o.isSamsung()}}])}();
!function(){"use strict";ocAngularApp.directive("ocSingleBet",function(){return{restrict:"E",replace:!1,transclude:!0,scope:{mode:"@",betIndex:"@",showHide:"="},controller:"SingleBetController",controllerAs:"SingleBetController",bindToController:!0,templateUrl:function(){return"non-static/betting/bet-types/templates/single-bet-template.html"}}})}();
!function(){"use strict";ocAngularApp.directive("ocMultipleBet",[function(){return{replace:!1,restrict:"E",controller:"MultipleBetController",controllerAs:"MultipleBetController",bindToController:!0,templateUrl:"non-static/betting/bet-types/templates/multiple-bet-template.html"}}])}();
!function(){"use strict";ocAngularApp.controller("BetReceiptController",["BetSlipModel","BookieAccountsModel","GeneralBetSlipFactory","AccaFactory","GLOBAL_CONSTANTS","$scope","$timeout","ApiBetSlipNavModel","NavModel",function(e,o,t,c,n,i,r,l,s){var u=this;u.model=e.model,u.bookieAccounts=o.model,u.CONSTANTS=n,u.clientBookie=s.clientBookie,i.$watch(function(){return oc.isLoggedIn},function(){u.isOcLoggedin=oc.isLoggedIn}),u.showOddsType=function(e,o){return t.showOddsType(e,o)},u.backToBetSlip=function(){c.resetQuickAcca(),l.desktopNavHandler("back")},u.betPlacedSuccess=function(){return t.betPlacedSuccess()},u.betsInReceipt=function(e){for(var o=0;o<e.length;o++)if(null!==e[o].betReceipt&&"Success"===e[o].betReceipt.status)return!0;return!1},u.register=function(){window.location=oc.mainUrlSsl+"myoddschecker/register"}}])}();
!function(){"use strict";ocAngularApp.directive("ocBetReceipt",[function(){return{restrict:"E",replace:!1,scope:{multiReceipt:"@"},controller:"BetReceiptController",controllerAs:"BetReceiptController",bindToController:!0,templateUrl:"non-static/bet-receipt/templates/bet-receipt-template.html"}}])}();
!function(){"use strict";ocAngularApp.factory("BetReceiptFactory",["BetSlipModel","CookieFactory","NavModel","$timeout",function(e,t,o,n){var c={};return c.model=e.model,c.shareLinks=function(){if("BF"===o.clientBookie.getCode()&&oc.activeApiBookies.BF===!0)c.buildAllShareLinks(c.model.API.ocBetslip.ocExchangeBets,0);else{var e,t,n;for(e=0,n=c.model.API.ocBetslip.singles.length;n>e;e++)"Success"===c.model.API.ocBetslip.singles[e].betReceipt.status&&c.buildAllShareLinks(c.model.API.ocBetslip.singles[e],e);for(t=0,n=c.model.API.ocBetslip.multiples.length;n>t;t++)c.model.API.ocBetslip.multiples[t].betReceipt&&"Success"===c.model.API.ocBetslip.multiples[t].betReceipt.status&&c.buildAllShareLinks(c.model.API.ocBetslip.multiples[t],t)}},c.buildAllShareLinks=function(e,t){var n,l={},i="",s=[],a=[];if("Single"===e.betType||"BF"===o.clientBookie.getCode()){var m=e.betInformation.subeventDateTime,r=new Date(m);m=r.getHours()+":"+r.getMinutes(),c.model.client.betslipUrls&&(i=oc.desktopUrl+c.model.client.betslipUrls.internalSingleBetslip),s=["@odds","@betName","@location","@time","@twitterHandle","@url"],a="BF"===o.clientBookie.getCode()?[e.ocExchangeBetInstruction.lastUpdatedPrice,e.betInformation.betName,e.betInformation.eventName,m,oc.text.twitterHandle,i]:[betslip.formatOdds(e.currentDecPrice,e.currentTradPrice),e.betInformation.betName,e.betInformation.eventName,m,oc.text.twitterHandle,i],l.message="horse racing"===e.betInformation.categoryGroupName?oc.text.tweetRacingShare.replaceArray(s,a):oc.text.tweetOtherShare.replaceArray(s,a)}else{for(i=oc.desktopUrl+"bet-basket/true/",n=0;n<c.model.API.ocBetslip.singles.length;n++)i=i+c.model.API.ocBetslip.singles[n].betInformation.betId+"*"+c.model.API.ocBetslip.singles[n].betInformation.marketId+"*";var p=null===e.currentDecPrice||"null"===e.currentDecPrice?"":e.currentDecPrice;s=["@odds","@twitterHandle","@url"],a=[p,oc.text.twitterHandle,i],l.message=oc.text.tweetAccaShare.replaceArray(s,a)}l.mediaType=[];var d=["facebook","twitter","googlePlus","whatsapp","email"],B=["soc-med facebook","soc-med twitter","soc-med google-plus","soc-med whatsapp","soc-med email"],I="MOBILE"===oc.platform?"http://m.facebook.com/sharer.php?u=":"http://facebook.com/sharer.php?u=",g=[I+i,"http://twitter.com/intent/tweet?text="+encodeURIComponent(l.message),"https://plus.google.com/share?url="+i,"whatsapp://send?text="+encodeURIComponent(l.message),"mailto:?subject=My Latest Bet&body="+encodeURIComponent(l.message)];for(n=0;n<d.length;n++)("DESKTOP"===oc.platform&&"whatsapp"!==d[n]||"MOBILE"===oc.platform)&&(l.mediaType[n]={name:d[n],cssClasses:B[n],handler:g[n]});c.model.shareLinks[t]=l},c.getBetReceiptOmnitureUrl=function(){var l,i="",s="",a="",m="",r="",p="",d="",B="",I="",g="",b="",u="",v="";c.model.API.ocBetslip.multiples&&(v=c.model.API.ocBetslip.multiples.length>0?"Multi Bet|":""),u="LIVE"===oc.server?"myoc_device":oc.server+"_myoc_device";var A=function(n,c,l,i,s,a,m){var r=(oc.ssl?"https://smetrics.sky.com":"http://metrics.sky.com")+"/b/ss/"+SKY_TRACKING.account+"/1/H.27/s"+String((new Date).getTime()).substring(6)+"?AQB=1&ndh=1&ce=UTF-8&ns=bskyb&pageName=oddschecker/betplaced&events=event79%2Cevent84&v44="+o.clientBookie.getCode()+"&v46="+v+n+"&v47="+c+"&v48="+l+"&v49="+i+"&v40="+s+"&c38="+a+"&v43=D="+m+(null===t.getCookie(u)?"":"&v37="+t.getCookie(u))+(null===t.getCookie("ab")?"":"&v18="+t.getCookie("ab"))+(null===t.getCookie("dcmp")?"":"&v67="+t.getCookie("dcmp"))+"&c37=D=v37&c67=D=v67&c40=D=v40&c44=D=v44&c46=D=v46&c47=D=v47&c48=D=v48&c49=D=v49&c43=D="+m+"&products=;;;;event84="+e.model.API.ocBetslip.betReceipt.totalBetStake+"&c3=betplaced.OMTR_URL&v13=D=c3&g=OMTR_G&pe=lnk_e&pev1=OMTR_URL&pid=oddschecker/betplaced&pidt=1&AQE=1";return r},C=function(e){$("#omniture-beacon").remove(),n(function(){var t=$('<img id="omniture-beacon" src="'+e+'" width="1" height="1" frameborder="0" style="display:none">');$("body").append(t)},10)};if("BF"!==o.clientBookie.getCode()){for(l=0;l<e.model.API.ocBetslip.singles.length;l++)-1===g.indexOf(encodeURIComponent(e.model.API.ocBetslip.singles[l].betInformation.categoryName))&&(g+=""===g?encodeURIComponent(e.model.API.ocBetslip.singles[l].betInformation.categoryName):","+encodeURIComponent(e.model.API.ocBetslip.singles[l].betInformation.categoryName)),b+=""===b?encodeURIComponent(e.model.API.ocBetslip.singles[l].betInformation.betName):","+encodeURIComponent(e.model.API.ocBetslip.singles[l].betInformation.betName),e.model.API.ocBetslip.singles[l].stakePerLine>0&&(i=encodeURIComponent(e.model.API.ocBetslip.singles[l].betInformation.categoryName),r=encodeURIComponent(e.model.API.ocBetslip.singles[l].betInformation.betName),a=encodeURIComponent(e.model.API.ocBetslip.singles[l].betInformation.subeventName),s=encodeURIComponent(e.model.API.ocBetslip.singles[l].betInformation.eventName),m=encodeURIComponent(e.model.API.ocBetslip.singles[l].betInformation.marketName),d="c38%2B%22%7C%22%2Bv44%2B%22%7C%22%2Bv46%2B%22%7C%22%2Bv47%2B%22%7C%22%2Bv48%2B%22%7C%22%2Bv49%2B%22%7C%22%2Bv40",I=encodeURIComponent(e.model.API.ocBetslip.singles[l].stakePerLine),B=A(i,s,a,m,r,I,d),C(B));n(function(){for(l=0;l<e.model.API.ocBetslip.multiples.length;l++)e.model.API.ocBetslip.multiples[l].stakePerLine>0&&(s=a=m="Multi%20Bet",p="%2B%22%7CMulti%20Bet%22",i="Multi%20Bet%7C"+i,d="c38%2B%22%7C%22%2Bv44%2B%22%7C%22%2Bv46%2B%22%7C%22%2Bv40"+p,I=encodeURIComponent(e.model.API.ocBetslip.multiples[l].betReceipt.totalBetStake.toFixed(2)),B=A(g,s,a,m,b,I,d),C(B))},200)}else e.model.API.ocBetslip.ocExchangeBets&&e.model.API.ocBetslip.ocExchangeBets.betReceipt&&(g=encodeURIComponent(e.model.API.ocBetslip.ocExchangeBets.betInformation.categoryName),b=encodeURIComponent(e.model.API.ocBetslip.ocExchangeBets.betInformation.betName),e.model.API.ocBetslip.ocExchangeBets.betReceipt.totalBetStake>0&&(i=encodeURIComponent(e.model.API.ocBetslip.ocExchangeBets.betInformation.categoryName),r=encodeURIComponent(e.model.API.ocBetslip.ocExchangeBets.betInformation.betName),a=encodeURIComponent(e.model.API.ocBetslip.ocExchangeBets.betInformation.subeventName),s=encodeURIComponent(e.model.API.ocBetslip.ocExchangeBets.betInformation.eventName),m=encodeURIComponent(e.model.API.ocBetslip.ocExchangeBets.betInformation.marketName),d="c38%2B%22%7C%22%2Bv44%2B%22%7C%22%2Bv46%2B%22%7C%22%2Bv47%2B%22%7C%22%2Bv48%2B%22%7C%22%2Bv49%2B%22%7C%22%2Bv40",I=encodeURIComponent(e.model.API.ocBetslip.ocExchangeBets.betReceipt.totalBetStake),B=A(i,s,a,m,r,I,d),C(B)))},c}])}();
ocAngularApp.controller("BookieLoginController",["MobileBookieAccountsInterface","GlobalBookieAccountsFactory","GLOBAL_CONSTANTS","$scope","$timeout","$rootScope","BetSlipModel","BookieAccountsModel","ApiBetSlipNavModel","NavModel",function(o,e,l,i,t,n,c,r,a,u){var d=this;d.model=r.model,d.nav=a.model,d.betslip=c.model,d.clientBookie=u.clientBookie,d.register=function(e){o.register(e)},d.login=function(e){setTimeout(function(){o.login(e)},200)},d.backToBetSlip=function(){r.model.errorReason=null,a.desktopNavHandler("back")}}]);
!function(){"use strict";ocAngularApp.controller("BookieAccountsController",["MobileBookieAccountsInterface","GeneralBookieAccountsFactory","CookieFactory","$scope","$timeout","BookieAccountsModel","NavModel","BetSlipModel","ApiBetSlipNavModel",function(o,e,t,i,n,c,a,l,s){var u=this;u.model=c.model,i.$on("NG-EVENT:coralGetBalance",function(){o.getBalance("CE")}),u.initBookieStatus=function(){oc.ssl&&t.setCookie("updateBookieStatus","true"),e.getStatus(!1),s.desktopNavHandler("bookieAccountsView"),$(".loader-container").hide(),$(".show-on-load").removeClass("hide")},u.clickBookieLogin=function(e){a.clientBookie.setBookie(e),"BF"===e?s.desktopNavHandler("exchangeBetView","iframeLogin"):"SK"!==e&&s.desktopNavHandler("singleBetView","bookieLogin"),o.showBookieLogin(e)},u.clickBookieLogout=function(e){o.logout(e)},u.clickDeposit=function(e){o.deposit(e)},u.clickRegister=function(e,t){o.register(e,t)},u.getBookieAccountsStatusOnLoad=function(){!oc.ssl&&t.getCookie("updateBookieStatus")&&n(function(){i.$apply(function(){e.getStatus(!1),t.deleteCookie("updateBookieStatus")})})}}])}();
!function(){"use strict";ocAngularApp.controller("OcAuth",["$http",function(t){var e=this;e.login=function(){delete t.defaults.headers.common,delete t.defaults.headers.post,t({url:"https://devapi.oddschecker.com/api/v1/myoddschecker/login",data:data,method:"POST"}).then(function(t){console.log(t)})["catch"](function(t){console.log(t)})}}])}();
!function(){"use strict";ocAngularApp.directive("ocBookieLogin",function(){return{restrict:"E",replace:!1,controller:"BookieLoginController",controllerAs:"BookieLoginController",bindToController:!0,templateUrl:"myoddschecker/bookie-auth/templates/bookie-login-template.html"}})}();
!function(){"use strict";ocAngularApp.directive("ocBookieStatusBox",[function(){return{restrict:"E",templateUrl:"myoddschecker/bookie-auth/templates/bookie-status-box-template.html",replace:!0,controller:"BookieAccountsController",controllerAs:"BookieAccountsController"}}])}();
!function(){"use strict";ocAngularApp.factory("GlobalBookieAccountsFactory",["ErrorFactory","NavModel","UserSettingsFactory","GLOBAL_CONSTANTS","BookieAccountsModel","$rootScope","$http","$q","$window","$timeout","BetSlipModel","QuickAccaModel","ApiBetSlipNavModel","AlertFactory","LocalStorageFactory",function(o,e,i,t,a,n,l,s,c,r,d,u,k,g,m){var f={utils:{}};f.mapCurrencySymbols=function(o){var e={GBP:String.fromCharCode(163),EUR:String.fromCharCode(8364),USD:String.fromCharCode(36)};return e[o]?e[o]:""};var b=function(o){var e=6e4;for(var i in oc.activeApiBookies)(o||void 0===a.model.bookies[i])&&(a.model.bookies[i]={code:i,name:t.BOOKIE_NAMES[i],loggedIn:!1,maxTimeout:30*e,timeout:0,balance:"",currency:"",hasIframeLogin:t.BOOKIE_HAS_IFRAME_LOGIN[i],hasOcApiLogin:t.BOOKIE_HAS_OC_LOGIN[i],mobileQuickBet:t.BOOKIE_HAS_MOBILE_QUICKBET[i]});void 0!==a.model.bookies.PP&&(a.model.bookies.PP.maxTimeout=60*e),void 0!==a.model.bookies.WH&&(a.model.bookies.WH.maxTimeout=120*e),a.setModel()},S=function(){var o=a.getModel(),e=void 0===o;e||(a.model=o),b(e);for(var i in oc.activeApiBookies)a.model.bookies[i].hasMultiBetSlip=-1!==t.BOOKIE_HAS_MULTI_BET_SLIP.indexOf(i),a.model.bookies[i].inAppBetting=t.BOOKIE_HAS_INAPP_BETTING[i],a.model.bookies[i].inAppBettingWithinApp=t.BOOKIE_HAS_INAPP_BETTING[i]&&!oc.blockiOSclicksAPI};return S(),f.setBalance=function(o,e,i,t){void 0!==e&&null!==e&&(a.model.bookies[o].currency=f.mapCurrencySymbols(e)),a.model.bookies[o].username=t,a.model.bookies[o].balance=i,a.setModel()},f.logOutFrontEnd=function(o){f.setBalance(o,"","N/A",""),a.model.bookies[o].loggedIn=!1,a.model.bookies[o].timeout=(new Date).getTime()+a.model.bookies[o].maxTimeout,"BF"===o&&delete localStorage.BF_Token,a.setModel()},f.setLoggedIn=function(o){o=o||e.clientBookie.getCode(),o&&(a.model.bookies[o].loggedIn=!0,a.model.bookies[o].timeout=(new Date).getTime()+a.model.bookies[o].maxTimeout,a.setModel())},f.setOcIdentifier=function(){ocApp.getQueryParam("identifier")!==!1&&(a.model.ocIdentifier="?identifier="+ocApp.getQueryParam("identifier")),f.setOcBetUrl(),a.setModel()},f.setOcBetUrl=function(){oc.betUrl=oc.betUrl+a.model.ocIdentifier},f.refreshIsLoggedIn=function(o,e){var i=a.model.bookies[o],t=(new Date).getTime();i.timeout>t?i.loggedIn?(f.setLoggedIn(o),e.resolve(!0)):(f.logOutFrontEnd(o),f.chooseMobileLoginType(o),"MOBILE"===oc.platform?f.showBookieLoginAPI(o):"DESKTOP"===oc.platform&&f.showBookieLoginDesktopAPI(o),e.reject()):f.refreshIsLoggedInAPI(o).then(function(){f.setLoggedIn(o),e.resolve(!0)})["catch"](function(){f.logOutFrontEnd(o),f.chooseMobileLoginType(o),"MOBILE"===oc.platform?f.showBookieLoginAPI(o):"DESKTOP"===oc.platform&&f.showBookieLoginDesktopAPI(o),e.reject()})},f.refreshIsLoggedInAPI=function(o){var e=s.defer();return $.ui.showMask("Checking Bookmaker Log In"),l.defaults.headers.common.Function="isauth",l.defaults.headers.common.Bookie=o.toLowerCase(),l({url:oc.betUrl,method:"GET",timeout:oc.ajaxAPITimeout}).then(function(){e.resolve(!0)})["catch"](function(){e.reject(!1)}),e.promise},f.getBookieAccountsStatus=function(o){var e;f.logOutFrontEnd("CE"),o&&$.ui.showMask("Loading Bookie Accounts"),l.defaults.headers.common.Function="getallbookmakeraccountstatus",l.defaults.headers.common.Bookie="oc";var i=(-1!==oc.betUrl.indexOf("?")?"&":"?")+"bookmakers=";for(e in a.model.bookies)a.model.bookies[e].inAppBetting&&(i+=a.model.bookies[e].code+",");l({method:"GET",url:oc.betUrl+i,timeout:oc.ajaxAPITimeout,silentAjaxFail:o}).then(function(i){if(!i.handling.error){var t;for(t=0;t<i.data.bookmakerStatus.bookmakerStatus.length;t++)e=i.data.bookmakerStatus.bookmakerStatus[t].bookmaker,"SK"!==e&&"CE"!==e&&(a.model.bookies[e].loggedIn=i.data.bookmakerStatus.bookmakerStatus[t].auth,f.setBalance(e,i.data.bookmakerStatus.bookmakerStatus[t].currencyCode,i.data.bookmakerStatus.bookmakerStatus[t].balance,i.data.bookmakerStatus.bookmakerStatus[t].username),$.log(e+" - Setting "+i.data.bookmakerStatus.bookmakerStatus[t].currencyCode+":"+i.data.bookmakerStatus.bookmakerStatus[t].balance))}o&&$.ui.hideMask()},function(e){o&&$.ui.hideMask(),$.log("getBookieAccountsStatus Error - status code: "+e.status)})},f.sendTokenAPI=function(e,i,t,n){var c=s.defer();if(i===a.model.bookies[e].currentToken)$.log("Not sending token for "+e+" as already sent..."),c.resolve(!0);else if(null!==t&&void 0!==t||void 0===i)c.reject({fact:"GlobalBookieAccountsFactory",func:"sendTokenAPI",bookie:e,response:{status:401},showLoginOn401:!1,showBetslipOption:!1});else{var r=n?', "username": "'+n+'"':"",d='{"ocToken":{"token":"'+i+'"'+r+"}}";$.log(d),l({method:"POST",url:oc.betUrl,data:d,timeout:oc.ajaxAPITimeout,headers:{Function:"sendcookieinfo",Bookie:e.toLowerCase()}}).then(function(t){a.model.bookies[e].currentToken=i,o.checkErrorAndResolvePromise({fact:"GlobalBookieAccountsFactory",func:"sendTokenAPI",bookie:e,response:t},c)},function(){c.reject(!1)})}return c.promise},f.getBalanceAPI=function(o){return"CE"===o?void n.$broadcast("NG-EVENT:coralGetBalance"):(a.model.bookies[o].balance="LOADING",void(a.model.bookies[o].loggedIn&&l({method:"GET",url:oc.betUrl,timeout:oc.ajaxAPITimeout,headers:{Function:"getbalance",Bookie:o.toLowerCase()}}).then(function(e){e.handling.error||f.setBalance(o,e.data.ocCustomerWallet.currency,e.data.ocCustomerWallet.balance,e.data.ocCustomerWallet.username)},function(){})))},f.bookieLogOutAPI=function(o){f.logOutFrontEnd(o),l.defaults.headers.common.Function="logout",l.defaults.headers.common.Bookie=o.toLowerCase(),$.log("Attempting to log out for bookie: "+o),l.get(oc.betUrl).then(function(i){return"BF"===e.clientBookie.getCode()?void f.injectIFrame(i.data.loginURL):($.ui.hideMask(),void $.log("SUCCESS: Logged out of "+o))},function(){$.ui.hideMask(),$.log("FAIL: Unable to Log out of "+o)})},f.injectIFrame=function(o,e,i){if(i=i||"",$.ui.showMask(i),"DESKTOP"===oc.platform){k.desktopNavHandler(null,"iframeLogin");var t=$(k.model.desktopViews.singleBetView.active||k.model.desktopViews.exchangeBetView.active?"#single-bet-slip-controller":"#multi-bet-slip-controller"),a=t.find("#bookie-iframe-login-controller");a.append($('<div id="bookie-iframe-wrapper" class="panel bookie-iframe-scroller"  title="'+e+'" data-overwrite-history="false"></div>')),a.find("#bookie-iframe-wrapper").html('<iframe id="bookie-iframe" class="bookie-iframe" width="560" height="460px" src="'+o+'" />'),$("#bookie-iframe",a).on("load",function(){$.ui.hideMask(),$(this).off("load")})}else $.query("#content").append($('<div id="bookie-iframe-wrapper" class="panel bookie-iframe-scroller" style="height:100%" title="'+e+'" data-overwrite-history="false"></div>')),$.query("#bookie-iframe-wrapper").html('<iframe id="bookie-iframe" class="bookie-iframe" src="'+o+'" />'),$.query("#bookie-iframe").bind("load",function(){$.ui.loadDiv("bookie-iframe-wrapper",!1,!1,"up"),$.ui.hideMask(),$(this).unbind("load")})},f.setLoginType=function(o){a.model.loginType=o},f.chooseMobileLoginType=function(o,i){return oc.degree53JavascriptBridgeOn&&oc.isInsideIOSNativeApp?void n.$emit("D53-EVENT:BOOKIE_LOGIN",o):($.ui.showMask("Loading Bookie Login"),void(i===t.LOGIN_TYPES.SAFARI?f.setLoginType(t.LOGIN_TYPES.SAFARI):(e.model.showSingleBetSlip||e.model.showBetfairBetslip)===!0?(f.setLoginType(t.LOGIN_TYPES.SINGLE),"DESKTOP"!==oc.platform&&(e.model.showSingleBetSlip=!1)):f.setLoginType("non-static/bet-slip-api"===oc.view||null!==a.model.multiLoginSuccessUrl?t.LOGIN_TYPES.MULTI:u.model.UI.showSelections?t.LOGIN_TYPES.OTHER:t.LOGIN_TYPES.QUICK_ACCA)))},f.showBookieLoginDesktopAPI=function(o){a.model.userName="",a.model.password="",a.model.errorReason=null,f.logOutFrontEnd(o),a.model.bookies[o].hasIframeLogin?"PP"===o?f.injectIFrame("https://pp.oddschecker.com/login?vendor_id=6337&AFF_ID="+oc.ppAffId,"Bookmaker Log In","Loading Bookie Login"):a.model.bookies[o].hasIframeLogin&&(l.defaults.headers.common.Function="login",l.defaults.headers.common.Bookie=o.toLowerCase(),l.get(oc.betUrl).then(function(e){e.handling.error||($.log("Successfully got data back from login for "+o+". Loading page into iframe: "+e.data.loginURL),f.injectIFrame(e.data.loginURL,"Bookmaker Log In","Loading Bookie Login"))},function(){})):$.ui.hideMask()},f.showBookieLoginAPI=function(o){if(a.model.userName="",a.model.password="",a.model.errorReason=null,e.clientBookie.setBookie(o),f.logOutFrontEnd(o),"PP"===o)f.injectIFrame("https://pp.oddschecker.com/login?vendor_id=6337&AFF_ID="+oc.ppAffId,"Bookmaker Log In","Loading Bookie Login");else if(a.model.bookies[o].hasIframeLogin){if("SK"===o)return void n.$broadcast("NG-EVENT:SkyBetShowBookieLogin");a.model.urlToLoad="bookie-accounts-panel"===$.ui.activeDiv.id?"#"+$.ui.activeDiv.id:oc.ajaxPageUrlPrefix+oc.urlFullRefresh,l.defaults.headers.common.Function="login",l.defaults.headers.common.Bookie=o.toLowerCase(),l.get(oc.betUrl).then(function(e){e.handling.error||($.log("Successfully got data back from login for "+o+". Loading page into iframe: "+e.data.loginURL),f.injectIFrame(e.data.loginURL,"Bookmaker Log In","Loading Bookie Login"))},function(){})}else{var i=oc.ajaxPageUrlPrefix+"myoddschecker/bookie-login?bk="+o;$.log("Loading ... "+i),$.ui.loadContent(i,!1,!1)}},f.handleBookieLoginSuccess=function(o){var t=o||e.clientBookie.getCode();f.setLoggedIn(t),oc.isLoggedIn||f.updateAssociateAccountsData(),"MOBILE"===oc.platform?f.utils.chooseMobileLoginCallback(t):"DESKTOP"===oc.platform&&("SK"===t&&"myoddschecker/bookmaker-status"!==oc.view?"multiBetView"===k.model.desktopViews.oldParentView?(k.desktopNavHandler("multiBetView","quickAcca"),u.model.chosenBookie.bookie=t,u.model.UI.rememberBookie=!0):"singleBetView"===k.model.desktopViews.oldParentView&&k.desktopNavHandler("singleBetView","betSlip"):"SK"===t?d.clearAllErrors():k.desktopNavHandler("back"),k.model.desktopViews.singleBetView.active?n.$broadcast("NG-EVENT:initSingleBetSlip"):k.model.desktopViews.exchangeBetView.active&&n.$broadcast("NG-EVENT:betfairExchangeLoginSuccess"),$.ui.hideMask(),f.getBalanceAPI(t)),i.setUserBookiesFromAnyPage(t,!1,!0)},f.updateAssociateAccountsData=function(){var o=[],e=d.model.API.ocBetslip.betUuid||"";for(var i in a.model.bookies)a.model.bookies[i].loggedIn&&o.push(i);var t=m.getData("associateAccountsData");void 0===t?t={associateAccount:{betslipId:e,loggedInBookies:o}}:(t.associateAccount.betslipId=e,t.associateAccount.loggedInBookies=o),m.setData("associateAccountsData",t)},f.utils.chooseMobileLoginCallback=function(o){if(a.model.loginType===t.LOGIN_TYPES.MULTI)f.utils.loginSuccessCallbackMulti(o);else{switch(a.model.loginType){case t.LOGIN_TYPES.SINGLE:f.utils.loginSuccessCallbackSingle(o);break;case t.LOGIN_TYPES.QUICK_ACCA:f.utils.loginSuccessCallbackQuickAcca(o);break;case t.LOGIN_TYPES.OTHER:f.utils.loginSuccessCallbackOther(o);break;case t.LOGIN_TYPES.AUTO:f.utils.loginSuccessCallbackAuto(o);break;case t.LOGIN_TYPES.SAFARI:f.utils.loginSuccessCallbackSafari(o)}$.ui.hideMask()}},f.utils.loginSuccessCallbackSingle=function(o){e.model.showSingleBetSlip=!0,"BF"===o&&n.$broadcast("NG-EVENT:betfairExchangeLoginSuccess"),"SK"!==o&&(f.getBalanceAPI(o),(a.model.currentBookie.hasIframeLogin||a.model.currentBookie.hasOcApiLogin)&&(e.model.goBack=!0))},f.utils.loginSuccessCallbackMulti=function(o){if(null!==a.model.multiLoginSuccessUrl&&void 0!==a.model.multiLoginSuccessUrl){var e=a.model.multiLoginSuccessUrl;a.model.multiLoginSuccessUrl=null;var i=e.replace(/[&]identifier[=].*?$/,"");$.log("Loading betslip through passing GlobalBookieAccountsFactory.model.multiLoginSuccessUrl variable... "+i),a.model.multiLoginSuccessUrlFullRefresh?(a.model.multiLoginSuccessUrlFullRefresh=!1,a.setModel(),c.location=e):($.ui.loadContent(i,!1,!1),f.getBalanceAPI(o))}},f.utils.loginSuccessCallbackQuickAcca=function(o){"SK"!==o&&(f.getBalanceAPI(o),e.model.goBack=!0,r(function(){u.model.UI.showSelections=!1}))},f.utils.loginSuccessCallbackOther=function(o){"SK"!==o&&(f.getBalanceAPI(o),(a.model.currentBookie.hasIframeLogin||a.model.currentBookie.hasOcApiLogin)&&(a.model.autoLoginAttempt||(e.model.goBack=!0)))},f.utils.loginSuccessCallbackAuto=function(o){f.getBalanceAPI(o),"CE"===o&&f.utils.loginSuccessCallbackMulti("CE")},f.utils.loginSuccessCallbackSafari=function(){oddsTable.getMyOcTokenValues("OC",null,"oddschecker://#current?login=success&bk="+e.clientBookie.getCode())},f.utils.receivePostMessage=function(o){switch("afm-asap"!==o.data&&-1===o.origin.indexOf("skybet.com")&&$.log("postMessage WORKED!!!. Function: "+o.data.func),o.data.func){case"betfairLoginSuccess":localStorage.BF_Token=o.data.token,f.handleBookieLoginSuccess();break;case"betfairLogoutSuccess":delete localStorage.BF_Token,"DESKTOP"===oc.platform&&k.desktopNavHandler("back"),r(function(){e.model.goBack=!0,$.ui.hideMask()});break;case"bookieLoginSuccess":f.handleBookieLoginSuccess();break;case"bookieLoginFail":$.log("LOADING From Post Message: bookieLoginFail:  "+a.model.multiLoginSuccessUrl),a.model.multiLoginSuccessUrl=null,a.model.multiLoginSuccessUrlFullRefresh=!1,a.setModel(),r(function(){e.model.goBack=!0,g.alertWithFeedbackAndGoBack(!1,"Login Failed","Please leave feedback or press OK to try again")},200);break;case"bookieDepositSuccess":case"bookieWithdrawSuccess":f.getBalanceAPI(e.clientBookie.getCode());case"bookieIFrameGoBack":r(function(){e.model.goBack=!0});break;case"bookieDepositFail":r(function(){e.model.goBack=!0,g.alertWithOptionToGoToBookie("Transaction Failed","Your deposit, withdrawal or transfer has failed.")},200)}},$.log("Binding postMessage Listener"),c.addEventListener("message",f.utils.receivePostMessage,!1),f}])}();
!function(){"use strict";ocAngularApp.factory("SkyBookieAccountsFactory",["GlobalBookieAccountsFactory","BookieAccountsModel","$rootScope","$window","$interval","AlertFactory",function(o,e,t,n,c,i){var a={utils:{}};return t.$on("NG-EVENT:SkyBetShowBookieLogin",function(){a.showBookieLogin()}),a.showBookieLogin=function(){a.utils.checkSkyLoadedThenDoFunction(function(){n.SkyBetAccount.openLogin(),$.ui.hideMask()})},a.logout=function(){a.utils.checkSkyLoadedThenDoFunction(function(){n.SkyBetAccount.logout()})},a.register=function(){n.SkyBetAccount.openRegistration()},a.getBalance=function(){oc.isSkyBetApiOn&&n.SkyBetAccount.getLoginState(function(e,t){e||void 0===t.user||void 0===t.user.balance?o.logOutFrontEnd("SK"):a.utils.updateSkyBalanceAndLogInState(e,t)})},a.skyMyAccount=function(){n.SkyBetAccount.preloadMyAccount(),n.SkyBetAccount.openMyAccount()},a.skyBetInit=function(){var c=!0;if(oc.isSkyBetApiOn)try{if($.log("Loading Skybet Account Framework"),!n.SkyBetAccount)throw new Error("Could not find SkyBetAccount integration object");n.SkyBetAccount.bind("loggedIn",function(t){$.log("SKYBET: fireLoginState Logged in",t),e.model.multiLoginSuccessUrlFullRefresh||a.utils.updateSkyBalanceAndLogInState(null,t,!0),e.model.bookies.SK.loggedIn||c||(o.handleBookieLoginSuccess(),$.ui.hideMask()),c=!1}),n.SkyBetAccount.bind("loggedOut",function(i){$.log("SKYBET: fireLoginState Logged out",i),e.model.bookies.SK.loggedIn&&(o.logOutFrontEnd("SK"),$.ui.hideMask(),t.$broadcast("NG-EVENT:forceBetslipApply")),oc.doOcLogout&&(n.location=oc.mainUrl+oc.myoddscheckerLogoutUrlMap+"?redir="+oc.mainUrl),c=!1});var i=oc.mainUrl.replace(/\/(m|mapp|t|tapp)\/$/,"");n.SkyBetAccount.setup({consumer:oc.skybetConsumer,consumerUrl:i}),n.SkyBetAccount.bind("userDataChange",function(o){$.log("SKYBET: userDataChange / BalanceUpdated",o),a.utils.updateSkyBalanceAndLogInState(null,o)})}catch(u){oc.isSkyBetApiOn=!1,e.model.bookies.SK.inAppBetting=!1,$.log("Error caught: "+u.message)}},a.utils.updateSkyBalanceAndLogInState=function(e,n,c){o.sendTokenAPI("SK",n.user.ssoToken,e,n.user.username).then(function(){var e=n.user.balance.toFixedNumber(2),i=n.user.username;o.setBalance("SK",n.user.currency,e,i),o.setLoggedIn("SK"),c=c&&"non-static/bet-slip-api"===oc.view&&oc.blockiOSclicksAPI&&oc.iosAppAPIClickOutsEnabled,c&&t.$broadcast("NG-EVENT:buildMultiBetslip")})["catch"](function(){o.logOutFrontEnd("SK")})},a.utils.checkSkyLoadedThenDoFunction=function(o){var e=0;if(n.SkyBetAccount&&n.SkyBetAccount.isInitialPageLoaded())o();else var t=c(function(){e++,$.log("called skyLoadLoop. giveUp = "+e+" | isSkybetNOTValid = "+!n.SkyBetAccount+" | initPageLoad = "+n.SkyBetAccount.isInitialPageLoaded()),e>100?(c.cancel(t),oc.blockiOSclicksAPI&&(oc.iosAppAPIClickOutsEnabled||oc.degree53JavascriptBridgeOn)?ocApp.generalAlert("Something went wrong...","Could not connect to bookmaker service. Please try again later",!1,function(){oddsTable.getMyOcTokenValues("OC",null,"oddschecker:///"+oc.urlPathBack)},"Go Back To App"):i.alertWithFeedbackAndGoBack(!1,!1,"Could not connect to bookmaker service. Please try again later")):n.SkyBetAccount&&n.SkyBetAccount.isInitialPageLoaded()&&(o(),c.cancel(t))},300)},a}])}();
!function(){"use strict";ocAngularApp.factory("CoralBookieAccountsFactory",["GlobalBookieAccountsFactory","BookieAccountsModel","GLOBAL_CONSTANTS","$rootScope","CookieFactory","WarningFactory",function(e,o,s,n,t,a){var i={utils:{}};return i.login=function(){$.ui.showMask("Bookie Logging In"),i.utils.connectOrRunFunction("login",i.utils.login)},i.logout=function(){i.utils.connectOrRunFunction("logout",i.utils.logout)},i.getBalance=function(){i.utils.connectOrRunFunction("getBalance",i.utils.getBalance)},i.refreshIsLoggedIn=function(o,s){e.refreshIsLoggedIn(o,s)},i.showBookieLogin=function(o,s){"DESKTOP"===oc.platform?e.showBookieLoginDesktopAPI(o,s):e.showBookieLoginAPI(o,s)},i.utils.model={socket:null,f:"userName",g:"password",sessionToken:"",userName:"",lastMessageSent:{},coralSystemId:"LOCALHOST"===oc.server?"239":"235",coralCasinoName:"LOCALHOST"===oc.server?"coraltst2":"coral"},i.utils.connectOrRunFunction=function(e,o,s,n){oc.isCoralApiOn&&(i.utils.model.socket&&i.utils.model.socket.socket.connected?"function"==typeof o&&o(s,n):i.utils.connect(e,o,s,n))},i.utils.login=function(){var e;e=i.utils.copyBaseJsonData(),e[i.utils.model.f]=o.model.userName,e[i.utils.model.g]=o.model.password,e.ID=31001,i.utils.sendMessage(e)},i.utils.logout=function(){var e=i.utils.copyBaseJsonData();e.ID=31013,""!==i.utils.model.sessionToken&&(e.sessionToken=i.utils.model.sessionToken),i.utils.sendMessage(e)},i.utils.getBalance=function(){var e=i.utils.copyBaseJsonData();e.balanceTypes=["sportsbook_gaming_balance"],e.ID=31020,""!==i.utils.model.sessionToken&&(e.sessionToken=i.utils.model.sessionToken),i.utils.sendMessage(e)},i.utils.copyBaseJsonData=function(){var e={clientVersion:"70",deviceId:"123456",realMode:1,languageCode:"EN",casinoName:i.utils.model.coralCasinoName,errorLevel:1,ID:31001,systemId:i.utils.model.coralSystemId};return e},i.utils.sendMessage=function(e){i.utils.model.lastMessageSent=e,e.constructor===Object&&(e=JSON.stringify(e)),i.utils.model.socket.send(e),$.log(">>> "+e)},i.utils.disconnect=function(){i.utils.model.socket.disconnect(),i.utils.model.socket=null},i.utils.getTempToken=function(e){var o=i.utils.copyBaseJsonData();o[i.utils.model.f]=e.username,o.sessionToken=e.sessionToken,o.serviceType="GamePlay",o.ID=30001,i.utils.model.sessionToken=e.sessionToken,i.utils.model.userName=e.username,t.setCookie("ceToken",e.username+"~"+i.utils.model.sessionToken),i.utils.sendMessage(o)},i.utils.tryLoginWithExistingToken=function(){if(o.model.loginType=s.LOGIN_TYPES.AUTO,""!==i.utils.model.userName&&""!==i.utils.model.sessionToken){var n=i.utils.copyBaseJsonData();n[i.utils.model.f]=i.utils.model.userName,n.sessionToken=i.utils.model.sessionToken,n.ID=33036,i.utils.sendMessage(n)}else e.logOutFrontEnd("CE")},i.utils.showTandCsPopup=function(e){var o=function(){var o=i.utils.copyBaseJsonData();o.accept=!0,o.termVersionReference=e.termVersionReference,o.ID=31011,i.utils.sendMessage(o)},s=function(){$.ui.goBack()};if("MOBILE"===oc.platform)$.query("body").popup({title:"Accept T&Cs?",message:'<div class="info-text">Please Accept Corals Terms and Conditions to continue. <a target="_blank" href="'+e.tcVersionUrl+'" class="std-link no-hide-on-click">Read the T&Cs here</a></div>',doneCallback:o,cancelCallback:s,doneText:"Yes",cancelText:"No",reverseDoneCancel:!0});else if("DESKTOP"===oc.platform){var n=confirm("Please Accept Corals Terms and Conditions to continue. Read the T&Cs here: "+e.tcVersionUrl);n?o():$.ui.hideMask()}},i.utils.clearSession=function(){$.log("Clearing Coral Log In Session..."),t.deleteCookie("ceToken"),i.utils.model.userName="",i.utils.model.sessionToken="",e.logOutFrontEnd("CE"),n.$broadcast("NG-EVENT:forceBetslipApply")},i.utils.responseHandler=function(o){switch(o=JSON.parse(o),o.ID){case 31025:case 31009:if(103===o.data.errorCode)return i.getBalance(),void e.setLoggedIn("CE");var s=o.data.errorMessage.match(/invalid token|wrong authentication token/i);if($.ui.hideMask(),"bookie_accounts_static_panel"!==oc.view&&105!==o.data.errorCode)if(null===s){var t,l;104!==o.data.errorCode&&o.data.errorMessage?(l="Coral Message",t=o.data.errorMessage):(l="Coral Message",t='<div class="standard-para">Your Username and/or Password details are incorrect. Please try again or contact Coral Customer Support at <a href="mailto:help@coral.co.uk" target="_top" class="std-link">help@coral.co.uk</a> or call<br /> UK: 0800 44 00 11<br /> IRE: 1800 936955 <br />International:  +44 208 507 5544.<div>',"DESKTOP"===oc.platform&&(t="Your Username and/or Password details are incorrect.")),"MOBILE"===oc.platform?ocApp.generalAlert(l,t):a.setBetslipClientWarning(null,t)}else"non-static/bet-slip-api"===oc.view&&e.showBookieLoginAPI("CE");(104!==o.data.errorCode||s)&&i.utils.clearSession();break;case 10:i.utils.clearSession();break;case 31002:i.utils.getTempToken(o.data);break;case 30002:e.sendTokenAPI("CE",o.data.token,null,i.utils.model.lastMessageSent.userName).then(function(){e.handleBookieLoginSuccess("CE")})["catch"](function(){})["finally"](function(){$.ui.hideMask()});break;case 31014:$.log("Success logging out for bookie: CE"),i.utils.clearSession(),e.bookieLogOutAPI("CE");break;case 31010:i.utils.showTandCsPopup(o.data);break;case 31021:case 32010:e.setLoggedIn("CE"),e.setBalance("CE",o.data.balances[0].balance.currencyCode,Number(o.data.balances[0].balance.amount),i.utils.model.userName),n.$broadcast("NG-EVENT:forceBetslipApply")}},i.utils.connect=function(e,o,s,n){if(oc.isCoralApiOn&&(null===i.utils.model.socket||i.utils.model.socket&&!i.utils.model.socket.socket.connected)){var a=t.getCookie("ceToken");if(null!==a){var l=a.split("~");i.utils.model.userName=l[0],i.utils.model.sessionToken=l[1]}var c="LOCALHOST"===oc.server?"https://openapi-tst2.egalacoral.com":"https://openapi.egalacoral.com";i.utils.model.socket=io.connect(c,{transports:["websocket","xhr-polling"],"reconnection delay":2e3,"force new connection":!0,secure:!0}),i.utils.model.socket.on("connect",function(){$.log("Client has connected to the server via "+i.utils.model.socket.socket.transport.name+"!"),"function"==typeof o?o(s,n):i.utils.tryLoginWithExistingToken()}),i.utils.model.socket.on("message",function(e){$.log("<<< "+e),i.utils.responseHandler(e)}),i.utils.model.socket.on("disconnect",function(){$.log("The client has disconnected!"),i.utils.model.socket=null})}},i}])}();
!function(){"use strict";ocAngularApp.factory("GeneralBookieAccountsFactory",["GlobalBookieAccountsFactory","BookieAccountsModel","GLOBAL_CONSTANTS","$http","LocalStorageFactory","BetSlipModel","NavModel",function(o,e,t,n,i,c,a){var s={};return s.login=function(t){a.clientBookie.setBookie(t),e.model.errorReason=null,$.ui.showMask("Bookie Logging In");var i={loginInfo:{username:e.model.userName,password:e.model.password}},c=JSON.stringify(i);n({method:"POST",url:oc.betUrl,data:c,timeout:oc.ajaxAPITimeout,headers:{Function:"login",Bookie:a.clientBookie.getCode().toLowerCase()}}).then(function(t){t.handling.error||("OK"===t.data.loginInfo.success?(o.handleBookieLoginSuccess(),e.model.bookies[a.clientBookie.getCode()].username=e.model.userName,e.clearUserNamePassword()):(e.model.errorReason=t.data.loginInfo.errorReason,e.model.password="",$.ui.hideMask()))},function(){})},s.logOutFrontEnd=function(e){o.logOutFrontEnd(e)},s.setOcIdentifier=function(){o.setOcIdentifier()},s.chooseMobileLoginType=function(e,t){o.chooseMobileLoginType(e,t)},s.showBookieLogin=function(e,t){"DESKTOP"===oc.platform?o.showBookieLoginDesktopAPI(e,t):o.showBookieLoginAPI(e,t)},s.handleBookieLoginSuccess=function(){o.handleBookieLoginSuccess()},s.logout=function(e){a.clientBookie.setBookie(e),$.ui.showMask("Logging Out "+a.clientBookie.getName()),o.bookieLogOutAPI(e)},s.register=function(o,e){var t,n,i="&type=bookie-register",a="";void 0!==o&&(c.model.API.ocBetslip.singles.length>0?(a="&cg="+c.model.API.ocBetslip.singles[0].betInformation.categoryGroupName,i+=c.model.API.ocBetslip.singles.length<2?"-single":"-multiple"):c.model.API.ocBetslip.ocExchangeBets&&(a="&cg="+c.model.API.ocBetslip.ocExchangeBets.betInformation.categoryGroupName,i+="-single"),n=("DESKTOP"===oc.platform?oc.desktopUrl:oc.mainUrl)+"clickout.htm?customer=new&bk="+o+a+i,t=e||n,"DESKTOP"===oc.platform?window.open(t,o+"clickout"):ocApp.windowOpen(t))},s.getBalance=function(e){o.getBalanceAPI(e)},s.setBalance=function(e,t,n,i){o.setBalance(e,t,n,i)},s.getStatus=function(e){o.getBookieAccountsStatus(e)},s.updateAssociateAccountsData=function(){o.updateAssociateAccountsData()},s.associateAccounts=function(){var o=i.getData("associateAccountsData");if(oc.isLoggedIn&&!oc.forceLogin&&oc.hasAPIBookies&&void 0!==o){n.defaults.headers.common.Function="associateaccount",n.defaults.headers.common.Bookie="oc";var e=JSON.stringify(o);n({method:"POST",url:oc.betUrl,data:e,timeout:oc.ajaxAPITimeout}).then(function(){$.log("associateAccounts Success"),i.removeData("associateAccountsData")},function(){$.log("associateAccounts Fail")})}},s.deposit=function(e){void 0!==e&&("LD"===e?s.depositAPI("LD"):"PP"===e?o.injectIFrame("https://pp.oddschecker.com?vendor_id=6337&AFF_ID=="+oc.ppAffId,"Bookmaker Settings"):"DESKTOP"===oc.platform?window.open(t.BOOKIE_DEPOSIT_DESKTOP_URL[e],e+"clickout"):ocApp.windowOpen(t.BOOKIE_DEPOSIT_URL[e]))},s.refreshIsLoggedIn=function(e,t){o.refreshIsLoggedIn(e,t)},s.PPBetHistory=function(){o.injectIFrame("https://pp.oddschecker.com?vendor_id=6337&AFF_ID="+oc.ppAffId,"Bookmaker Settings","Loading Bet History")},s.depositAPI=function(e){$.ui.showMask("Loading Content"),n.defaults.headers.common.Function="deposit",n.defaults.headers.common.Bookie=e.toLowerCase(),n({url:oc.betUrl,timeout:oc.ajaxAPITimeout}).then(function(t){$.log("Successfully got data back from deposit for "+e+". Loading page into iframe: "+t.data.url),o.injectIFrame(t.data.url,"Bookmaker Deposit")},function(){$.ui.hideMask()})},s}])}();
!function(){"use strict";ocAngularApp.factory("MobileBookieAccountsInterface",["BetSlipModel","GeneralBookieAccountsFactory","SkyBookieAccountsFactory","CoralBookieAccountsFactory","BookieAccountsModel","$timeout","$q","NavModel",function(o,e,t,n,c,i,a,s){var u={};return u.login=function(o){switch(o){case"CE":n.login();break;default:e.login(o)}},u.logout=function(o){switch(o){case"CE":n.logout();break;case"SK":t.logout();break;default:e.logout(o)}},u.register=function(o,t){switch(o){default:e.register(o,t)}},u.getBalance=function(o){switch(o){case"CE":n.getBalance();break;case"SK":t.getBalance();break;default:e.getBalance(o)}},u.setBalance=function(o,t,n,c){e.setBalance(o,t,n,c)},u.deposit=function(o){switch(s.clientBookie.setBookie(o),o){case"SK":t.skyMyAccount();break;default:e.deposit(o)}},u.loadBookieStatus=function(){u.getStatus(!0),$.ui.loadDiv("#bookie-accounts-panel")},u.getStatus=function(o){t.getBalance(),n.getBalance(),e.getStatus(o)},u.showBookieLogin=function(o,c){switch(s.clientBookie.setBookie(o),e.chooseMobileLoginType(o,c),o){case"SK":t.showBookieLogin();break;case"CE":n.showBookieLogin(o);break;default:e.showBookieLogin(o)}},u.logOutFrontEnd=function(o){e.logOutFrontEnd(o)},u.refreshLoginStatus=function(o){var t=a.defer();switch(o){case"CE":n.refreshIsLoggedIn(o,t);break;default:e.refreshIsLoggedIn(o,t)}return t.promise},u.navigateToBetHistory=function(o){switch(o){case"PP":e.PPBetHistory();break;case"SK":t.skyMyAccount()}},u.bookieLogoutSafari=function(o){i(function(){s.clientBookie.setBookie(o),$.ui.toggleHeaderMenu(!0),$.ui.showMask("Logging Out "+s.clientBookie.getName()),$.ui.removeFooterMenu(),u.refreshLoginStatus(o).then(function(){u.logout(o)})["finally"](function(){oddsTable.getMyOcTokenValues("OC",null,"oddschecker://#current?logout=success&bk="+s.clientBookie.getCode())})},100)},u.handleBookieLoginSuccess=function(){e.handleBookieLoginSuccess()},u.updateAssociateAccountsData=function(){e.updateAssociateAccountsData()},u.associateAccounts=function(){e.associateAccounts()},u}])}();
!function(){"use strict";ocAngularApp.factory("OcAuthFactory",["LocalStorageFactory","CookieFactory","NavModel","BetSlipModel","$window","$timeout","$rootScope","BookieAccountsModel",function(e,o,l,a,i,m,c,t){var d={utils:{}};return d.ocLogIn=function(){oc.degree53JavascriptBridgeOn&&!oc.isDegree53WrapperApp?c.$emit("D53-EVENT:OC_LOGIN"):d.loadOcLogInPage()},d.loadOcLogInPage=function(e,o){e=e?"&addUserData=true":"";var l=o;if(!l){l=oc.mainUrl+oc.urlPath;var a=ocApp.getQueryParam("bid");oddsTable.isDeepLinkedBetslipPage(a)&&(l+="?bet-link=true&bid="+ocApp.getQueryParam("bid")+"&bk="+ocApp.getQueryParam("bk"))}l=encodeURIComponent(l);var i=oc.ajaxPageUrlPrefix+oc.myoddscheckerLoginUrlMap+"?redir="+l+e;$.ui.loadContent(i,!1,!1)},d.oddscheckerLogOutRoutine=function(l){return l=l||!1,!oc.degree53JavascriptBridgeOn||l||oc.isDegree53WrapperApp?(oc.hasAPIBookies&&void 0!==t.model.bookies.BF&&t.model.bookies.BF.loggedIn&&t.model.bookies.BF.inAppBetting&&c.$broadcast("NG-EVENT:doBetfairLogoutOnOddscheckerLogout"),e.removeData("GlobalBookieAccountsFactory-"+oc.repub),e.removeData("betBasketBets"),o.deleteCookie("basket"),o.deleteCookie("ceToken"),o.deleteCookie("socialLogin"),void m(function(){oc.isSkyBetApiOn?(oc.doOcLogout=!0,i.SkyBetAccount.logout()):i.location=oc.mainUrl+oc.myoddscheckerLogoutUrlMap+"?redir="+oc.mainUrl},50)):void c.$emit("D53-EVENT:OC_LOGOUT")},d.showSignUp=function(e,o){SKY_TRACKING.section="bet/postbet/signup",SKY_TRACKING.headline="postbet-signup",SKY_TRACKING.events="event17",sky.tracking.pageView(SKY_TRACKING),l.model.showSignUp=e,e&&(l.model.hasSignUpShown=!0),o&&(l.model.showSingleBetSlip=!1)},d.ocCheckEmail=function(){var e=/(\.con|\.von|\.vom|gmsil|\.co.ul|\.co.uj|\.comm|\.cmo)\b/i;d.utils.isMatchRegex=e.test(l.model.email),d.utils.isMatchRegex?(l.model.emailWarning=!0,l.model.email.match("con")?l.model.emailSuggest=l.model.email.replace(".con",".com"):l.model.email.match("von")?l.model.emailSuggest=l.model.email.replace(".von",".com"):l.model.email.match("comm")?l.model.emailSuggest=l.model.email.replace(".comm",".com"):l.model.email.match("cmo")?l.model.emailSuggest=l.model.email.replace(".cmo",".com"):l.model.email.match("vom")?l.model.emailSuggest=l.model.email.replace(".vom",".com"):l.model.email.match("gmsil")?l.model.emailSuggest=l.model.email.replace("gmsil","gmail"):l.model.email.match("co.uj")?l.model.emailSuggest=l.model.email.replace("co.uj","co.uk"):l.model.email.match("co.ul")&&(l.model.emailSuggest=l.model.email.replace("co.ul","co.uk"))):d.utils.isMatchRegex||(l.model.emailWarning=!1,l.model.emailSuggest="")},d.replaceEmail=function(){l.model.email=l.model.emailSuggest,l.model.emailWarning=!1,d.ocCheckEmail()},d}])}();
!function(){"use strict";ocAngularApp.factory("BookieAccountsModel",["LocalStorageFactory",function(o){var e={};return e.model={loginType:null,multiLoginSuccessUrl:null,multiLoginSuccessUrlFullRefresh:!1,currentBookie:{},bookies:{},userName:"",password:"",errorReason:null,ocIdentifier:""},e.setModel=function(){oc.refreshingApp||(e.clearUserNamePassword(),o.setData("GlobalBookieAccountsFactory-"+oc.repub,e.model))},e.getModel=function(){return o.getData("GlobalBookieAccountsFactory-"+oc.repub)},e.clearUserNamePassword=function(){e.model.userName="",e.model.password=""},e}])}();
!function(){"use strict";ocAngularApp.factory("NavModel",["BetSlipModel","BookieAccountsModel",function(e,o){var t={};t.model={activeMenu:null,activeNav:null,activeSubMenu:null,showSignUp:!1,hasSignUpShown:!1,registerUrl:oc.mainUrl+"myoddschecker/register",showSingle:!1,showLogin:!1,showIframeLogin:!1,showSingleBetSlip:!1,showMultiBetSlip:!1,showOtherBetOptions:!1,showBetfair:!1,showBetAddedAlert:!1,showEducation:!1,showSearch:!1,goBack:!1,lang:oc.lang,accaFooter:{returns:0,showHide:!1}};var n=function(){this.code=null,this.name=null};return n.prototype.setBookie=function(t){t?(e.model.client.bookie=t,e.model.client.bookieName=oc.bookiesNames[t],o.model.currentBookie=o.model.bookies[t],this.code=t.toUpperCase(),this.name=o.model.currentBookie.name):(this.code=null,this.name=null)},n.prototype.getCode=function(){return this.code},n.prototype.getName=function(){return this.name},t.clientBookie=new n,t}])}();
!function(){"use strict";ocAngularApp.factory("FacebookLoginFactory",["$http","$q","$rootScope","CookieFactory",function(o,e,a,t){var n={};return n.model={user:{},authData:{},UI:{showError:!1,client:{message:"",showGrantPermissions:!1}},isSignUp:!1},a.$on("NG-EVENT:clearSocialErrors",function(){n.clearFacebookErrors()}),n.FB_checkLoginState=function(){FB.getLoginStatus(function(o){$.log(o),n.model.authData=o.authResponse,"connected"===o.status?n.ocLoginViaFacebook():("not_authorized"===o.status,n.FB_login())})},n.FB_login=function(o){var e={scope:"public_profile,email"};"getPermission"===o&&(e.auth_type="rerequest"),FB.login(function(o){$.log(o),n.model.authData=o.authResponse,"connected"===o.status?n.ocLoginViaFacebook():"not_authorized"===o.status},e)},n.ocLoginViaFacebook=function(){n.FB_checkPermissions().then(function(){return n.FB_getUserInfo()}).then(function(){$.ui.showMask("Authorising"),n.OcLoginWithFBToken()})["catch"](function(o){n.handleFacebookError(o)})},n.FB_checkPermissions=function(){var o=e.defer(),a=!1;return FB.api("/me/permissions",function(e){for(var t=0;t<e.data.length;t++)if("email"===e.data[t].permission&&"granted"===e.data[t].status){a=!0;break}a?o.resolve():o.reject("REQUIRED_PERMISSIONS_NOT_GRANTED")}),o.promise},n.FB_getUserInfo=function(){var o=e.defer();return FB.api("/me",{fields:"email, first_name, last_name"},function(e){$.log(e),o.resolve(e),n.model.user=e}),o.promise},n.handleFacebookError=function(o){$.log(o),a.$broadcast("NG-EVENT:clearSocialErrors"),n.model.UI.showError=!0;var e={SHOW_GRANT_PERMISSIONS:"Without allowing Oddschecker access to your Facebook email address it is not possible for us to authenticate you.",LOGIN_FAILED:"An error has occured whilst trying to log you in. Please try again."};"REQUIRED_PERMISSIONS_NOT_GRANTED"===o?(n.model.UI.client.message=e.SHOW_GRANT_PERMISSIONS,n.model.UI.client.showGrantPermissions=!0):n.model.UI.client.message=e.LOGIN_FAILED},n.clearFacebookErrors=function(){n.model.UI.client.showGrantPermissions=!1,n.model.UI.client.message="",n.model.UI.showError=!1},n.OcLoginWithFBToken=function(){delete o.defaults.headers.common.Function,a.$broadcast("NG-EVENT:clearSocialErrors");var e,i={email:n.model.user.email,myOcSocialRequest:{socialPlatform:"Facebook",identifier:n.model.authData.userID,access_token:n.model.authData.accessToken,firstName:n.model.user.first_name,surname:n.model.user.last_name},communications:!0,"remember-me":!0};"MOBILE"===oc.platform?e=oc.mainUrl+"api/v1/myoddschecker/social-login":"DESKTOP"===oc.platform&&(e=oc.mainUrlSsl+"api/v1/myoddschecker/social-login"),i=JSON.stringify(i),o({method:"POST",url:e,data:i,timeout:oc.ajaxAPITimeout,headers:{"API-KEY":"123456789"}}).then(function(o){o.data.success?(n.model.isSignUp&&(SKY_TRACKING.events="event16",sky.tracking.pageView(SKY_TRACKING)),window.location=oc.mainUrl,t.setCookie("socialLogin","FB")):n.handleFacebookError(o)})["catch"](function(){n.handleFacebookError("AJAX_ERROR"),$.ui.hideMask()})},n}])}();
!function(){"use strict";ocAngularApp.factory("GoogleLoginFactory",["$http","$rootScope","CookieFactory",function(o,e,n){var t={};return t.model={user:{},authInstance:null,UI:{showError:!1,client:{message:""}},isSignUp:!1},e.$on("NG-EVENT:clearSocialErrors",function(){t.clearGoogleErrors()}),t.Google_login=function(){t.model.authInstance=gapi.auth2.getAuthInstance(),t.model.authInstance.isSignedIn.get()?t.model.authInstance.signIn().then(function(){t.beginOCLogin()},function(o){console.log(o)}):(gapi.auth2.getAuthInstance().isSignedIn.listen(function(o){o&&t.beginOCLogin()}),t.model.authInstance.signIn())},t.beginOCLogin=function(){$.ui.showMask("Authorising"),t.model.user=t.model.authInstance.currentUser.get(),t.OcLoginWithGoogleToken()},t.clearGoogleErrors=function(){t.model.UI.showError=!1,t.model.UI.client.message=""},t.setGoogleError=function(){t.model.UI.showError=!0,t.model.UI.client.message="An error has occured whilst trying to log you in. Please try again."},t.OcLoginWithGoogleToken=function(){delete o.defaults.headers.common.Function,e.$broadcast("NG-EVENT:clearSocialErrors");var i=t.model.user.getBasicProfile(),r=t.model.user.getAuthResponse(),a=i.getName().split(" "),s={email:i.getEmail(),myOcSocialRequest:{socialPlatform:"Google",identifier:i.getId(),access_token:r.id_token,firstName:a[0],surname:a[1]},communications:!0,"remember-me":!0};s=JSON.stringify(s);var c;"MOBILE"===oc.platform?c=oc.mainUrl+"api/v1/myoddschecker/social-login":"DESKTOP"===oc.platform&&(c=oc.mainUrlSsl+"api/v1/myoddschecker/social-login"),o({method:"POST",url:c,data:s,timeout:oc.ajaxAPITimeout,headers:{"API-KEY":"123456789"}}).then(function(o){console.log(o),"Login Success"===o.data.message?(t.model.isSignUp&&(SKY_TRACKING.events="event16",sky.tracking.pageView(SKY_TRACKING)),window.location=oc.mainUrl,n.setCookie("socialLogin","GO")):t.setGoogleError()})["catch"](function(){$.ui.hideMask(),t.setGoogleError()})},t}])}();
!function(){"use strict";ocAngularApp.factory("UserSettingsFactory",["$http","CookieFactory",function(e,o){var s={utils:{}};s.model={userBookies:{},userBookiesLength:"",userSports:[]},s.cookieToModel=function(e){var t=o.getCookie(e),i=[];if("mobile_sports"===e)t&&'""'!==t&&(i=t.split("~").map(Number),s.model.userSports=i);else if("mobile_bookies"===e){var r={};if(t)for(var l=t.split("~"),u=0;u<l.length;u++)if(u%2===0){var n=l[u];r[n]=l[u+1]}s.model.userBookies=r}},s.utils.modelToCookie=function(e,s){var t,i="";if("mobile_bookies"===s){t=0;for(var r in e){var l=e[r];t++,i+=1===t?r+"~"+l:"~"+r+"~"+l}}else for(t=0;t<e.length;t++)""===i?i=e[t]:i+="~"+e[t];o.setCookie(s,i,31536e3,!0,!0)},s.utils.updateUserSportsDB=function(o){$.ui.showMask("Saving Sports"),e.defaults.headers.common.Function="sportsUpdateUrl";var s=JSON.stringify(o);e({method:"GET",url:oc.mainUrl+"ajax/update-user-sports",data:s,timeout:oc.ajaxAPITimeout}).then(function(){$.ui.hideMask(),ocApp.generalAlert("Success!","Successfully updated your favourite sports",!1,function(){ocApp.refreshApp("")})},function(){$.ui.hideMask(),ocApp.connectionAlert()})},s.utils.updateBookiesDB=function(o,s){if(oc.isLoggedIn){e.defaults.headers.common.Function="bookieUpdateUrl";var t=JSON.stringify(o);e({method:"GET",url:oc.mainUrl+"ajax/update-user-bookies",data:t,timeout:oc.ajaxAPITimeout}).then(function(){s||ocApp.generalAlert("Success!","Successfully updated your bookies",!1,"")},function(){s||ocApp.connectionAlert()})}},s.setBookies=function(e){if(oc.myoddscheckerEnabled){e=e||!1;var t=o.getCookie("mobile_bookies");s.utils.modelToCookie(s.model.userBookies,"mobile_bookies"),t!==o.getCookie("mobile_bookies")&&(s.utils.updateBookiesDB(s.model.userBookies,e),s.model.userBookiesLength=Object.keys(s.model.userBookies).length)}},s.addRemoveBookie=function(e,o,t){oc.myoddscheckerEnabled&&(t=t||!1,o=o||"x",s.model.userBookies[e]&&!t?delete s.model.userBookies[e]:s.model.userBookies[e]=o)},s.setUserBookiesFromAnyPage=function(e){oc.myoddscheckerEnabled&&(s.addRemoveBookie(e,!1,!0),s.setBookies(!0))},s.utils.popUp=function(e){$("body").popup({title:"Alert",message:"You can only select "+e+" favourite sports. Tap a sport button again to unselect it if you want to reselect, or submit your selections below",cancelText:"Close",cancelOnly:!0})},s.addRemoveSport=function(e){if(oc.myoddscheckerEnabled)if(s.model.userSports.indexOf(e)>-1)for(var o=0;o<s.model.userSports.length;o++)s.model.userSports[o]===e&&s.model.userSports.splice(o,1);else oc.isTabletRepub?s.model.userSports.length<5?s.model.userSports.push(e):s.utils.popUp(5):s.model.userSports.length<3?s.model.userSports.push(e):s.utils.popUp(3)},s.mobileOrTabletSelectedSports=function(e){if(oc.isTabletRepub)return s.model.userSports.indexOf(e)>-1?!0:!1;var o=s.model.userSports.slice(0,3);return o.indexOf(e)>-1?!0:!1},s.setSports=function(){oc.myoddscheckerEnabled&&(s.utils.modelToCookie(s.model.userSports,"mobile_sports"),s.utils.updateUserSportsDB(s.model.userSports))};var t=function(){oc.myoddscheckerEnabled&&(s.cookieToModel("mobile_sports"),s.cookieToModel("mobile_bookies"))};return t(),s}])}();
!function(){"use strict";ocAngularApp.controller("XmlBetController",["GlobalBetSlipFactory","$scope","ApiBetSlipNavModel",function(e,l,t){var i=this;i.nav=t.model,i.participantOddsModel=[],i.openSingleBetSlip=function(i,o){var p="BF"===o?!0:!1;p&&oc.hasAPIBookies?t.desktopNavHandler("exchangeBetView","betSlip",!1):t.desktopNavHandler("singleBetView","betSlip",!1),e["public"].betSlipClick(i),l.$apply()}}])}();
!function(){"use strict";ocAngularApp.controller("AjaxBetController",["GlobalBetSlipFactory","$scope","ApiBetSlipNavModel",function(e,o,t){o.nav=t.model,o.openSingleBetSlipUsingAjax=function(o,i,n){e["public"].getBetDataFromAjax(i,n).then(function(i){n=n?n:i.bookie;var l="BF"===n?!0:!1;l&&oc.hasAPIBookies?t.desktopNavHandler("exchangeBetView","betSlip",!1):t.desktopNavHandler("singleBetView","betSlip",!1),$.ui.showMask("Loading"),o=$(o[0]),e["public"].betSlipClick(o,i)})["catch"](function(){})}}])}();
!function(){"use strict";ocAngularApp.directive("ajaxBet",function(){return{restrict:"A",scope:{},controller:"AjaxBetController",link:function(t,e){e.bind("click",function(n){n.preventDefault();var i=Number(e.attr("data-bid")),r=e.data("bet-bk")?e.data("bet-bk"):null;t.openSingleBetSlipUsingAjax(e,i,r)})}}})}();
!function(){ocAngularApp.controller("NavSearchController",["SearchFactory","TranslationsModel","$timeout",function(e,n,t){var s=this,l=10,o=null;s.translations=n.model,s.toggleSearchPanel=function(){s.showSearchPanel=s.focusInput=!s.showSearchPanel,s.showSearchPanel?(angular.element("[data-open-panel]").removeClass("panel-open"),angular.element("#header .open-panel").removeClass("open-panel")):(s.query="",s.resetDefaults())},s.loadResults=function(){return e.validSearchTerm(s.query)?(s.resetDefaults(),s.isLoading=!0,null!==o&&t.cancel(o),void(o=t(function(){e.getSearchResultsJson(1,l,s.query).then(function(e){s.results=e.data.search_results.search_results,s.isLoading=!1},function(){s.noResults=!0,s.isLoading=!1})},1500))):void s.resetDefaults()},s.onKeyDown=function(n){s.selectedIndex=e.onKeyDown(n,s.selectedIndex,s.results)},s.getResultUrl=function(n){return e.getResultsUrl(n)},s.getSportsIcon=function(n){return e.getSportsIcon(n)},s.resetDefaults=function(){s.results={},s.noResults=!1,s.isLoading=!1,s.selectedIndex=-1}}])}();
!function(){"use strict";ocAngularApp.directive("autoSuggest",[function(){return{restrict:"E",replace:!0,templateUrl:"layout/search-suggest-template.html"}}]),ocAngularApp.directive("focusMe",[function(){return{scope:{trigger:"=focusMe"},link:function(t,e){t.$watch("trigger",function(r){r===!0&&(e[0].focus(),t.trigger=!1)})}}}])}();
!function(){ocAngularApp.controller("SearchPageController",["SearchFactory","Pagination","$scope","$timeout","$window",function(e,t,a,r,n){var s=this,u=500,i=10;n.onpopstate=function(e){s.query=e.state,s.loadPageResults(!1)},s.loadPageResults=function(t){if(s.lastSearchTerm=s.query,!e.validSearchTerm(s.query))return s.resetDefaults(),void(s.invalidSearchTerm=!0);if(s.resetDefaults(),s.isLoading=!0,e.getSearchResultsJson(1,u,s.query).then(function(e){s.results=e.data.search_results.search_results,s.totalResults=void 0===s.results.length?0:e.data.search_results.totalHits,s.pagination.numPages=Math.ceil(s.totalResults/s.pagination.perPage)},function(){s.noResults=!0}).then(function(){s.isLoading=!1}),history.pushState&&t){var i={query:s.query,title:"Results for "+s.query,url:oc.desktopUrl.slice(0,-1)+oc.urlPath+"?query="+s.query};n.history.pushState(i.query,i.title,i.url),r(function(){a.$apply()})}},s.showPagination=function(){return 0===s.totalResults||s.totalResults<=i||s.isLoading||s.invalidSearchTerm?!1:!0},s.getResultUrl=function(t){return e.getResultsUrl(t)},s.getSportsIcon=function(t){return e.getSportsIcon(t)},s.resetDefaults=function(){s.results={},s.totalResults=0,s.noResults=!1,s.isLoading=!1,s.invalidSearchTerm=!1,s.pagination=t.createNew(i),s.pagination.numPages=1};var o=function(){e.validSearchTerm(e.getParameterByName("query"))?(s.query=e.getParameterByName("query"),s.loadPageResults(!0),s.isLoading=!0):s.invalidSearchTerm=!0};o()}]).filter("pagination",function(){return function(e,t){return t=+t,e.slice(t)}})}();
!function(){"use strict";ocAngularApp.controller("PromotionsController",["$http",function(e){var o=this;o.optInComplete=!1,o.errorState=!1,o.userMessage="",o.optInAPI=function(){$.ui.showMask("Opting In"),o.optInLoading=!0;var t={email:o.email,password:o.password,promotion_key:oc.urlPath};t=encodeURI(Object.keys(t).map(function(e){return e+"="+t[e]}).join("&")),o.optInComplete=!1,o.userMessage="",o.errorState=!1;var n="MOBILE"===oc.platform?oc.mainUrl:oc.mainUrlSsl;e({method:"POST",url:n+"promotions/ajax-opt-in",data:t,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){if(e.data.success)o.optInComplete=!0,o.userMessage="Thank you for opting in.",o.optInLoading=!1,"DESKTOP"===oc.platform&&($("#login-panel").remove(),$("#logout-panel").removeClass("hide"));else switch(o.errorState=!0,e.data.status){case"user account locked":o.userMessage="Oddschecker account locked.",o.optInComplete=!0,o.optInLoading=!1;break;case"user already opted in":o.userMessage="You have already registered for this offer.",o.optInComplete=!0,o.optInLoading=!1,"DESKTOP"===oc.platform&&($("#login-panel").remove(),$("#logout-panel").removeClass("hide"));break;case"user details not recognised":o.userMessage="Account details not recognised, Please try again.",o.optInLoading=!1}})["catch"](function(){o.error=!0,o.userMessage="An error has occured, Please try again."})["finally"](function(){$.ui.hideMask(),a()})};var a=function(){o.email="",o.password=""}}])}();
!function(){"use strict";ocAngularApp.factory("Pagination",[function(){var e={};return e.createNew=function(e){e=void 0===e?15:e;var n={numPages:1,perPage:e,rangeSize:5,page:0};n.prevPage=function(){n.page>0&&(n.page-=1)},n.nextPage=function(){n.page<n.numPages-1&&(n.page+=1)},n.toPageId=function(e){e>=0&&e<=n.numPages-1&&(n.page=e)},n.range=function(){var e,r,a,t=[];r=n.numPages<n.rangeSize?n.numPages:n.rangeSize,a=n.numPages,e=n.page>a-r?a-r:n.page;for(var u=e;e+r>u;u++)a>u&&t.push(u);return t};return n},e}]).filter("startFrom",[function(){return function(e,n){return void 0===e||$.isEmptyObject(e)?e:e.slice(+n)}}]).filter("range",[function(){return function(e,n){n=parseInt(n);for(var r=0;n>r;r++)e.push(r);return e}}])}();
!function(){ocAngularApp.factory("SearchFactory",["$http","$q",function(e,a){var r={};return r.lastUpdated=0,r.validSearchTerm=function(e){return"undefined"==typeof e||e.length<3?!1:!0},r.onKeyDown=function(e,a,r){return 40===e.keyCode?(e.preventDefault(),a+1!==r.length&&a++):38===e.keyCode?(e.preventDefault(),a-1!==-1&&a--):13===e.keyCode&&-1!==a&&(e.preventDefault(),window.location=r[a].market_map),a},r.getSportsIcon=function(e){switch(e.toLowerCase()){case"horse racing":e="racing";break;case"aussie rules football":e="aussie-rules";break;case"ante post dogs":e="greyhounds";break;case"horse racing":e="racing";break;case"volleyball":e="basketball";break;case"curling":e="winter-olympics"}return"sport-"+e.replace(/ /g,"-")},r.getResultsUrl=function(e){var a=e.market_map;return a+=void 0!==e.bet_name?"?selectionName="+e.bet_name.replace(/\s+/g,"-").replace(/\//g,"-").toLowerCase():""},r.getParameterByName=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var a=new RegExp("[\\?&]"+e+"=([^&#]*)"),r=a.exec(location.search);return null===r?"":decodeURIComponent(r[1].replace(/\+/g," "))},r.getSearchResultsJson=function(t,n,o){var c=a.defer(),s=Date.now();return e({method:"GET",url:"search/process",params:{from:t,limit:n,query:o}}).then(function(e){s>r.lastUpdated&&(r.lastUpdated=s,"undefined"!=typeof e.data.search_results.search_results?c.resolve(e):c.reject("No data available"))},function(e){c.reject(e)}),c.promise},r}])}();
!function(){"use strict";ocAngularApp.controller("ContentHtmlController",["$injector","$scope","$timeout",function(t,o,n){var e=this;e.injector=t,e.$scope=o,e.$timeout=n}])}();
!function(){"use strict";ocAngularApp.directive("ocVideoPlayer",[function(){return{restrict:"E",replace:!1,scope:{defaultVideo:"@",showHeader:"@"},controller:"ocVideoPlayerController",controllerAs:"ocVideoPlayerController",bindToController:!0,templateUrl:"odds/templates/oc-video-player-template.html"}}]),ocAngularApp.controller("ocVideoPlayerController",["$scope","$sce",function(e,o){var l=this;l.selectedVideo="//"+l.defaultVideo+"?rel=0&amp;wmode=opaque",l.getSelectedVideo=function(){return o.trustAsResourceUrl(l.selectedVideo)},e.$on("NG-EVENT:selectedOddsGridVideoChanged",function(e,o){l.selectedVideo="//"+o.url+"?rel=0&wmode=opaque&autoplay=1",l.selectedVideoTitle=o.title})}])}();
!function(){"use strict";ocAngularApp.controller("MyBetsController",["MyBetsFactory","GLOBAL_CONSTANTS","MyBetsModel",function(e,t,a){var n=this;n.model=a.model,n.getBetData=function(t,a,n,i){void 0===t?(e.getBetData("single"),e.getBetData("multiple")):e.getBetData(t,a,n,i),$("#my-bets-inner-main").removeClass("hide")},n.loadType=function(t){e.loadType(t)},n.repaginate=function(t,a,n,i){e.repaginate(t,a,n,i)},n.translate=function(e){return t.BOOKIE_TRANSLATE[e]},n.isEachWay=function(t){e.isEachWay(t)},n.getMultipleBetNames=function(e){return e.betDetails.map(function(e){return e.betName}).join(", ")},n.getTotalOdds=function(e){return e.betDetails.map(function(e){return e.odds_dec}).reduce(function(e,t){return e*t}).toFixedNumber(2)},n.displaySingleInfo=function(e){var t={betName:e.betDetails[0].betName,subeventName:e.betDetails[0].subeventName,marketName:e.betDetails[0].marketName,eventName:e.betDetails[0].eventName,dateTime:e.dateTime,odds:e.betDetails[0].odds,odds_dec:e.betDetails[0].odds_dec,eachWayPlaces:""!==e.betDetails[0].eachWayTerms?e.betDetails[0].eachWayTerms.split(" ")[0]:"",eachWayTerms:""!==e.betDetails[0].eachWayTerms?e.betDetails[0].eachWayTerms.split(" ")[2]:"",eachWay:e.isEachWay};a.model.singleMessageInfo=t}}])}();
!function(){"use strict";ocAngularApp.factory("MyBetsFactory",["$http","MyBetsModel","Pagination","GlobalBookieAccountsFactory",function(e,t,o,a){var l={};return l.getBetData=function(n,i,s,d,m,r){i=i||"",s=s||0,d=d||100,m=m||"1970-01-01",r=r||"";var c=oc.mainUrlSsl,u=""!==m?"T00:00:00":"",g=""!==r?"T23:59:59":"",f=c+"my-bets?bookie="+i+"&size="+d+"&from="+s+"&nonapibookie="+!1+"&type="+n+"&fromDate="+m+u+"&toDate="+r+g;t.model[n].betsLoading.allResults=!0,e({method:"GET",url:f,timeout:oc.ajaxAPITimeout}).then(function(e){function i(l){var i="single"===l?"singleBets":"multipleBets";t.model.API[i]=e.data[i],t.model[l].bookies=e.data.bookies,t.model[l].pagination=o.createNew(10),t.model[l].pagination.numPages=Math.ceil(t.model.API[i].length/10),t.model[l].emptyFilters=!1,t.model.API[i].forEach(function(e){e.currency=a.mapCurrencySymbols(e.currencyCode)}),n===l&&0===e.data[i].length&&0!==e.data.bookies.length&&(t.model[n].emptyFilters=!0)}0!==e.data.singleBets.length&&(i("single"),t.model.API.singleBets.forEach(function(e){"BF"===e.bookie&&(e.returns=e.totalBetStake*e.betDetails[0].odds_dec,e.betDetails[0].odds=e.betDetails[0].odds_dec)})),0!==e.data.multipleBets.length&&i("multiple"),t.model.betsLoading.initialLoadComplete=!0,l.clearLoading(n),$.log(e.data)})["catch"](function(){})},l.clearLoading=function(e){var o={allResults:!1,nextResults:!1,previousResults:!1};t.model[e].betsLoading=o},l.repaginate=function(e,o,a,n){o?t.model[e].from=0:a?t.model[e].from=t.model[e].from+100:n&&(t.model[e].from=t.model[e].from-100),l.getBetData(e,t.model[e].selectedBookie,t.model[e].from,100,l.setDates(e,!0,!1),l.setDates(e,!1,!0))},l.setDates=function(e,o,a){function l(e){var t=new Date(e),o=""+(t.getMonth()+1),a=""+t.getDate(),l=t.getFullYear();return o.length<2&&(o="0"+o),a.length<2&&(a="0"+a),[l,o,a].join("-")}var n,i;return t.model[e].toDate||(t.model[e].toDate=l(new Date)),o&&t.model[e].fromDate?n=l(t.model[e].fromDate):a&&t.model[e].toDate?i=l(t.model[e].toDate):void 0},l.isEachWay=function(){},l}])}();
!function(){"use strict";ocAngularApp.directive("ocMyBets",[function(){return{restrict:"E",templateUrl:"myoddschecker/my-bets/templates/my-bets-template.html",replace:!0,controller:"MyBetsController",controllerAs:"MyBetsController"}}])}();
!function(){"use strict";ocAngularApp.factory("MyBetsModel",[function(){var e={};return e.model={API:{},multiple:{selectedBookie:null,from:0,fromDate:null,toDate:null,emptyFilters:!1,betsLoading:{allResults:!1,nextResults:!1,previousResults:!1}},single:{selectedBookie:null,from:0,fromDate:null,toDate:null,emptyFilters:!1,betsLoading:{allResults:!1,nextResults:!1,previousResults:!1}},betsLoading:{initialLoadComplete:!1},oddsType:oc.oddsType,singleMessageInfo:{betName:"",subeventName:"",marketName:"",eventName:"",dateTime:"",odds:"",odds_dec:""}},e}])}();